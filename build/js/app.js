!function(t){var c={};function l(d){if(c[d])return c[d].exports;var n=c[d]={i:d,l:!1,exports:{}};return t[d].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=t,l.c=c,l.d=function(t,c,d){l.o(t,c)||Object.defineProperty(t,c,{enumerable:!0,get:d})},l.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,c){if(1&c&&(t=l(t)),8&c)return t;if(4&c&&"object"==typeof t&&t&&t.__esModule)return t;var d=Object.create(null);if(l.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:t}),2&c&&"string"!=typeof t)for(var n in t)l.d(d,n,function(c){return t[c]}.bind(null,n));return d},l.n=function(t){var c=t&&t.__esModule?function(){return t.default}:function(){return t};return l.d(c,"a",c),c},l.o=function(t,c){return Object.prototype.hasOwnProperty.call(t,c)},l.p="js/",l(l.s=2)}([function(module,exports,__webpack_require__){"use strict";eval("/* WEBPACK VAR INJECTION */(function(global) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/*!\r\n *  howler.js v2.1.1\r\n *  howlerjs.com\r\n *\r\n *  (c) 2013-2018, James Simpson of GoldFire Studios\r\n *  goldfirestudios.com\r\n *\r\n *  MIT License\r\n */\n\n(function () {\n\n\t'use strict';\n\n\t/** Global Methods **/\n\t/***************************************************************************/\n\n\t/**\r\n  * Create the global controller. All contained methods and properties apply\r\n  * to all sounds that are currently playing or will be in the future.\r\n  */\n\n\tvar HowlerGlobal = function HowlerGlobal() {\n\t\tthis.init();\n\t};\n\tHowlerGlobal.prototype = {\n\t\t/**\r\n   * Initialize the global Howler object.\r\n   * @return {Howler}\r\n   */\n\t\tinit: function init() {\n\t\t\tvar self = this || Howler;\n\n\t\t\t// Create a global ID counter.\n\t\t\tself._counter = 1000;\n\n\t\t\t// Pool of unlocked HTML5 Audio objects.\n\t\t\tself._html5AudioPool = [];\n\t\t\tself.html5PoolSize = 10;\n\n\t\t\t// Internal properties.\n\t\t\tself._codecs = {};\n\t\t\tself._howls = [];\n\t\t\tself._muted = false;\n\t\t\tself._volume = 1;\n\t\t\tself._canPlayEvent = 'canplaythrough';\n\t\t\tself._navigator = typeof window !== 'undefined' && window.navigator ? window.navigator : null;\n\n\t\t\t// Public properties.\n\t\t\tself.masterGain = null;\n\t\t\tself.noAudio = false;\n\t\t\tself.usingWebAudio = true;\n\t\t\tself.autoSuspend = true;\n\t\t\tself.ctx = null;\n\n\t\t\t// Set to false to disable the auto audio unlocker.\n\t\t\tself.autoUnlock = true;\n\n\t\t\t// Setup the various state values for global tracking.\n\t\t\tself._setup();\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Get/set the global volume for all sounds.\r\n   * @param  {Float} vol Volume from 0.0 to 1.0.\r\n   * @return {Howler/Float}     Returns self or current volume.\r\n   */\n\t\tvolume: function volume(vol) {\n\t\t\tvar self = this || Howler;\n\t\t\tvol = parseFloat(vol);\n\n\t\t\t// If we don't have an AudioContext created yet, run the setup.\n\t\t\tif (!self.ctx) {\n\t\t\t\tsetupAudioContext();\n\t\t\t}\n\n\t\t\tif (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n\t\t\t\tself._volume = vol;\n\n\t\t\t\t// Don't update any of the nodes if we are muted.\n\t\t\t\tif (self._muted) {\n\t\t\t\t\treturn self;\n\t\t\t\t}\n\n\t\t\t\t// When using Web Audio, we just need to adjust the master gain.\n\t\t\t\tif (self.usingWebAudio) {\n\t\t\t\t\tself.masterGain.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n\t\t\t\t}\n\n\t\t\t\t// Loop through and change volume for all HTML5 audio nodes.\n\t\t\t\tfor (var i = 0; i < self._howls.length; i++) {\n\t\t\t\t\tif (!self._howls[i]._webAudio) {\n\t\t\t\t\t\t// Get all of the sounds in this Howl group.\n\t\t\t\t\t\tvar ids = self._howls[i]._getSoundIds();\n\n\t\t\t\t\t\t// Loop through all sounds and change the volumes.\n\t\t\t\t\t\tfor (var j = 0; j < ids.length; j++) {\n\t\t\t\t\t\t\tvar sound = self._howls[i]._soundById(ids[j]);\n\n\t\t\t\t\t\t\tif (sound && sound._node) {\n\t\t\t\t\t\t\t\tsound._node.volume = sound._volume * vol;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t}\n\n\t\t\treturn self._volume;\n\t\t},\n\n\t\t/**\r\n   * Handle muting and unmuting globally.\r\n   * @param  {Boolean} muted Is muted or not.\r\n   */\n\t\tmute: function mute(muted) {\n\t\t\tvar self = this || Howler;\n\n\t\t\t// If we don't have an AudioContext created yet, run the setup.\n\t\t\tif (!self.ctx) {\n\t\t\t\tsetupAudioContext();\n\t\t\t}\n\n\t\t\tself._muted = muted;\n\n\t\t\t// With Web Audio, we just need to mute the master gain.\n\t\t\tif (self.usingWebAudio) {\n\t\t\t\tself.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler.ctx.currentTime);\n\t\t\t}\n\n\t\t\t// Loop through and mute all HTML5 Audio nodes.\n\t\t\tfor (var i = 0; i < self._howls.length; i++) {\n\t\t\t\tif (!self._howls[i]._webAudio) {\n\t\t\t\t\t// Get all of the sounds in this Howl group.\n\t\t\t\t\tvar ids = self._howls[i]._getSoundIds();\n\n\t\t\t\t\t// Loop through all sounds and mark the audio node as muted.\n\t\t\t\t\tfor (var j = 0; j < ids.length; j++) {\n\t\t\t\t\t\tvar sound = self._howls[i]._soundById(ids[j]);\n\n\t\t\t\t\t\tif (sound && sound._node) {\n\t\t\t\t\t\t\tsound._node.muted = muted ? true : sound._muted;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Unload and destroy all currently loaded Howl objects.\r\n   * @return {Howler}\r\n   */\n\t\tunload: function unload() {\n\t\t\tvar self = this || Howler;\n\n\t\t\tfor (var i = self._howls.length - 1; i >= 0; i--) {\n\t\t\t\tself._howls[i].unload();\n\t\t\t}\n\n\t\t\t// Create a new AudioContext to make sure it is fully reset.\n\t\t\tif (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n\t\t\t\tself.ctx.close();\n\t\t\t\tself.ctx = null;\n\t\t\t\tsetupAudioContext();\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Check for codec support of specific extension.\r\n   * @param  {String} ext Audio file extention.\r\n   * @return {Boolean}\r\n   */\n\t\tcodecs: function codecs(ext) {\n\t\t\treturn (this || Howler)._codecs[ext.replace(/^x-/, '')];\n\t\t},\n\n\t\t/**\r\n   * Setup various state values for global tracking.\r\n   * @return {Howler}\r\n   */\n\t\t_setup: function _setup() {\n\t\t\tvar self = this || Howler;\n\n\t\t\t// Keeps track of the suspend/resume state of the AudioContext.\n\t\t\tself.state = self.ctx ? self.ctx.state || 'suspended' : 'suspended';\n\n\t\t\t// Automatically begin the 30-second suspend process\n\t\t\tself._autoSuspend();\n\n\t\t\t// Check if audio is available.\n\t\t\tif (!self.usingWebAudio) {\n\t\t\t\t// No audio is available on this system if noAudio is set to true.\n\t\t\t\tif (typeof Audio !== 'undefined') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar test = new Audio();\n\n\t\t\t\t\t\t// Check if the canplaythrough event is available.\n\t\t\t\t\t\tif (typeof test.oncanplaythrough === 'undefined') {\n\t\t\t\t\t\t\tself._canPlayEvent = 'canplay';\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tself.noAudio = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tself.noAudio = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Test to make sure audio isn't disabled in Internet Explorer.\n\t\t\ttry {\n\t\t\t\tvar test = new Audio();\n\t\t\t\tif (test.muted) {\n\t\t\t\t\tself.noAudio = true;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\t// Check for supported codecs.\n\t\t\tif (!self.noAudio) {\n\t\t\t\tself._setupCodecs();\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Check for browser support for various codecs and cache the results.\r\n   * @return {Howler}\r\n   */\n\t\t_setupCodecs: function _setupCodecs() {\n\t\t\tvar self = this || Howler;\n\t\t\tvar audioTest = null;\n\n\t\t\t// Must wrap in a try/catch because IE11 in server mode throws an error.\n\t\t\ttry {\n\t\t\t\taudioTest = typeof Audio !== 'undefined' ? new Audio() : null;\n\t\t\t} catch (err) {\n\t\t\t\treturn self;\n\t\t\t}\n\n\t\t\tif (!audioTest || typeof audioTest.canPlayType !== 'function') {\n\t\t\t\treturn self;\n\t\t\t}\n\n\t\t\tvar mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n\t\t\t// Opera version <33 has mixed MP3 support, so we need to check for and block it.\n\t\t\tvar checkOpera = self._navigator && self._navigator.userAgent.match(/OPR\\/([0-6].)/g);\n\t\t\tvar isOldOpera = checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33;\n\n\t\t\tself._codecs = {\n\t\t\t\tmp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n\t\t\t\tmpeg: !!mpegTest,\n\t\t\t\topus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n\t\t\t\togg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n\t\t\t\toga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n\t\t\t\twav: !!audioTest.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, ''),\n\t\t\t\taac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n\t\t\t\tcaf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n\t\t\t\tm4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n\t\t\t\tmp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n\t\t\t\tweba: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n\t\t\t\twebm: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n\t\t\t\tdolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n\t\t\t\tflac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n\t\t\t};\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Some browsers/devices will only allow audio to be played after a user interaction.\r\n   * Attempt to automatically unlock audio on the first user interaction.\r\n   * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\r\n   * @return {Howler}\r\n   */\n\t\t_unlockAudio: function _unlockAudio() {\n\t\t\tvar self = this || Howler;\n\n\t\t\t// Only run this on certain browsers/devices.\n\t\t\tvar shouldUnlock = /iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome|Safari/i.test(self._navigator && self._navigator.userAgent);\n\t\t\tif (self._audioUnlocked || !self.ctx || !shouldUnlock) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tself._audioUnlocked = false;\n\t\t\tself.autoUnlock = false;\n\n\t\t\t// Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n\t\t\t// Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n\t\t\t// By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n\t\t\tif (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n\t\t\t\tself._mobileUnloaded = true;\n\t\t\t\tself.unload();\n\t\t\t}\n\n\t\t\t// Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n\t\t\t// http://stackoverflow.com/questions/24119684\n\t\t\tself._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n\t\t\t// Call this method on touch start to create and play a buffer,\n\t\t\t// then check if the audio actually played to determine if\n\t\t\t// audio has now been unlocked on iOS, Android, etc.\n\t\t\tvar unlock = function unlock(e) {\n\t\t\t\t// Create a pool of unlocked HTML5 Audio objects that can\n\t\t\t\t// be used for playing sounds without user interaction. HTML5\n\t\t\t\t// Audio objects must be individually unlocked, as opposed\n\t\t\t\t// to the WebAudio API which only needs a single activation.\n\t\t\t\t// This must occur before WebAudio setup or the source.onended\n\t\t\t\t// event will not fire.\n\t\t\t\tfor (var i = 0; i < self.html5PoolSize; i++) {\n\t\t\t\t\tvar audioNode = new Audio();\n\n\t\t\t\t\t// Mark this Audio object as unlocked to ensure it can get returned\n\t\t\t\t\t// to the unlocked pool when released.\n\t\t\t\t\taudioNode._unlocked = true;\n\n\t\t\t\t\t// Add the audio node to the pool.\n\t\t\t\t\tself._releaseHtml5Audio(audioNode);\n\t\t\t\t}\n\n\t\t\t\t// Loop through any assigned audio nodes and unlock them.\n\t\t\t\tfor (var i = 0; i < self._howls.length; i++) {\n\t\t\t\t\tif (!self._howls[i]._webAudio) {\n\t\t\t\t\t\t// Get all of the sounds in this Howl group.\n\t\t\t\t\t\tvar ids = self._howls[i]._getSoundIds();\n\n\t\t\t\t\t\t// Loop through all sounds and unlock the audio nodes.\n\t\t\t\t\t\tfor (var j = 0; j < ids.length; j++) {\n\t\t\t\t\t\t\tvar sound = self._howls[i]._soundById(ids[j]);\n\n\t\t\t\t\t\t\tif (sound && sound._node && !sound._node._unlocked) {\n\t\t\t\t\t\t\t\tsound._node._unlocked = true;\n\t\t\t\t\t\t\t\tsound._node.load();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Fix Android can not play in suspend state.\n\t\t\t\tself._autoResume();\n\n\t\t\t\t// Create an empty buffer.\n\t\t\t\tvar source = self.ctx.createBufferSource();\n\t\t\t\tsource.buffer = self._scratchBuffer;\n\t\t\t\tsource.connect(self.ctx.destination);\n\n\t\t\t\t// Play the empty buffer.\n\t\t\t\tif (typeof source.start === 'undefined') {\n\t\t\t\t\tsource.noteOn(0);\n\t\t\t\t} else {\n\t\t\t\t\tsource.start(0);\n\t\t\t\t}\n\n\t\t\t\t// Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n\t\t\t\tif (typeof self.ctx.resume === 'function') {\n\t\t\t\t\tself.ctx.resume();\n\t\t\t\t}\n\n\t\t\t\t// Setup a timeout to check that we are unlocked on the next event loop.\n\t\t\t\tsource.onended = function () {\n\t\t\t\t\tsource.disconnect(0);\n\n\t\t\t\t\t// Update the unlocked state and prevent this check from happening again.\n\t\t\t\t\tself._audioUnlocked = true;\n\n\t\t\t\t\t// Remove the touch start listener.\n\t\t\t\t\tdocument.removeEventListener('touchstart', unlock, true);\n\t\t\t\t\tdocument.removeEventListener('touchend', unlock, true);\n\t\t\t\t\tdocument.removeEventListener('click', unlock, true);\n\n\t\t\t\t\t// Let all sounds know that audio has been unlocked.\n\t\t\t\t\tfor (var i = 0; i < self._howls.length; i++) {\n\t\t\t\t\t\tself._howls[i]._emit('unlock');\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\n\t\t\t// Setup a touch start listener to attempt an unlock in.\n\t\t\tdocument.addEventListener('touchstart', unlock, true);\n\t\t\tdocument.addEventListener('touchend', unlock, true);\n\t\t\tdocument.addEventListener('click', unlock, true);\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Get an unlocked HTML5 Audio object from the pool. If none are left,\r\n   * return a new Audio object and throw a warning.\r\n   * @return {Audio} HTML5 Audio object.\r\n   */\n\t\t_obtainHtml5Audio: function _obtainHtml5Audio() {\n\t\t\tvar self = this || Howler;\n\n\t\t\t// Return the next object from the pool if one exists.\n\t\t\tif (self._html5AudioPool.length) {\n\t\t\t\treturn self._html5AudioPool.pop();\n\t\t\t}\n\n\t\t\t//.Check if the audio is locked and throw a warning.\n\t\t\tvar testPlay = new Audio().play();\n\t\t\tif (testPlay && typeof Promise !== 'undefined' && (testPlay instanceof Promise || typeof testPlay.then === 'function')) {\n\t\t\t\ttestPlay.catch(function () {\n\t\t\t\t\tconsole.warn('HTML5 Audio pool exhausted, returning potentially locked audio object.');\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn new Audio();\n\t\t},\n\n\t\t/**\r\n   * Return an activated HTML5 Audio object to the pool.\r\n   * @return {Howler}\r\n   */\n\t\t_releaseHtml5Audio: function _releaseHtml5Audio(audio) {\n\t\t\tvar self = this || Howler;\n\n\t\t\t// Don't add audio to the pool if we don't know if it has been unlocked.\n\t\t\tif (audio._unlocked) {\n\t\t\t\tself._html5AudioPool.push(audio);\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\r\n   * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\r\n   * @return {Howler}\r\n   */\n\t\t_autoSuspend: function _autoSuspend() {\n\t\t\tvar self = this;\n\n\t\t\tif (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check if any sounds are playing.\n\t\t\tfor (var i = 0; i < self._howls.length; i++) {\n\t\t\t\tif (self._howls[i]._webAudio) {\n\t\t\t\t\tfor (var j = 0; j < self._howls[i]._sounds.length; j++) {\n\t\t\t\t\t\tif (!self._howls[i]._sounds[j]._paused) {\n\t\t\t\t\t\t\treturn self;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (self._suspendTimer) {\n\t\t\t\tclearTimeout(self._suspendTimer);\n\t\t\t}\n\n\t\t\t// If no sound has played after 30 seconds, suspend the context.\n\t\t\tself._suspendTimer = setTimeout(function () {\n\t\t\t\tif (!self.autoSuspend) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tself._suspendTimer = null;\n\t\t\t\tself.state = 'suspending';\n\t\t\t\tself.ctx.suspend().then(function () {\n\t\t\t\t\tself.state = 'suspended';\n\n\t\t\t\t\tif (self._resumeAfterSuspend) {\n\t\t\t\t\t\tdelete self._resumeAfterSuspend;\n\t\t\t\t\t\tself._autoResume();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, 30000);\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Automatically resume the Web Audio AudioContext when a new sound is played.\r\n   * @return {Howler}\r\n   */\n\t\t_autoResume: function _autoResume() {\n\t\t\tvar self = this;\n\n\t\t\tif (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (self.state === 'running' && self._suspendTimer) {\n\t\t\t\tclearTimeout(self._suspendTimer);\n\t\t\t\tself._suspendTimer = null;\n\t\t\t} else if (self.state === 'suspended') {\n\t\t\t\tself.ctx.resume().then(function () {\n\t\t\t\t\tself.state = 'running';\n\n\t\t\t\t\t// Emit to all Howls that the audio has resumed.\n\t\t\t\t\tfor (var i = 0; i < self._howls.length; i++) {\n\t\t\t\t\t\tself._howls[i]._emit('resume');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (self._suspendTimer) {\n\t\t\t\t\tclearTimeout(self._suspendTimer);\n\t\t\t\t\tself._suspendTimer = null;\n\t\t\t\t}\n\t\t\t} else if (self.state === 'suspending') {\n\t\t\t\tself._resumeAfterSuspend = true;\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\t};\n\n\t// Setup the global audio controller.\n\tvar Howler = new HowlerGlobal();\n\n\t/** Group Methods **/\n\t/***************************************************************************/\n\n\t/**\r\n  * Create an audio group controller.\r\n  * @param {Object} o Passed in properties for this group.\r\n  */\n\tvar Howl = function Howl(o) {\n\t\tvar self = this;\n\n\t\t// Throw an error if no source is provided.\n\t\tif (!o.src || o.src.length === 0) {\n\t\t\tconsole.error('An array of source files must be passed with any new Howl.');\n\t\t\treturn;\n\t\t}\n\n\t\tself.init(o);\n\t};\n\tHowl.prototype = {\n\t\t/**\r\n   * Initialize a new Howl group object.\r\n   * @param  {Object} o Passed in properties for this group.\r\n   * @return {Howl}\r\n   */\n\t\tinit: function init(o) {\n\t\t\tvar self = this;\n\n\t\t\t// If we don't have an AudioContext created yet, run the setup.\n\t\t\tif (!Howler.ctx) {\n\t\t\t\tsetupAudioContext();\n\t\t\t}\n\n\t\t\t// Setup user-defined default properties.\n\t\t\tself._autoplay = o.autoplay || false;\n\t\t\tself._format = typeof o.format !== 'string' ? o.format : [o.format];\n\t\t\tself._html5 = o.html5 || false;\n\t\t\tself._muted = o.mute || false;\n\t\t\tself._loop = o.loop || false;\n\t\t\tself._pool = o.pool || 5;\n\t\t\tself._preload = typeof o.preload === 'boolean' ? o.preload : true;\n\t\t\tself._rate = o.rate || 1;\n\t\t\tself._sprite = o.sprite || {};\n\t\t\tself._src = typeof o.src !== 'string' ? o.src : [o.src];\n\t\t\tself._volume = o.volume !== undefined ? o.volume : 1;\n\t\t\tself._xhrWithCredentials = o.xhrWithCredentials || false;\n\n\t\t\t// Setup all other default properties.\n\t\t\tself._duration = 0;\n\t\t\tself._state = 'unloaded';\n\t\t\tself._sounds = [];\n\t\t\tself._endTimers = {};\n\t\t\tself._queue = [];\n\t\t\tself._playLock = false;\n\n\t\t\t// Setup event listeners.\n\t\t\tself._onend = o.onend ? [{\n\t\t\t\tfn: o.onend\n\t\t\t}] : [];\n\t\t\tself._onfade = o.onfade ? [{\n\t\t\t\tfn: o.onfade\n\t\t\t}] : [];\n\t\t\tself._onload = o.onload ? [{\n\t\t\t\tfn: o.onload\n\t\t\t}] : [];\n\t\t\tself._onloaderror = o.onloaderror ? [{\n\t\t\t\tfn: o.onloaderror\n\t\t\t}] : [];\n\t\t\tself._onplayerror = o.onplayerror ? [{\n\t\t\t\tfn: o.onplayerror\n\t\t\t}] : [];\n\t\t\tself._onpause = o.onpause ? [{\n\t\t\t\tfn: o.onpause\n\t\t\t}] : [];\n\t\t\tself._onplay = o.onplay ? [{\n\t\t\t\tfn: o.onplay\n\t\t\t}] : [];\n\t\t\tself._onstop = o.onstop ? [{\n\t\t\t\tfn: o.onstop\n\t\t\t}] : [];\n\t\t\tself._onmute = o.onmute ? [{\n\t\t\t\tfn: o.onmute\n\t\t\t}] : [];\n\t\t\tself._onvolume = o.onvolume ? [{\n\t\t\t\tfn: o.onvolume\n\t\t\t}] : [];\n\t\t\tself._onrate = o.onrate ? [{\n\t\t\t\tfn: o.onrate\n\t\t\t}] : [];\n\t\t\tself._onseek = o.onseek ? [{\n\t\t\t\tfn: o.onseek\n\t\t\t}] : [];\n\t\t\tself._onunlock = o.onunlock ? [{\n\t\t\t\tfn: o.onunlock\n\t\t\t}] : [];\n\t\t\tself._onresume = [];\n\n\t\t\t// Web Audio or HTML5 Audio?\n\t\t\tself._webAudio = Howler.usingWebAudio && !self._html5;\n\n\t\t\t// Automatically try to enable audio.\n\t\t\tif (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.autoUnlock) {\n\t\t\t\tHowler._unlockAudio();\n\t\t\t}\n\n\t\t\t// Keep track of this Howl group in the global controller.\n\t\t\tHowler._howls.push(self);\n\n\t\t\t// If they selected autoplay, add a play event to the load queue.\n\t\t\tif (self._autoplay) {\n\t\t\t\tself._queue.push({\n\t\t\t\t\tevent: 'play',\n\t\t\t\t\taction: function action() {\n\t\t\t\t\t\tself.play();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Load the source file unless otherwise specified.\n\t\t\tif (self._preload) {\n\t\t\t\tself.load();\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Load the audio file.\r\n   * @return {Howler}\r\n   */\n\t\tload: function load() {\n\t\t\tvar self = this;\n\t\t\tvar url = null;\n\n\t\t\t// If no audio is available, quit immediately.\n\t\t\tif (Howler.noAudio) {\n\t\t\t\tself._emit('loaderror', null, 'No audio support.');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Make sure our source is in an array.\n\t\t\tif (typeof self._src === 'string') {\n\t\t\t\tself._src = [self._src];\n\t\t\t}\n\n\t\t\t// Loop through the sources and pick the first one that is compatible.\n\t\t\tfor (var i = 0; i < self._src.length; i++) {\n\t\t\t\tvar ext, str;\n\n\t\t\t\tif (self._format && self._format[i]) {\n\t\t\t\t\t// If an extension was specified, use that instead.\n\t\t\t\t\text = self._format[i];\n\t\t\t\t} else {\n\t\t\t\t\t// Make sure the source is a string.\n\t\t\t\t\tstr = self._src[i];\n\t\t\t\t\tif (typeof str !== 'string') {\n\t\t\t\t\t\tself._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Extract the file extension from the URL or base64 data URI.\n\t\t\t\t\text = /^data:audio\\/([^;,]+);/i.exec(str);\n\t\t\t\t\tif (!ext) {\n\t\t\t\t\t\text = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ext) {\n\t\t\t\t\t\text = ext[1].toLowerCase();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Log a warning if no extension was found.\n\t\t\t\tif (!ext) {\n\t\t\t\t\tconsole.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n\t\t\t\t}\n\n\t\t\t\t// Check if this extension is available.\n\t\t\t\tif (ext && Howler.codecs(ext)) {\n\t\t\t\t\turl = self._src[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!url) {\n\t\t\t\tself._emit('loaderror', null, 'No codec support for selected audio sources.');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tself._src = url;\n\t\t\tself._state = 'loading';\n\n\t\t\t// If the hosting page is HTTPS and the source isn't,\n\t\t\t// drop down to HTML5 Audio to avoid Mixed Content errors.\n\t\t\tif (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n\t\t\t\tself._html5 = true;\n\t\t\t\tself._webAudio = false;\n\t\t\t}\n\n\t\t\t// Create a new sound object and add it to the pool.\n\t\t\tnew Sound(self);\n\n\t\t\t// Load and decode the audio data for playback.\n\t\t\tif (self._webAudio) {\n\t\t\t\tloadBuffer(self);\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Play a sound or resume previous playback.\r\n   * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\r\n   * @param  {Boolean} internal Internal Use: true prevents event firing.\r\n   * @return {Number}          Sound ID.\r\n   */\n\t\tplay: function play(sprite, internal) {\n\t\t\tvar self = this;\n\t\t\tvar id = null;\n\n\t\t\t// Determine if a sprite, sound id or nothing was passed\n\t\t\tif (typeof sprite === 'number') {\n\t\t\t\tid = sprite;\n\t\t\t\tsprite = null;\n\t\t\t} else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n\t\t\t\t// If the passed sprite doesn't exist, do nothing.\n\t\t\t\treturn null;\n\t\t\t} else if (typeof sprite === 'undefined') {\n\t\t\t\t// Use the default sound sprite (plays the full audio length).\n\t\t\t\tsprite = '__default';\n\n\t\t\t\t// Check if there is a single paused sound that isn't ended. \n\t\t\t\t// If there is, play that sound. If not, continue as usual.  \n\t\t\t\tif (!self._playLock) {\n\t\t\t\t\tvar num = 0;\n\t\t\t\t\tfor (var i = 0; i < self._sounds.length; i++) {\n\t\t\t\t\t\tif (self._sounds[i]._paused && !self._sounds[i]._ended) {\n\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\tid = self._sounds[i]._id;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (num === 1) {\n\t\t\t\t\t\tsprite = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tid = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Get the selected node, or get one from the pool.\n\t\t\tvar sound = id ? self._soundById(id) : self._inactiveSound();\n\n\t\t\t// If the sound doesn't exist, do nothing.\n\t\t\tif (!sound) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Select the sprite definition.\n\t\t\tif (id && !sprite) {\n\t\t\t\tsprite = sound._sprite || '__default';\n\t\t\t}\n\n\t\t\t// If the sound hasn't loaded, we must wait to get the audio's duration.\n\t\t\t// We also need to wait to make sure we don't run into race conditions with\n\t\t\t// the order of function calls.\n\t\t\tif (self._state !== 'loaded') {\n\t\t\t\t// Set the sprite value on this sound.\n\t\t\t\tsound._sprite = sprite;\n\n\t\t\t\t// Mark this sound as not ended in case another sound is played before this one loads.\n\t\t\t\tsound._ended = false;\n\n\t\t\t\t// Add the sound to the queue to be played on load.\n\t\t\t\tvar soundId = sound._id;\n\t\t\t\tself._queue.push({\n\t\t\t\t\tevent: 'play',\n\t\t\t\t\taction: function action() {\n\t\t\t\t\t\tself.play(soundId);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn soundId;\n\t\t\t}\n\n\t\t\t// Don't play the sound if an id was passed and it is already playing.\n\t\t\tif (id && !sound._paused) {\n\t\t\t\t// Trigger the play event, in order to keep iterating through queue.\n\t\t\t\tif (!internal) {\n\t\t\t\t\tself._loadQueue('play');\n\t\t\t\t}\n\n\t\t\t\treturn sound._id;\n\t\t\t}\n\n\t\t\t// Make sure the AudioContext isn't suspended, and resume it if it is.\n\t\t\tif (self._webAudio) {\n\t\t\t\tHowler._autoResume();\n\t\t\t}\n\n\t\t\t// Determine how long to play for and where to start playing.\n\t\t\tvar seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n\t\t\tvar duration = Math.max(0, (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000 - seek);\n\t\t\tvar timeout = duration * 1000 / Math.abs(sound._rate);\n\t\t\tvar start = self._sprite[sprite][0] / 1000;\n\t\t\tvar stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n\t\t\tvar loop = !!(sound._loop || self._sprite[sprite][2]);\n\t\t\tsound._sprite = sprite;\n\n\t\t\t// Mark the sound as ended instantly so that this async playback\n\t\t\t// doesn't get grabbed by another call to play while this one waits to start.\n\t\t\tsound._ended = false;\n\n\t\t\t// Update the parameters of the sound.\n\t\t\tvar setParams = function setParams() {\n\t\t\t\tsound._paused = false;\n\t\t\t\tsound._seek = seek;\n\t\t\t\tsound._start = start;\n\t\t\t\tsound._stop = stop;\n\t\t\t\tsound._loop = loop;\n\t\t\t};\n\n\t\t\t// End the sound instantly if seek is at the end.\n\t\t\tif (seek >= stop) {\n\t\t\t\tself._ended(sound);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Begin the actual playback.\n\t\t\tvar node = sound._node;\n\t\t\tif (self._webAudio) {\n\t\t\t\t// Fire this when the sound is ready to play to begin Web Audio playback.\n\t\t\t\tvar playWebAudio = function playWebAudio() {\n\t\t\t\t\tself._playLock = false;\n\t\t\t\t\tsetParams();\n\t\t\t\t\tself._refreshBuffer(sound);\n\n\t\t\t\t\t// Setup the playback params.\n\t\t\t\t\tvar vol = sound._muted || self._muted ? 0 : sound._volume;\n\t\t\t\t\tnode.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n\t\t\t\t\tsound._playStart = Howler.ctx.currentTime;\n\n\t\t\t\t\t// Play the sound using the supported method.\n\t\t\t\t\tif (typeof node.bufferSource.start === 'undefined') {\n\t\t\t\t\t\tsound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Start a new timer if none is present.\n\t\t\t\t\tif (timeout !== Infinity) {\n\t\t\t\t\t\tself._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!internal) {\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tself._emit('play', sound._id);\n\t\t\t\t\t\t\tself._loadQueue();\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tif (Howler.state === 'running') {\n\t\t\t\t\tplayWebAudio();\n\t\t\t\t} else {\n\t\t\t\t\tself._playLock = true;\n\n\t\t\t\t\t// Wait for the audio context to resume before playing.\n\t\t\t\t\tself.once('resume', playWebAudio);\n\n\t\t\t\t\t// Cancel the end timer.\n\t\t\t\t\tself._clearTimer(sound._id);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Fire this when the sound is ready to play to begin HTML5 Audio playback.\n\t\t\t\tvar playHtml5 = function playHtml5() {\n\t\t\t\t\tnode.currentTime = seek;\n\t\t\t\t\tnode.muted = sound._muted || self._muted || Howler._muted || node.muted;\n\t\t\t\t\tnode.volume = sound._volume * Howler.volume();\n\t\t\t\t\tnode.playbackRate = sound._rate;\n\n\t\t\t\t\t// Some browsers will throw an error if this is called without user interaction.\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar play = node.play();\n\n\t\t\t\t\t\t// Support older browsers that don't support promises, and thus don't have this issue.\n\t\t\t\t\t\tif (play && typeof Promise !== 'undefined' && (play instanceof Promise || typeof play.then === 'function')) {\n\t\t\t\t\t\t\t// Implements a lock to prevent DOMException: The play() request was interrupted by a call to pause().\n\t\t\t\t\t\t\tself._playLock = true;\n\n\t\t\t\t\t\t\t// Set param values immediately.\n\t\t\t\t\t\t\tsetParams();\n\n\t\t\t\t\t\t\t// Releases the lock and executes queued actions.\n\t\t\t\t\t\t\tplay.then(function () {\n\t\t\t\t\t\t\t\tself._playLock = false;\n\t\t\t\t\t\t\t\tnode._unlocked = true;\n\t\t\t\t\t\t\t\tif (!internal) {\n\t\t\t\t\t\t\t\t\tself._emit('play', sound._id);\n\t\t\t\t\t\t\t\t\tself._loadQueue();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).catch(function () {\n\t\t\t\t\t\t\t\tself._playLock = false;\n\t\t\t\t\t\t\t\tself._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' + 'on mobile devices and Chrome where playback was not within a user interaction.');\n\n\t\t\t\t\t\t\t\t// Reset the ended and paused values.\n\t\t\t\t\t\t\t\tsound._ended = true;\n\t\t\t\t\t\t\t\tsound._paused = true;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (!internal) {\n\t\t\t\t\t\t\tself._playLock = false;\n\t\t\t\t\t\t\tsetParams();\n\t\t\t\t\t\t\tself._emit('play', sound._id);\n\t\t\t\t\t\t\tself._loadQueue();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Setting rate before playing won't work in IE, so we set it again here.\n\t\t\t\t\t\tnode.playbackRate = sound._rate;\n\n\t\t\t\t\t\t// If the node is still paused, then we can assume there was a playback issue.\n\t\t\t\t\t\tif (node.paused) {\n\t\t\t\t\t\t\tself._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' + 'on mobile devices and Chrome where playback was not within a user interaction.');\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Setup the end timer on sprites or listen for the ended event.\n\t\t\t\t\t\tif (sprite !== '__default' || sound._loop) {\n\t\t\t\t\t\t\tself._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself._endTimers[sound._id] = function () {\n\t\t\t\t\t\t\t\t// Fire ended on this audio node.\n\t\t\t\t\t\t\t\tself._ended(sound);\n\n\t\t\t\t\t\t\t\t// Clear this listener.\n\t\t\t\t\t\t\t\tnode.removeEventListener('ended', self._endTimers[sound._id], false);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tnode.addEventListener('ended', self._endTimers[sound._id], false);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tself._emit('playerror', sound._id, err);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Play immediately if ready, or wait for the 'canplaythrough'e vent.\n\t\t\t\tvar loadedNoReadyState = window && window.ejecta || !node.readyState && Howler._navigator.isCocoonJS;\n\t\t\t\tif (node.readyState >= 3 || loadedNoReadyState) {\n\t\t\t\t\tplayHtml5();\n\t\t\t\t} else {\n\t\t\t\t\tself._playLock = true;\n\n\t\t\t\t\tvar listener = function listener() {\n\t\t\t\t\t\t// Begin playback.\n\t\t\t\t\t\tplayHtml5();\n\n\t\t\t\t\t\t// Clear this listener.\n\t\t\t\t\t\tnode.removeEventListener(Howler._canPlayEvent, listener, false);\n\t\t\t\t\t};\n\t\t\t\t\tnode.addEventListener(Howler._canPlayEvent, listener, false);\n\n\t\t\t\t\t// Cancel the end timer.\n\t\t\t\t\tself._clearTimer(sound._id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn sound._id;\n\t\t},\n\n\t\t/**\r\n   * Pause playback and save current position.\r\n   * @param  {Number} id The sound ID (empty to pause all in group).\r\n   * @return {Howl}\r\n   */\n\t\tpause: function pause(id) {\n\t\t\tvar self = this;\n\n\t\t\t// If the sound hasn't loaded or a play() promise is pending, add it to the load queue to pause when capable.\n\t\t\tif (self._state !== 'loaded' || self._playLock) {\n\t\t\t\tself._queue.push({\n\t\t\t\t\tevent: 'pause',\n\t\t\t\t\taction: function action() {\n\t\t\t\t\t\tself.pause(id);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn self;\n\t\t\t}\n\n\t\t\t// If no id is passed, get all ID's to be paused.\n\t\t\tvar ids = self._getSoundIds(id);\n\n\t\t\tfor (var i = 0; i < ids.length; i++) {\n\t\t\t\t// Clear the end timer.\n\t\t\t\tself._clearTimer(ids[i]);\n\n\t\t\t\t// Get the sound.\n\t\t\t\tvar sound = self._soundById(ids[i]);\n\n\t\t\t\tif (sound && !sound._paused) {\n\t\t\t\t\t// Reset the seek position.\n\t\t\t\t\tsound._seek = self.seek(ids[i]);\n\t\t\t\t\tsound._rateSeek = 0;\n\t\t\t\t\tsound._paused = true;\n\n\t\t\t\t\t// Stop currently running fades.\n\t\t\t\t\tself._stopFade(ids[i]);\n\n\t\t\t\t\tif (sound._node) {\n\t\t\t\t\t\tif (self._webAudio) {\n\t\t\t\t\t\t\t// Make sure the sound has been created.\n\t\t\t\t\t\t\tif (!sound._node.bufferSource) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (typeof sound._node.bufferSource.stop === 'undefined') {\n\t\t\t\t\t\t\t\tsound._node.bufferSource.noteOff(0);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsound._node.bufferSource.stop(0);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Clean up the buffer source.\n\t\t\t\t\t\t\tself._cleanBuffer(sound._node);\n\t\t\t\t\t\t} else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n\t\t\t\t\t\t\tsound._node.pause();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Fire the pause event, unless `true` is passed as the 2nd argument.\n\t\t\t\tif (!arguments[1]) {\n\t\t\t\t\tself._emit('pause', sound ? sound._id : null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Stop playback and reset to start.\r\n   * @param  {Number} id The sound ID (empty to stop all in group).\r\n   * @param  {Boolean} internal Internal Use: true prevents event firing.\r\n   * @return {Howl}\r\n   */\n\t\tstop: function stop(id, internal) {\n\t\t\tvar self = this;\n\n\t\t\t// If the sound hasn't loaded, add it to the load queue to stop when capable.\n\t\t\tif (self._state !== 'loaded' || self._playLock) {\n\t\t\t\tself._queue.push({\n\t\t\t\t\tevent: 'stop',\n\t\t\t\t\taction: function action() {\n\t\t\t\t\t\tself.stop(id);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn self;\n\t\t\t}\n\n\t\t\t// If no id is passed, get all ID's to be stopped.\n\t\t\tvar ids = self._getSoundIds(id);\n\n\t\t\tfor (var i = 0; i < ids.length; i++) {\n\t\t\t\t// Clear the end timer.\n\t\t\t\tself._clearTimer(ids[i]);\n\n\t\t\t\t// Get the sound.\n\t\t\t\tvar sound = self._soundById(ids[i]);\n\n\t\t\t\tif (sound) {\n\t\t\t\t\t// Reset the seek position.\n\t\t\t\t\tsound._seek = sound._start || 0;\n\t\t\t\t\tsound._rateSeek = 0;\n\t\t\t\t\tsound._paused = true;\n\t\t\t\t\tsound._ended = true;\n\n\t\t\t\t\t// Stop currently running fades.\n\t\t\t\t\tself._stopFade(ids[i]);\n\n\t\t\t\t\tif (sound._node) {\n\t\t\t\t\t\tif (self._webAudio) {\n\t\t\t\t\t\t\t// Make sure the sound's AudioBufferSourceNode has been created.\n\t\t\t\t\t\t\tif (sound._node.bufferSource) {\n\t\t\t\t\t\t\t\tif (typeof sound._node.bufferSource.stop === 'undefined') {\n\t\t\t\t\t\t\t\t\tsound._node.bufferSource.noteOff(0);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsound._node.bufferSource.stop(0);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Clean up the buffer source.\n\t\t\t\t\t\t\t\tself._cleanBuffer(sound._node);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n\t\t\t\t\t\t\tsound._node.currentTime = sound._start || 0;\n\t\t\t\t\t\t\tsound._node.pause();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!internal) {\n\t\t\t\t\t\tself._emit('stop', sound._id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Mute/unmute a single sound or all sounds in this Howl group.\r\n   * @param  {Boolean} muted Set to true to mute and false to unmute.\r\n   * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\r\n   * @return {Howl}\r\n   */\n\t\tmute: function mute(muted, id) {\n\t\t\tvar self = this;\n\n\t\t\t// If the sound hasn't loaded, add it to the load queue to mute when capable.\n\t\t\tif (self._state !== 'loaded' || self._playLock) {\n\t\t\t\tself._queue.push({\n\t\t\t\t\tevent: 'mute',\n\t\t\t\t\taction: function action() {\n\t\t\t\t\t\tself.mute(muted, id);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn self;\n\t\t\t}\n\n\t\t\t// If applying mute/unmute to all sounds, update the group's value.\n\t\t\tif (typeof id === 'undefined') {\n\t\t\t\tif (typeof muted === 'boolean') {\n\t\t\t\t\tself._muted = muted;\n\t\t\t\t} else {\n\t\t\t\t\treturn self._muted;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If no id is passed, get all ID's to be muted.\n\t\t\tvar ids = self._getSoundIds(id);\n\n\t\t\tfor (var i = 0; i < ids.length; i++) {\n\t\t\t\t// Get the sound.\n\t\t\t\tvar sound = self._soundById(ids[i]);\n\n\t\t\t\tif (sound) {\n\t\t\t\t\tsound._muted = muted;\n\n\t\t\t\t\t// Cancel active fade and set the volume to the end value.\n\t\t\t\t\tif (sound._interval) {\n\t\t\t\t\t\tself._stopFade(sound._id);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self._webAudio && sound._node) {\n\t\t\t\t\t\tsound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n\t\t\t\t\t} else if (sound._node) {\n\t\t\t\t\t\tsound._node.muted = Howler._muted ? true : muted;\n\t\t\t\t\t}\n\n\t\t\t\t\tself._emit('mute', sound._id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\r\n   *   volume() -> Returns the group's volume value.\r\n   *   volume(id) -> Returns the sound id's current volume.\r\n   *   volume(vol) -> Sets the volume of all sounds in this Howl group.\r\n   *   volume(vol, id) -> Sets the volume of passed sound id.\r\n   * @return {Howl/Number} Returns self or current volume.\r\n   */\n\t\tvolume: function volume() {\n\t\t\tvar self = this;\n\t\t\tvar args = arguments;\n\t\t\tvar vol, id;\n\n\t\t\t// Determine the values based on arguments.\n\t\t\tif (args.length === 0) {\n\t\t\t\t// Return the value of the groups' volume.\n\t\t\t\treturn self._volume;\n\t\t\t} else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n\t\t\t\t// First check if this is an ID, and if not, assume it is a new volume.\n\t\t\t\tvar ids = self._getSoundIds();\n\t\t\t\tvar index = ids.indexOf(args[0]);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tid = parseInt(args[0], 10);\n\t\t\t\t} else {\n\t\t\t\t\tvol = parseFloat(args[0]);\n\t\t\t\t}\n\t\t\t} else if (args.length >= 2) {\n\t\t\t\tvol = parseFloat(args[0]);\n\t\t\t\tid = parseInt(args[1], 10);\n\t\t\t}\n\n\t\t\t// Update the volume or return the current volume.\n\t\t\tvar sound;\n\t\t\tif (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n\t\t\t\t// If the sound hasn't loaded, add it to the load queue to change volume when capable.\n\t\t\t\tif (self._state !== 'loaded' || self._playLock) {\n\t\t\t\t\tself._queue.push({\n\t\t\t\t\t\tevent: 'volume',\n\t\t\t\t\t\taction: function action() {\n\t\t\t\t\t\t\tself.volume.apply(self, args);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn self;\n\t\t\t\t}\n\n\t\t\t\t// Set the group volume.\n\t\t\t\tif (typeof id === 'undefined') {\n\t\t\t\t\tself._volume = vol;\n\t\t\t\t}\n\n\t\t\t\t// Update one or all volumes.\n\t\t\t\tid = self._getSoundIds(id);\n\t\t\t\tfor (var i = 0; i < id.length; i++) {\n\t\t\t\t\t// Get the sound.\n\t\t\t\t\tsound = self._soundById(id[i]);\n\n\t\t\t\t\tif (sound) {\n\t\t\t\t\t\tsound._volume = vol;\n\n\t\t\t\t\t\t// Stop currently running fades.\n\t\t\t\t\t\tif (!args[2]) {\n\t\t\t\t\t\t\tself._stopFade(id[i]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (self._webAudio && sound._node && !sound._muted) {\n\t\t\t\t\t\t\tsound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n\t\t\t\t\t\t} else if (sound._node && !sound._muted) {\n\t\t\t\t\t\t\tsound._node.volume = vol * Howler.volume();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tself._emit('volume', sound._id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsound = id ? self._soundById(id) : self._sounds[0];\n\t\t\t\treturn sound ? sound._volume : 0;\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Fade a currently playing sound between two volumes (if no id is passsed, all sounds will fade).\r\n   * @param  {Number} from The value to fade from (0.0 to 1.0).\r\n   * @param  {Number} to   The volume to fade to (0.0 to 1.0).\r\n   * @param  {Number} len  Time in milliseconds to fade.\r\n   * @param  {Number} id   The sound id (omit to fade all sounds).\r\n   * @return {Howl}\r\n   */\n\t\tfade: function fade(from, to, len, id) {\n\t\t\tvar self = this;\n\n\t\t\t// If the sound hasn't loaded, add it to the load queue to fade when capable.\n\t\t\tif (self._state !== 'loaded' || self._playLock) {\n\t\t\t\tself._queue.push({\n\t\t\t\t\tevent: 'fade',\n\t\t\t\t\taction: function action() {\n\t\t\t\t\t\tself.fade(from, to, len, id);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn self;\n\t\t\t}\n\n\t\t\t// Make sure the to/from/len values are numbers.\n\t\t\tfrom = parseFloat(from);\n\t\t\tto = parseFloat(to);\n\t\t\tlen = parseFloat(len);\n\n\t\t\t// Set the volume to the start position.\n\t\t\tself.volume(from, id);\n\n\t\t\t// Fade the volume of one or all sounds.\n\t\t\tvar ids = self._getSoundIds(id);\n\t\t\tfor (var i = 0; i < ids.length; i++) {\n\t\t\t\t// Get the sound.\n\t\t\t\tvar sound = self._soundById(ids[i]);\n\n\t\t\t\t// Create a linear fade or fall back to timeouts with HTML5 Audio.\n\t\t\t\tif (sound) {\n\t\t\t\t\t// Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n\t\t\t\t\tif (!id) {\n\t\t\t\t\t\tself._stopFade(ids[i]);\n\t\t\t\t\t}\n\n\t\t\t\t\t// If we are using Web Audio, let the native methods do the actual fade.\n\t\t\t\t\tif (self._webAudio && !sound._muted) {\n\t\t\t\t\t\tvar currentTime = Howler.ctx.currentTime;\n\t\t\t\t\t\tvar end = currentTime + len / 1000;\n\t\t\t\t\t\tsound._volume = from;\n\t\t\t\t\t\tsound._node.gain.setValueAtTime(from, currentTime);\n\t\t\t\t\t\tsound._node.gain.linearRampToValueAtTime(to, end);\n\t\t\t\t\t}\n\n\t\t\t\t\tself._startFadeInterval(sound, from, to, len, ids[i], typeof id === 'undefined');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Starts the internal interval to fade a sound.\r\n   * @param  {Object} sound Reference to sound to fade.\r\n   * @param  {Number} from The value to fade from (0.0 to 1.0).\r\n   * @param  {Number} to   The volume to fade to (0.0 to 1.0).\r\n   * @param  {Number} len  Time in milliseconds to fade.\r\n   * @param  {Number} id   The sound id to fade.\r\n   * @param  {Boolean} isGroup   If true, set the volume on the group.\r\n   */\n\t\t_startFadeInterval: function _startFadeInterval(sound, from, to, len, id, isGroup) {\n\t\t\tvar self = this;\n\t\t\tvar vol = from;\n\t\t\tvar diff = to - from;\n\t\t\tvar steps = Math.abs(diff / 0.01);\n\t\t\tvar stepLen = Math.max(4, steps > 0 ? len / steps : len);\n\t\t\tvar lastTick = Date.now();\n\n\t\t\t// Store the value being faded to.\n\t\t\tsound._fadeTo = to;\n\n\t\t\t// Update the volume value on each interval tick.\n\t\t\tsound._interval = setInterval(function () {\n\t\t\t\t// Update the volume based on the time since the last tick.\n\t\t\t\tvar tick = (Date.now() - lastTick) / len;\n\t\t\t\tlastTick = Date.now();\n\t\t\t\tvol += diff * tick;\n\n\t\t\t\t// Make sure the volume is in the right bounds.\n\t\t\t\tvol = Math.max(0, vol);\n\t\t\t\tvol = Math.min(1, vol);\n\n\t\t\t\t// Round to within 2 decimal points.\n\t\t\t\tvol = Math.round(vol * 100) / 100;\n\n\t\t\t\t// Change the volume.\n\t\t\t\tif (self._webAudio) {\n\t\t\t\t\tsound._volume = vol;\n\t\t\t\t} else {\n\t\t\t\t\tself.volume(vol, sound._id, true);\n\t\t\t\t}\n\n\t\t\t\t// Set the group's volume.\n\t\t\t\tif (isGroup) {\n\t\t\t\t\tself._volume = vol;\n\t\t\t\t}\n\n\t\t\t\t// When the fade is complete, stop it and fire event.\n\t\t\t\tif (to < from && vol <= to || to > from && vol >= to) {\n\t\t\t\t\tclearInterval(sound._interval);\n\t\t\t\t\tsound._interval = null;\n\t\t\t\t\tsound._fadeTo = null;\n\t\t\t\t\tself.volume(to, sound._id);\n\t\t\t\t\tself._emit('fade', sound._id);\n\t\t\t\t}\n\t\t\t}, stepLen);\n\t\t},\n\n\t\t/**\r\n   * Internal method that stops the currently playing fade when\r\n   * a new fade starts, volume is changed or the sound is stopped.\r\n   * @param  {Number} id The sound id.\r\n   * @return {Howl}\r\n   */\n\t\t_stopFade: function _stopFade(id) {\n\t\t\tvar self = this;\n\t\t\tvar sound = self._soundById(id);\n\n\t\t\tif (sound && sound._interval) {\n\t\t\t\tif (self._webAudio) {\n\t\t\t\t\tsound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n\t\t\t\t}\n\n\t\t\t\tclearInterval(sound._interval);\n\t\t\t\tsound._interval = null;\n\t\t\t\tself.volume(sound._fadeTo, id);\n\t\t\t\tsound._fadeTo = null;\n\t\t\t\tself._emit('fade', id);\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\r\n   *   loop() -> Returns the group's loop value.\r\n   *   loop(id) -> Returns the sound id's loop value.\r\n   *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\r\n   *   loop(loop, id) -> Sets the loop value of passed sound id.\r\n   * @return {Howl/Boolean} Returns self or current loop value.\r\n   */\n\t\tloop: function loop() {\n\t\t\tvar self = this;\n\t\t\tvar args = arguments;\n\t\t\tvar loop, id, sound;\n\n\t\t\t// Determine the values for loop and id.\n\t\t\tif (args.length === 0) {\n\t\t\t\t// Return the grou's loop value.\n\t\t\t\treturn self._loop;\n\t\t\t} else if (args.length === 1) {\n\t\t\t\tif (typeof args[0] === 'boolean') {\n\t\t\t\t\tloop = args[0];\n\t\t\t\t\tself._loop = loop;\n\t\t\t\t} else {\n\t\t\t\t\t// Return this sound's loop value.\n\t\t\t\t\tsound = self._soundById(parseInt(args[0], 10));\n\t\t\t\t\treturn sound ? sound._loop : false;\n\t\t\t\t}\n\t\t\t} else if (args.length === 2) {\n\t\t\t\tloop = args[0];\n\t\t\t\tid = parseInt(args[1], 10);\n\t\t\t}\n\n\t\t\t// If no id is passed, get all ID's to be looped.\n\t\t\tvar ids = self._getSoundIds(id);\n\t\t\tfor (var i = 0; i < ids.length; i++) {\n\t\t\t\tsound = self._soundById(ids[i]);\n\n\t\t\t\tif (sound) {\n\t\t\t\t\tsound._loop = loop;\n\t\t\t\t\tif (self._webAudio && sound._node && sound._node.bufferSource) {\n\t\t\t\t\t\tsound._node.bufferSource.loop = loop;\n\t\t\t\t\t\tif (loop) {\n\t\t\t\t\t\t\tsound._node.bufferSource.loopStart = sound._start || 0;\n\t\t\t\t\t\t\tsound._node.bufferSource.loopEnd = sound._stop;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\r\n   *   rate() -> Returns the first sound node's current playback rate.\r\n   *   rate(id) -> Returns the sound id's current playback rate.\r\n   *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\r\n   *   rate(rate, id) -> Sets the playback rate of passed sound id.\r\n   * @return {Howl/Number} Returns self or the current playback rate.\r\n   */\n\t\trate: function rate() {\n\t\t\tvar self = this;\n\t\t\tvar args = arguments;\n\t\t\tvar rate, id;\n\n\t\t\t// Determine the values based on arguments.\n\t\t\tif (args.length === 0) {\n\t\t\t\t// We will simply return the current rate of the first node.\n\t\t\t\tid = self._sounds[0]._id;\n\t\t\t} else if (args.length === 1) {\n\t\t\t\t// First check if this is an ID, and if not, assume it is a new rate value.\n\t\t\t\tvar ids = self._getSoundIds();\n\t\t\t\tvar index = ids.indexOf(args[0]);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tid = parseInt(args[0], 10);\n\t\t\t\t} else {\n\t\t\t\t\trate = parseFloat(args[0]);\n\t\t\t\t}\n\t\t\t} else if (args.length === 2) {\n\t\t\t\trate = parseFloat(args[0]);\n\t\t\t\tid = parseInt(args[1], 10);\n\t\t\t}\n\n\t\t\t// Update the playback rate or return the current value.\n\t\t\tvar sound;\n\t\t\tif (typeof rate === 'number') {\n\t\t\t\t// If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n\t\t\t\tif (self._state !== 'loaded' || self._playLock) {\n\t\t\t\t\tself._queue.push({\n\t\t\t\t\t\tevent: 'rate',\n\t\t\t\t\t\taction: function action() {\n\t\t\t\t\t\t\tself.rate.apply(self, args);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn self;\n\t\t\t\t}\n\n\t\t\t\t// Set the group rate.\n\t\t\t\tif (typeof id === 'undefined') {\n\t\t\t\t\tself._rate = rate;\n\t\t\t\t}\n\n\t\t\t\t// Update one or all volumes.\n\t\t\t\tid = self._getSoundIds(id);\n\t\t\t\tfor (var i = 0; i < id.length; i++) {\n\t\t\t\t\t// Get the sound.\n\t\t\t\t\tsound = self._soundById(id[i]);\n\n\t\t\t\t\tif (sound) {\n\t\t\t\t\t\t// Keep track of our position when the rate changed and update the playback\n\t\t\t\t\t\t// start position so we can properly adjust the seek position for time elapsed.\n\t\t\t\t\t\tif (self.playing(id[i])) {\n\t\t\t\t\t\t\tsound._rateSeek = self.seek(id[i]);\n\t\t\t\t\t\t\tsound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsound._rate = rate;\n\n\t\t\t\t\t\t// Change the playback rate.\n\t\t\t\t\t\tif (self._webAudio && sound._node && sound._node.bufferSource) {\n\t\t\t\t\t\t\tsound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler.ctx.currentTime);\n\t\t\t\t\t\t} else if (sound._node) {\n\t\t\t\t\t\t\tsound._node.playbackRate = rate;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Reset the timers.\n\t\t\t\t\t\tvar seek = self.seek(id[i]);\n\t\t\t\t\t\tvar duration = (self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000 - seek;\n\t\t\t\t\t\tvar timeout = duration * 1000 / Math.abs(sound._rate);\n\n\t\t\t\t\t\t// Start a new end timer if sound is already playing.\n\t\t\t\t\t\tif (self._endTimers[id[i]] || !sound._paused) {\n\t\t\t\t\t\t\tself._clearTimer(id[i]);\n\t\t\t\t\t\t\tself._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tself._emit('rate', sound._id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsound = self._soundById(id);\n\t\t\t\treturn sound ? sound._rate : self._rate;\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\r\n   *   seek() -> Returns the first sound node's current seek position.\r\n   *   seek(id) -> Returns the sound id's current seek position.\r\n   *   seek(seek) -> Sets the seek position of the first sound node.\r\n   *   seek(seek, id) -> Sets the seek position of passed sound id.\r\n   * @return {Howl/Number} Returns self or the current seek position.\r\n   */\n\t\tseek: function seek() {\n\t\t\tvar self = this;\n\t\t\tvar args = arguments;\n\t\t\tvar seek, id;\n\n\t\t\t// Determine the values based on arguments.\n\t\t\tif (args.length === 0) {\n\t\t\t\t// We will simply return the current position of the first node.\n\t\t\t\tid = self._sounds[0]._id;\n\t\t\t} else if (args.length === 1) {\n\t\t\t\t// First check if this is an ID, and if not, assume it is a new seek position.\n\t\t\t\tvar ids = self._getSoundIds();\n\t\t\t\tvar index = ids.indexOf(args[0]);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tid = parseInt(args[0], 10);\n\t\t\t\t} else if (self._sounds.length) {\n\t\t\t\t\tid = self._sounds[0]._id;\n\t\t\t\t\tseek = parseFloat(args[0]);\n\t\t\t\t}\n\t\t\t} else if (args.length === 2) {\n\t\t\t\tseek = parseFloat(args[0]);\n\t\t\t\tid = parseInt(args[1], 10);\n\t\t\t}\n\n\t\t\t// If there is no ID, bail out.\n\t\t\tif (typeof id === 'undefined') {\n\t\t\t\treturn self;\n\t\t\t}\n\n\t\t\t// If the sound hasn't loaded, add it to the load queue to seek when capable.\n\t\t\tif (self._state !== 'loaded' || self._playLock) {\n\t\t\t\tself._queue.push({\n\t\t\t\t\tevent: 'seek',\n\t\t\t\t\taction: function action() {\n\t\t\t\t\t\tself.seek.apply(self, args);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn self;\n\t\t\t}\n\n\t\t\t// Get the sound.\n\t\t\tvar sound = self._soundById(id);\n\n\t\t\tif (sound) {\n\t\t\t\tif (typeof seek === 'number' && seek >= 0) {\n\t\t\t\t\t// Pause the sound and update position for restarting playback.\n\t\t\t\t\tvar playing = self.playing(id);\n\t\t\t\t\tif (playing) {\n\t\t\t\t\t\tself.pause(id, true);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Move the position of the track and cancel timer.\n\t\t\t\t\tsound._seek = seek;\n\t\t\t\t\tsound._ended = false;\n\t\t\t\t\tself._clearTimer(id);\n\n\t\t\t\t\t// Update the seek position for HTML5 Audio.\n\t\t\t\t\tif (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {\n\t\t\t\t\t\tsound._node.currentTime = seek;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Seek and emit when ready.\n\t\t\t\t\tvar seekAndEmit = function seekAndEmit() {\n\t\t\t\t\t\tself._emit('seek', id);\n\n\t\t\t\t\t\t// Restart the playback if the sound was playing.\n\t\t\t\t\t\tif (playing) {\n\t\t\t\t\t\t\tself.play(id, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Wait for the play lock to be unset before emitting (HTML5 Audio).\n\t\t\t\t\tif (playing && !self._webAudio) {\n\t\t\t\t\t\tvar emitSeek = function emitSeek() {\n\t\t\t\t\t\t\tif (!self._playLock) {\n\t\t\t\t\t\t\t\tseekAndEmit();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetTimeout(emitSeek, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tsetTimeout(emitSeek, 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseekAndEmit();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (self._webAudio) {\n\t\t\t\t\t\tvar realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n\t\t\t\t\t\tvar rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n\t\t\t\t\t\treturn sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn sound._node.currentTime;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\r\n   * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\r\n   * @return {Boolean} True if playing and false if not.\r\n   */\n\t\tplaying: function playing(id) {\n\t\t\tvar self = this;\n\n\t\t\t// Check the passed sound ID (if any).\n\t\t\tif (typeof id === 'number') {\n\t\t\t\tvar sound = self._soundById(id);\n\t\t\t\treturn sound ? !sound._paused : false;\n\t\t\t}\n\n\t\t\t// Otherwise, loop through all sounds and check if any are playing.\n\t\t\tfor (var i = 0; i < self._sounds.length; i++) {\n\t\t\t\tif (!self._sounds[i]._paused) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t/**\r\n   * Get the duration of this sound. Passing a sound id will return the sprite duration.\r\n   * @param  {Number} id The sound id to check. If none is passed, return full source duration.\r\n   * @return {Number} Audio duration in seconds.\r\n   */\n\t\tduration: function duration(id) {\n\t\t\tvar self = this;\n\t\t\tvar duration = self._duration;\n\n\t\t\t// If we pass an ID, get the sound and return the sprite length.\n\t\t\tvar sound = self._soundById(id);\n\t\t\tif (sound) {\n\t\t\t\tduration = self._sprite[sound._sprite][1] / 1000;\n\t\t\t}\n\n\t\t\treturn duration;\n\t\t},\n\n\t\t/**\r\n   * Returns the current loaded state of this Howl.\r\n   * @return {String} 'unloaded', 'loading', 'loaded'\r\n   */\n\t\tstate: function state() {\n\t\t\treturn this._state;\n\t\t},\n\n\t\t/**\r\n   * Unload and destroy the current Howl object.\r\n   * This will immediately stop all sound instances attached to this group.\r\n   */\n\t\tunload: function unload() {\n\t\t\tvar self = this;\n\n\t\t\t// Stop playing any active sounds.\n\t\t\tvar sounds = self._sounds;\n\t\t\tfor (var i = 0; i < sounds.length; i++) {\n\t\t\t\t// Stop the sound if it is currently playing.\n\t\t\t\tif (!sounds[i]._paused) {\n\t\t\t\t\tself.stop(sounds[i]._id);\n\t\t\t\t}\n\n\t\t\t\t// Remove the source or disconnect.\n\t\t\t\tif (!self._webAudio) {\n\t\t\t\t\t// Set the source to 0-second silence to stop any downloading (except in IE).\n\t\t\t\t\tvar checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n\t\t\t\t\tif (!checkIE) {\n\t\t\t\t\t\tsounds[i]._node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remove any event listeners.\n\t\t\t\t\tsounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n\t\t\t\t\tsounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n\n\t\t\t\t\t// Release the Audio object back to the pool.\n\t\t\t\t\tHowler._releaseHtml5Audio(sounds[i]._node);\n\t\t\t\t}\n\n\t\t\t\t// Empty out all of the nodes.\n\t\t\t\tdelete sounds[i]._node;\n\n\t\t\t\t// Make sure all timers are cleared out.\n\t\t\t\tself._clearTimer(sounds[i]._id);\n\t\t\t}\n\n\t\t\t// Remove the references in the global Howler object.\n\t\t\tvar index = Howler._howls.indexOf(self);\n\t\t\tif (index >= 0) {\n\t\t\t\tHowler._howls.splice(index, 1);\n\t\t\t}\n\n\t\t\t// Delete this sound from the cache (if no other Howl is using it).\n\t\t\tvar remCache = true;\n\t\t\tfor (i = 0; i < Howler._howls.length; i++) {\n\t\t\t\tif (Howler._howls[i]._src === self._src || self._src.indexOf(Howler._howls[i]._src) >= 0) {\n\t\t\t\t\tremCache = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cache && remCache) {\n\t\t\t\tdelete cache[self._src];\n\t\t\t}\n\n\t\t\t// Clear global errors.\n\t\t\tHowler.noAudio = false;\n\n\t\t\t// Clear out `self`.\n\t\t\tself._state = 'unloaded';\n\t\t\tself._sounds = [];\n\t\t\tself = null;\n\n\t\t\treturn null;\n\t\t},\n\n\t\t/**\r\n   * Listen to a custom event.\r\n   * @param  {String}   event Event name.\r\n   * @param  {Function} fn    Listener to call.\r\n   * @param  {Number}   id    (optional) Only listen to events for this sound.\r\n   * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\r\n   * @return {Howl}\r\n   */\n\t\ton: function on(event, fn, id, once) {\n\t\t\tvar self = this;\n\t\t\tvar events = self['_on' + event];\n\n\t\t\tif (typeof fn === 'function') {\n\t\t\t\tevents.push(once ? {\n\t\t\t\t\tid: id,\n\t\t\t\t\tfn: fn,\n\t\t\t\t\tonce: once\n\t\t\t\t} : {\n\t\t\t\t\tid: id,\n\t\t\t\t\tfn: fn\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Remove a custom event. Call without parameters to remove all events.\r\n   * @param  {String}   event Event name.\r\n   * @param  {Function} fn    Listener to remove. Leave empty to remove all.\r\n   * @param  {Number}   id    (optional) Only remove events for this sound.\r\n   * @return {Howl}\r\n   */\n\t\toff: function off(event, fn, id) {\n\t\t\tvar self = this;\n\t\t\tvar events = self['_on' + event];\n\t\t\tvar i = 0;\n\n\t\t\t// Allow passing just an event and ID.\n\t\t\tif (typeof fn === 'number') {\n\t\t\t\tid = fn;\n\t\t\t\tfn = null;\n\t\t\t}\n\n\t\t\tif (fn || id) {\n\t\t\t\t// Loop through event store and remove the passed function.\n\t\t\t\tfor (i = 0; i < events.length; i++) {\n\t\t\t\t\tvar isId = id === events[i].id;\n\t\t\t\t\tif (fn === events[i].fn && isId || !fn && isId) {\n\t\t\t\t\t\tevents.splice(i, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (event) {\n\t\t\t\t// Clear out all events of this type.\n\t\t\t\tself['_on' + event] = [];\n\t\t\t} else {\n\t\t\t\t// Clear out all events of every type.\n\t\t\t\tvar keys = Object.keys(self);\n\t\t\t\tfor (i = 0; i < keys.length; i++) {\n\t\t\t\t\tif (keys[i].indexOf('_on') === 0 && Array.isArray(self[keys[i]])) {\n\t\t\t\t\t\tself[keys[i]] = [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Listen to a custom event and remove it once fired.\r\n   * @param  {String}   event Event name.\r\n   * @param  {Function} fn    Listener to call.\r\n   * @param  {Number}   id    (optional) Only listen to events for this sound.\r\n   * @return {Howl}\r\n   */\n\t\tonce: function once(event, fn, id) {\n\t\t\tvar self = this;\n\n\t\t\t// Setup the event listener.\n\t\t\tself.on(event, fn, id, 1);\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Emit all events of a specific type and pass the sound id.\r\n   * @param  {String} event Event name.\r\n   * @param  {Number} id    Sound ID.\r\n   * @param  {Number} msg   Message to go with event.\r\n   * @return {Howl}\r\n   */\n\t\t_emit: function _emit(event, id, msg) {\n\t\t\tvar self = this;\n\t\t\tvar events = self['_on' + event];\n\n\t\t\t// Loop through event store and fire all functions.\n\t\t\tfor (var i = events.length - 1; i >= 0; i--) {\n\t\t\t\t// Only fire the listener if the correct ID is used.\n\t\t\t\tif (!events[i].id || events[i].id === id || event === 'load') {\n\t\t\t\t\tsetTimeout(function (fn) {\n\t\t\t\t\t\tfn.call(this, id, msg);\n\t\t\t\t\t}.bind(self, events[i].fn), 0);\n\n\t\t\t\t\t// If this event was setup with `once`, remove it.\n\t\t\t\t\tif (events[i].once) {\n\t\t\t\t\t\tself.off(event, events[i].fn, events[i].id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Pass the event type into load queue so that it can continue stepping.\n\t\t\tself._loadQueue(event);\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Queue of actions initiated before the sound has loaded.\r\n   * These will be called in sequence, with the next only firing\r\n   * after the previous has finished executing (even if async like play).\r\n   * @return {Howl}\r\n   */\n\t\t_loadQueue: function _loadQueue(event) {\n\t\t\tvar self = this;\n\n\t\t\tif (self._queue.length > 0) {\n\t\t\t\tvar task = self._queue[0];\n\n\t\t\t\t// Remove this task if a matching event was passed.\n\t\t\t\tif (task.event === event) {\n\t\t\t\t\tself._queue.shift();\n\t\t\t\t\tself._loadQueue();\n\t\t\t\t}\n\n\t\t\t\t// Run the task if no event type is passed.\n\t\t\t\tif (!event) {\n\t\t\t\t\ttask.action();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Fired when playback ends at the end of the duration.\r\n   * @param  {Sound} sound The sound object to work with.\r\n   * @return {Howl}\r\n   */\n\t\t_ended: function _ended(sound) {\n\t\t\tvar self = this;\n\t\t\tvar sprite = sound._sprite;\n\n\t\t\t// If we are using IE and there was network latency we may be clipping\n\t\t\t// audio before it completes playing. Lets check the node to make sure it\n\t\t\t// believes it has completed, before ending the playback.\n\t\t\tif (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {\n\t\t\t\tsetTimeout(self._ended.bind(self, sound), 100);\n\t\t\t\treturn self;\n\t\t\t}\n\n\t\t\t// Should this sound loop?\n\t\t\tvar loop = !!(sound._loop || self._sprite[sprite][2]);\n\n\t\t\t// Fire the ended event.\n\t\t\tself._emit('end', sound._id);\n\n\t\t\t// Restart the playback for HTML5 Audio loop.\n\t\t\tif (!self._webAudio && loop) {\n\t\t\t\tself.stop(sound._id, true).play(sound._id);\n\t\t\t}\n\n\t\t\t// Restart this timer if on a Web Audio loop.\n\t\t\tif (self._webAudio && loop) {\n\t\t\t\tself._emit('play', sound._id);\n\t\t\t\tsound._seek = sound._start || 0;\n\t\t\t\tsound._rateSeek = 0;\n\t\t\t\tsound._playStart = Howler.ctx.currentTime;\n\n\t\t\t\tvar timeout = (sound._stop - sound._start) * 1000 / Math.abs(sound._rate);\n\t\t\t\tself._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n\t\t\t}\n\n\t\t\t// Mark the node as paused.\n\t\t\tif (self._webAudio && !loop) {\n\t\t\t\tsound._paused = true;\n\t\t\t\tsound._ended = true;\n\t\t\t\tsound._seek = sound._start || 0;\n\t\t\t\tsound._rateSeek = 0;\n\t\t\t\tself._clearTimer(sound._id);\n\n\t\t\t\t// Clean up the buffer source.\n\t\t\t\tself._cleanBuffer(sound._node);\n\n\t\t\t\t// Attempt to auto-suspend AudioContext if no sounds are still playing.\n\t\t\t\tHowler._autoSuspend();\n\t\t\t}\n\n\t\t\t// When using a sprite, end the track.\n\t\t\tif (!self._webAudio && !loop) {\n\t\t\t\tself.stop(sound._id, true);\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Clear the end timer for a sound playback.\r\n   * @param  {Number} id The sound ID.\r\n   * @return {Howl}\r\n   */\n\t\t_clearTimer: function _clearTimer(id) {\n\t\t\tvar self = this;\n\n\t\t\tif (self._endTimers[id]) {\n\t\t\t\t// Clear the timeout or remove the ended listener.\n\t\t\t\tif (typeof self._endTimers[id] !== 'function') {\n\t\t\t\t\tclearTimeout(self._endTimers[id]);\n\t\t\t\t} else {\n\t\t\t\t\tvar sound = self._soundById(id);\n\t\t\t\t\tif (sound && sound._node) {\n\t\t\t\t\t\tsound._node.removeEventListener('ended', self._endTimers[id], false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdelete self._endTimers[id];\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Return the sound identified by this ID, or return null.\r\n   * @param  {Number} id Sound ID\r\n   * @return {Object}    Sound object or null.\r\n   */\n\t\t_soundById: function _soundById(id) {\n\t\t\tvar self = this;\n\n\t\t\t// Loop through all sounds and find the one with this ID.\n\t\t\tfor (var i = 0; i < self._sounds.length; i++) {\n\t\t\t\tif (id === self._sounds[i]._id) {\n\t\t\t\t\treturn self._sounds[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\t/**\r\n   * Return an inactive sound from the pool or create a new one.\r\n   * @return {Sound} Sound playback object.\r\n   */\n\t\t_inactiveSound: function _inactiveSound() {\n\t\t\tvar self = this;\n\n\t\t\tself._drain();\n\n\t\t\t// Find the first inactive node to recycle.\n\t\t\tfor (var i = 0; i < self._sounds.length; i++) {\n\t\t\t\tif (self._sounds[i]._ended) {\n\t\t\t\t\treturn self._sounds[i].reset();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If no inactive node was found, create a new one.\n\t\t\treturn new Sound(self);\n\t\t},\n\n\t\t/**\r\n   * Drain excess inactive sounds from the pool.\r\n   */\n\t\t_drain: function _drain() {\n\t\t\tvar self = this;\n\t\t\tvar limit = self._pool;\n\t\t\tvar cnt = 0;\n\t\t\tvar i = 0;\n\n\t\t\t// If there are less sounds than the max pool size, we are done.\n\t\t\tif (self._sounds.length < limit) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Count the number of inactive sounds.\n\t\t\tfor (i = 0; i < self._sounds.length; i++) {\n\t\t\t\tif (self._sounds[i]._ended) {\n\t\t\t\t\tcnt++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove excess inactive sounds, going in reverse order.\n\t\t\tfor (i = self._sounds.length - 1; i >= 0; i--) {\n\t\t\t\tif (cnt <= limit) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (self._sounds[i]._ended) {\n\t\t\t\t\t// Disconnect the audio source when using Web Audio.\n\t\t\t\t\tif (self._webAudio && self._sounds[i]._node) {\n\t\t\t\t\t\tself._sounds[i]._node.disconnect(0);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remove sounds until we have the pool size.\n\t\t\t\t\tself._sounds.splice(i, 1);\n\t\t\t\t\tcnt--;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\r\n   * Get all ID's from the sounds pool.\r\n   * @param  {Number} id Only return one ID if one is passed.\r\n   * @return {Array}    Array of IDs.\r\n   */\n\t\t_getSoundIds: function _getSoundIds(id) {\n\t\t\tvar self = this;\n\n\t\t\tif (typeof id === 'undefined') {\n\t\t\t\tvar ids = [];\n\t\t\t\tfor (var i = 0; i < self._sounds.length; i++) {\n\t\t\t\t\tids.push(self._sounds[i]._id);\n\t\t\t\t}\n\n\t\t\t\treturn ids;\n\t\t\t} else {\n\t\t\t\treturn [id];\n\t\t\t}\n\t\t},\n\n\t\t/**\r\n   * Load the sound back into the buffer source.\r\n   * @param  {Sound} sound The sound object to work with.\r\n   * @return {Howl}\r\n   */\n\t\t_refreshBuffer: function _refreshBuffer(sound) {\n\t\t\tvar self = this;\n\n\t\t\t// Setup the buffer source for playback.\n\t\t\tsound._node.bufferSource = Howler.ctx.createBufferSource();\n\t\t\tsound._node.bufferSource.buffer = cache[self._src];\n\n\t\t\t// Connect to the correct node.\n\t\t\tif (sound._panner) {\n\t\t\t\tsound._node.bufferSource.connect(sound._panner);\n\t\t\t} else {\n\t\t\t\tsound._node.bufferSource.connect(sound._node);\n\t\t\t}\n\n\t\t\t// Setup looping and playback rate.\n\t\t\tsound._node.bufferSource.loop = sound._loop;\n\t\t\tif (sound._loop) {\n\t\t\t\tsound._node.bufferSource.loopStart = sound._start || 0;\n\t\t\t\tsound._node.bufferSource.loopEnd = sound._stop || 0;\n\t\t\t}\n\t\t\tsound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler.ctx.currentTime);\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Prevent memory leaks by cleaning up the buffer source after playback.\r\n   * @param  {Object} node Sound's audio node containing the buffer source.\r\n   * @return {Howl}\r\n   */\n\t\t_cleanBuffer: function _cleanBuffer(node) {\n\t\t\tvar self = this;\n\t\t\tvar isIOS = Howler._navigator && Howler._navigator.vendor.indexOf('Apple') >= 0;\n\n\t\t\tif (Howler._scratchBuffer && node.bufferSource) {\n\t\t\t\tnode.bufferSource.onended = null;\n\t\t\t\tnode.bufferSource.disconnect(0);\n\t\t\t\tif (isIOS) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tnode.bufferSource.buffer = Howler._scratchBuffer;\n\t\t\t\t\t} catch (e) {}\n\t\t\t\t}\n\t\t\t}\n\t\t\tnode.bufferSource = null;\n\n\t\t\treturn self;\n\t\t}\n\t};\n\n\t/** Single Sound Methods **/\n\t/***************************************************************************/\n\n\t/**\r\n  * Setup the sound object, which each node attached to a Howl group is contained in.\r\n  * @param {Object} howl The Howl parent group.\r\n  */\n\tvar Sound = function Sound(howl) {\n\t\tthis._parent = howl;\n\t\tthis.init();\n\t};\n\tSound.prototype = {\n\t\t/**\r\n   * Initialize a new Sound object.\r\n   * @return {Sound}\r\n   */\n\t\tinit: function init() {\n\t\t\tvar self = this;\n\t\t\tvar parent = self._parent;\n\n\t\t\t// Setup the default parameters.\n\t\t\tself._muted = parent._muted;\n\t\t\tself._loop = parent._loop;\n\t\t\tself._volume = parent._volume;\n\t\t\tself._rate = parent._rate;\n\t\t\tself._seek = 0;\n\t\t\tself._paused = true;\n\t\t\tself._ended = true;\n\t\t\tself._sprite = '__default';\n\n\t\t\t// Generate a unique ID for this sound.\n\t\t\tself._id = ++Howler._counter;\n\n\t\t\t// Add itself to the parent's pool.\n\t\t\tparent._sounds.push(self);\n\n\t\t\t// Create the new node.\n\t\t\tself.create();\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\r\n   * @return {Sound}\r\n   */\n\t\tcreate: function create() {\n\t\t\tvar self = this;\n\t\t\tvar parent = self._parent;\n\t\t\tvar volume = Howler._muted || self._muted || self._parent._muted ? 0 : self._volume;\n\n\t\t\tif (parent._webAudio) {\n\t\t\t\t// Create the gain node for controlling volume (the source will connect to this).\n\t\t\t\tself._node = typeof Howler.ctx.createGain === 'undefined' ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n\t\t\t\tself._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n\t\t\t\tself._node.paused = true;\n\t\t\t\tself._node.connect(Howler.masterGain);\n\t\t\t} else {\n\t\t\t\t// Get an unlocked Audio object from the pool.\n\t\t\t\tself._node = Howler._obtainHtml5Audio();\n\n\t\t\t\t// Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n\t\t\t\tself._errorFn = self._errorListener.bind(self);\n\t\t\t\tself._node.addEventListener('error', self._errorFn, false);\n\n\t\t\t\t// Listen for 'canplaythrough' event to let us know the sound is ready.\n\t\t\t\tself._loadFn = self._loadListener.bind(self);\n\t\t\t\tself._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n\t\t\t\t// Setup the new audio node.\n\t\t\t\tself._node.src = parent._src;\n\t\t\t\tself._node.preload = 'auto';\n\t\t\t\tself._node.volume = volume * Howler.volume();\n\n\t\t\t\t// Begin loading the source.\n\t\t\t\tself._node.load();\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * Reset the parameters of this sound to the original state (for recycle).\r\n   * @return {Sound}\r\n   */\n\t\treset: function reset() {\n\t\t\tvar self = this;\n\t\t\tvar parent = self._parent;\n\n\t\t\t// Reset all of the parameters of this sound.\n\t\t\tself._muted = parent._muted;\n\t\t\tself._loop = parent._loop;\n\t\t\tself._volume = parent._volume;\n\t\t\tself._rate = parent._rate;\n\t\t\tself._seek = 0;\n\t\t\tself._rateSeek = 0;\n\t\t\tself._paused = true;\n\t\t\tself._ended = true;\n\t\t\tself._sprite = '__default';\n\n\t\t\t// Generate a new ID so that it isn't confused with the previous sound.\n\t\t\tself._id = ++Howler._counter;\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\r\n   * HTML5 Audio error listener callback.\r\n   */\n\t\t_errorListener: function _errorListener() {\n\t\t\tvar self = this;\n\n\t\t\t// Fire an error event and pass back the code.\n\t\t\tself._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n\t\t\t// Clear the event listener.\n\t\t\tself._node.removeEventListener('error', self._errorFn, false);\n\t\t},\n\n\t\t/**\r\n   * HTML5 Audio canplaythrough listener callback.\r\n   */\n\t\t_loadListener: function _loadListener() {\n\t\t\tvar self = this;\n\t\t\tvar parent = self._parent;\n\n\t\t\t// Round up the duration to account for the lower precision in HTML5 Audio.\n\t\t\tparent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n\t\t\t// Setup a sprite if none is defined.\n\t\t\tif (Object.keys(parent._sprite).length === 0) {\n\t\t\t\tparent._sprite = {\n\t\t\t\t\t__default: [0, parent._duration * 1000]\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (parent._state !== 'loaded') {\n\t\t\t\tparent._state = 'loaded';\n\t\t\t\tparent._emit('load');\n\t\t\t\tparent._loadQueue();\n\t\t\t}\n\n\t\t\t// Clear the event listener.\n\t\t\tself._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n\t\t}\n\t};\n\n\t/** Helper Methods **/\n\t/***************************************************************************/\n\n\tvar cache = {};\n\n\t/**\r\n  * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\r\n  * @param  {Howl} self\r\n  */\n\tvar loadBuffer = function loadBuffer(self) {\n\t\tvar url = self._src;\n\n\t\t// Check if the buffer has already been cached and use it instead.\n\t\tif (cache[url]) {\n\t\t\t// Set the duration from the cache.\n\t\t\tself._duration = cache[url].duration;\n\n\t\t\t// Load the sound into this Howl.\n\t\t\tloadSound(self);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (/^data:[^;]+;base64,/.test(url)) {\n\t\t\t// Decode the base64 data URI without XHR, since some browsers don't support it.\n\t\t\tvar data = atob(url.split(',')[1]);\n\t\t\tvar dataView = new Uint8Array(data.length);\n\t\t\tfor (var i = 0; i < data.length; ++i) {\n\t\t\t\tdataView[i] = data.charCodeAt(i);\n\t\t\t}\n\n\t\t\tdecodeAudioData(dataView.buffer, self);\n\t\t} else {\n\t\t\t// Load the buffer from the URL.\n\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\txhr.open('GET', url, true);\n\t\t\txhr.withCredentials = self._xhrWithCredentials;\n\t\t\txhr.responseType = 'arraybuffer';\n\t\t\txhr.onload = function () {\n\t\t\t\t// Make sure we get a successful response back.\n\t\t\t\tvar code = (xhr.status + '')[0];\n\t\t\t\tif (code !== '0' && code !== '2' && code !== '3') {\n\t\t\t\t\tself._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdecodeAudioData(xhr.response, self);\n\t\t\t};\n\t\t\txhr.onerror = function () {\n\t\t\t\t// If there is an error, switch to HTML5 Audio.\n\t\t\t\tif (self._webAudio) {\n\t\t\t\t\tself._html5 = true;\n\t\t\t\t\tself._webAudio = false;\n\t\t\t\t\tself._sounds = [];\n\t\t\t\t\tdelete cache[url];\n\t\t\t\t\tself.load();\n\t\t\t\t}\n\t\t\t};\n\t\t\tsafeXhrSend(xhr);\n\t\t}\n\t};\n\n\t/**\r\n  * Send the XHR request wrapped in a try/catch.\r\n  * @param  {Object} xhr XHR to send.\r\n  */\n\tvar safeXhrSend = function safeXhrSend(xhr) {\n\t\ttry {\n\t\t\txhr.send();\n\t\t} catch (e) {\n\t\t\txhr.onerror();\n\t\t}\n\t};\n\n\t/**\r\n  * Decode audio data from an array buffer.\r\n  * @param  {ArrayBuffer} arraybuffer The audio data.\r\n  * @param  {Howl}        self\r\n  */\n\tvar decodeAudioData = function decodeAudioData(arraybuffer, self) {\n\t\t// Fire a load error if something broke.\n\t\tvar error = function error() {\n\t\t\tself._emit('loaderror', null, 'Decoding audio data failed.');\n\t\t};\n\n\t\t// Load the sound on success.\n\t\tvar success = function success(buffer) {\n\t\t\tif (buffer && self._sounds.length > 0) {\n\t\t\t\tcache[self._src] = buffer;\n\t\t\t\tloadSound(self, buffer);\n\t\t\t} else {\n\t\t\t\terror();\n\t\t\t}\n\t\t};\n\n\t\t// Decode the buffer into an audio source.\n\t\tif (typeof Promise !== 'undefined' && Howler.ctx.decodeAudioData.length === 1) {\n\t\t\tHowler.ctx.decodeAudioData(arraybuffer).then(success).catch(error);\n\t\t} else {\n\t\t\tHowler.ctx.decodeAudioData(arraybuffer, success, error);\n\t\t}\n\t};\n\n\t/**\r\n  * Sound is now loaded, so finish setting everything up and fire the loaded event.\r\n  * @param  {Howl} self\r\n  * @param  {Object} buffer The decoded buffer sound source.\r\n  */\n\tvar loadSound = function loadSound(self, buffer) {\n\t\t// Set the duration.\n\t\tif (buffer && !self._duration) {\n\t\t\tself._duration = buffer.duration;\n\t\t}\n\n\t\t// Setup a sprite if none is defined.\n\t\tif (Object.keys(self._sprite).length === 0) {\n\t\t\tself._sprite = {\n\t\t\t\t__default: [0, self._duration * 1000]\n\t\t\t};\n\t\t}\n\n\t\t// Fire the loaded event.\n\t\tif (self._state !== 'loaded') {\n\t\t\tself._state = 'loaded';\n\t\t\tself._emit('load');\n\t\t\tself._loadQueue();\n\t\t}\n\t};\n\n\t/**\r\n  * Setup the audio context when available, or switch to HTML5 Audio mode.\r\n  */\n\tvar setupAudioContext = function setupAudioContext() {\n\t\t// If we have already detected that Web Audio isn't supported, don't run this step again.\n\t\tif (!Howler.usingWebAudio) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if we are using Web Audio and setup the AudioContext if we are.\n\t\ttry {\n\t\t\tif (typeof AudioContext !== 'undefined') {\n\t\t\t\tHowler.ctx = new AudioContext();\n\t\t\t} else if (typeof webkitAudioContext !== 'undefined') {\n\t\t\t\tHowler.ctx = new webkitAudioContext();\n\t\t\t} else {\n\t\t\t\tHowler.usingWebAudio = false;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tHowler.usingWebAudio = false;\n\t\t}\n\n\t\t// If the audio context creation still failed, set using web audio to false.\n\t\tif (!Howler.ctx) {\n\t\t\tHowler.usingWebAudio = false;\n\t\t}\n\n\t\t// Check if a webview is being used on iOS8 or earlier (rather than the browser).\n\t\t// If it is, disable Web Audio as it causes crashing.\n\t\tvar iOS = /iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform);\n\t\tvar appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n\t\tvar version = appVersion ? parseInt(appVersion[1], 10) : null;\n\t\tif (iOS && version && version < 9) {\n\t\t\tvar safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n\t\t\tif (Howler._navigator && Howler._navigator.standalone && !safari || Howler._navigator && !Howler._navigator.standalone && !safari) {\n\t\t\t\tHowler.usingWebAudio = false;\n\t\t\t}\n\t\t}\n\n\t\t// Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n\t\tif (Howler.usingWebAudio) {\n\t\t\tHowler.masterGain = typeof Howler.ctx.createGain === 'undefined' ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n\t\t\tHowler.masterGain.gain.setValueAtTime(Howler._muted ? 0 : 1, Howler.ctx.currentTime);\n\t\t\tHowler.masterGain.connect(Howler.ctx.destination);\n\t\t}\n\n\t\t// Re-run the setup on Howler.\n\t\tHowler._setup();\n\t};\n\n\t// Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n\tif (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n\t\t\treturn {\n\t\t\t\tHowler: Howler,\n\t\t\t\tHowl: Howl\n\t\t\t};\n\t\t}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t}\n\n\t// Add support for CommonJS libraries such as browserify.\n\tif (true) {\n\t\texports.Howler = Howler;\n\t\texports.Howl = Howl;\n\t}\n\n\t// Define globally in case AMD is not available or unused.\n\tif (typeof window !== 'undefined') {\n\t\twindow.HowlerGlobal = HowlerGlobal;\n\t\twindow.Howler = Howler;\n\t\twindow.Howl = Howl;\n\t\twindow.Sound = Sound;\n\t} else if (typeof global !== 'undefined') {\n\t\t// Add to global in Node.js (for testing, etc).\n\t\tglobal.HowlerGlobal = HowlerGlobal;\n\t\tglobal.Howler = Howler;\n\t\tglobal.Howl = Howl;\n\t\tglobal.Sound = Sound;\n\t}\n})();\n\n/*!\r\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\r\n *  \r\n *  howler.js v2.1.1\r\n *  howlerjs.com\r\n *\r\n *  (c) 2013-2018, James Simpson of GoldFire Studios\r\n *  goldfirestudios.com\r\n *\r\n *  MIT License\r\n */\n\n(function () {\n\n\t'use strict';\n\n\t// Setup default properties.\n\n\tHowlerGlobal.prototype._pos = [0, 0, 0];\n\tHowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n\n\t/** Global Methods **/\n\t/***************************************************************************/\n\n\t/**\r\n  * Helper method to update the stereo panning position of all current Howls.\r\n  * Future Howls will not use this value unless explicitly set.\r\n  * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\r\n  * @return {Howler/Number}     Self or current stereo panning value.\r\n  */\n\tHowlerGlobal.prototype.stereo = function (pan) {\n\t\tvar self = this;\n\n\t\t// Stop right here if not using Web Audio.\n\t\tif (!self.ctx || !self.ctx.listener) {\n\t\t\treturn self;\n\t\t}\n\n\t\t// Loop through all Howls and update their stereo panning.\n\t\tfor (var i = self._howls.length - 1; i >= 0; i--) {\n\t\t\tself._howls[i].stereo(pan);\n\t\t}\n\n\t\treturn self;\n\t};\n\n\t/**\r\n  * Get/set the position of the listener in 3D cartesian space. Sounds using\r\n  * 3D position will be relative to the listener's position.\r\n  * @param  {Number} x The x-position of the listener.\r\n  * @param  {Number} y The y-position of the listener.\r\n  * @param  {Number} z The z-position of the listener.\r\n  * @return {Howler/Array}   Self or current listener position.\r\n  */\n\tHowlerGlobal.prototype.pos = function (x, y, z) {\n\t\tvar self = this;\n\n\t\t// Stop right here if not using Web Audio.\n\t\tif (!self.ctx || !self.ctx.listener) {\n\t\t\treturn self;\n\t\t}\n\n\t\t// Set the defaults for optional 'y' & 'z'.\n\t\ty = typeof y !== 'number' ? self._pos[1] : y;\n\t\tz = typeof z !== 'number' ? self._pos[2] : z;\n\n\t\tif (typeof x === 'number') {\n\t\t\tself._pos = [x, y, z];\n\n\t\t\tif (typeof self.ctx.listener.positionX !== 'undefined') {\n\t\t\t\tself.ctx.listener.positionX.setTargetAtTime(self._pos[0], Howler.ctx.currentTime, 0.1);\n\t\t\t\tself.ctx.listener.positionY.setTargetAtTime(self._pos[1], Howler.ctx.currentTime, 0.1);\n\t\t\t\tself.ctx.listener.positionZ.setTargetAtTime(self._pos[2], Howler.ctx.currentTime, 0.1);\n\t\t\t} else {\n\t\t\t\tself.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n\t\t\t}\n\t\t} else {\n\t\t\treturn self._pos;\n\t\t}\n\n\t\treturn self;\n\t};\n\n\t/**\r\n  * Get/set the direction the listener is pointing in the 3D cartesian space.\r\n  * A front and up vector must be provided. The front is the direction the\r\n  * face of the listener is pointing, and up is the direction the top of the\r\n  * listener is pointing. Thus, these values are expected to be at right angles\r\n  * from each other.\r\n  * @param  {Number} x   The x-orientation of the listener.\r\n  * @param  {Number} y   The y-orientation of the listener.\r\n  * @param  {Number} z   The z-orientation of the listener.\r\n  * @param  {Number} xUp The x-orientation of the top of the listener.\r\n  * @param  {Number} yUp The y-orientation of the top of the listener.\r\n  * @param  {Number} zUp The z-orientation of the top of the listener.\r\n  * @return {Howler/Array}     Returns self or the current orientation vectors.\r\n  */\n\tHowlerGlobal.prototype.orientation = function (x, y, z, xUp, yUp, zUp) {\n\t\tvar self = this;\n\n\t\t// Stop right here if not using Web Audio.\n\t\tif (!self.ctx || !self.ctx.listener) {\n\t\t\treturn self;\n\t\t}\n\n\t\t// Set the defaults for optional 'y' & 'z'.\n\t\tvar or = self._orientation;\n\t\ty = typeof y !== 'number' ? or[1] : y;\n\t\tz = typeof z !== 'number' ? or[2] : z;\n\t\txUp = typeof xUp !== 'number' ? or[3] : xUp;\n\t\tyUp = typeof yUp !== 'number' ? or[4] : yUp;\n\t\tzUp = typeof zUp !== 'number' ? or[5] : zUp;\n\n\t\tif (typeof x === 'number') {\n\t\t\tself._orientation = [x, y, z, xUp, yUp, zUp];\n\n\t\t\tif (typeof self.ctx.listener.forwardX !== 'undefined') {\n\t\t\t\tself.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);\n\t\t\t\tself.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);\n\t\t\t\tself.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);\n\t\t\t\tself.ctx.listener.upX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);\n\t\t\t\tself.ctx.listener.upY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);\n\t\t\t\tself.ctx.listener.upZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);\n\t\t\t} else {\n\t\t\t\tself.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n\t\t\t}\n\t\t} else {\n\t\t\treturn or;\n\t\t}\n\n\t\treturn self;\n\t};\n\n\t/** Group Methods **/\n\t/***************************************************************************/\n\n\t/**\r\n  * Add new properties to the core init.\r\n  * @param  {Function} _super Core init method.\r\n  * @return {Howl}\r\n  */\n\tHowl.prototype.init = function (_super) {\n\t\treturn function (o) {\n\t\t\tvar self = this;\n\n\t\t\t// Setup user-defined default properties.\n\t\t\tself._orientation = o.orientation || [1, 0, 0];\n\t\t\tself._stereo = o.stereo || null;\n\t\t\tself._pos = o.pos || null;\n\t\t\tself._pannerAttr = {\n\t\t\t\tconeInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n\t\t\t\tconeOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n\t\t\t\tconeOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n\t\t\t\tdistanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n\t\t\t\tmaxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n\t\t\t\tpanningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n\t\t\t\trefDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n\t\t\t\trolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n\t\t\t};\n\n\t\t\t// Setup event listeners.\n\t\t\tself._onstereo = o.onstereo ? [{\n\t\t\t\tfn: o.onstereo\n\t\t\t}] : [];\n\t\t\tself._onpos = o.onpos ? [{\n\t\t\t\tfn: o.onpos\n\t\t\t}] : [];\n\t\t\tself._onorientation = o.onorientation ? [{\n\t\t\t\tfn: o.onorientation\n\t\t\t}] : [];\n\n\t\t\t// Complete initilization with howler.js core's init function.\n\t\t\treturn _super.call(this, o);\n\t\t};\n\t}(Howl.prototype.init);\n\n\t/**\r\n  * Get/set the stereo panning of the audio source for this sound or all in the group.\r\n  * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\r\n  * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\r\n  * @return {Howl/Number}    Returns self or the current stereo panning value.\r\n  */\n\tHowl.prototype.stereo = function (pan, id) {\n\t\tvar self = this;\n\n\t\t// Stop right here if not using Web Audio.\n\t\tif (!self._webAudio) {\n\t\t\treturn self;\n\t\t}\n\n\t\t// If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n\t\tif (self._state !== 'loaded') {\n\t\t\tself._queue.push({\n\t\t\t\tevent: 'stereo',\n\t\t\t\taction: function action() {\n\t\t\t\t\tself.stereo(pan, id);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn self;\n\t\t}\n\n\t\t// Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n\t\tvar pannerType = typeof Howler.ctx.createStereoPanner === 'undefined' ? 'spatial' : 'stereo';\n\n\t\t// Setup the group's stereo panning if no ID is passed.\n\t\tif (typeof id === 'undefined') {\n\t\t\t// Return the group's stereo panning if no parameters are passed.\n\t\t\tif (typeof pan === 'number') {\n\t\t\t\tself._stereo = pan;\n\t\t\t\tself._pos = [pan, 0, 0];\n\t\t\t} else {\n\t\t\t\treturn self._stereo;\n\t\t\t}\n\t\t}\n\n\t\t// Change the streo panning of one or all sounds in group.\n\t\tvar ids = self._getSoundIds(id);\n\t\tfor (var i = 0; i < ids.length; i++) {\n\t\t\t// Get the sound.\n\t\t\tvar sound = self._soundById(ids[i]);\n\n\t\t\tif (sound) {\n\t\t\t\tif (typeof pan === 'number') {\n\t\t\t\t\tsound._stereo = pan;\n\t\t\t\t\tsound._pos = [pan, 0, 0];\n\n\t\t\t\t\tif (sound._node) {\n\t\t\t\t\t\t// If we are falling back, make sure the panningModel is equalpower.\n\t\t\t\t\t\tsound._pannerAttr.panningModel = 'equalpower';\n\n\t\t\t\t\t\t// Check if there is a panner setup and create a new one if not.\n\t\t\t\t\t\tif (!sound._panner || !sound._panner.pan) {\n\t\t\t\t\t\t\tsetupPanner(sound, pannerType);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (pannerType === 'spatial') {\n\t\t\t\t\t\t\tif (typeof sound._panner.positionX !== 'undefined') {\n\t\t\t\t\t\t\t\tsound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);\n\t\t\t\t\t\t\t\tsound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);\n\t\t\t\t\t\t\t\tsound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsound._panner.setPosition(pan, 0, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tself._emit('stereo', sound._id);\n\t\t\t\t} else {\n\t\t\t\t\treturn sound._stereo;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn self;\n\t};\n\n\t/**\r\n  * Get/set the 3D spatial position of the audio source for this sound or group relative to the global listener.\r\n  * @param  {Number} x  The x-position of the audio source.\r\n  * @param  {Number} y  The y-position of the audio source.\r\n  * @param  {Number} z  The z-position of the audio source.\r\n  * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\r\n  * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\r\n  */\n\tHowl.prototype.pos = function (x, y, z, id) {\n\t\tvar self = this;\n\n\t\t// Stop right here if not using Web Audio.\n\t\tif (!self._webAudio) {\n\t\t\treturn self;\n\t\t}\n\n\t\t// If the sound hasn't loaded, add it to the load queue to change position when capable.\n\t\tif (self._state !== 'loaded') {\n\t\t\tself._queue.push({\n\t\t\t\tevent: 'pos',\n\t\t\t\taction: function action() {\n\t\t\t\t\tself.pos(x, y, z, id);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn self;\n\t\t}\n\n\t\t// Set the defaults for optional 'y' & 'z'.\n\t\ty = typeof y !== 'number' ? 0 : y;\n\t\tz = typeof z !== 'number' ? -0.5 : z;\n\n\t\t// Setup the group's spatial position if no ID is passed.\n\t\tif (typeof id === 'undefined') {\n\t\t\t// Return the group's spatial position if no parameters are passed.\n\t\t\tif (typeof x === 'number') {\n\t\t\t\tself._pos = [x, y, z];\n\t\t\t} else {\n\t\t\t\treturn self._pos;\n\t\t\t}\n\t\t}\n\n\t\t// Change the spatial position of one or all sounds in group.\n\t\tvar ids = self._getSoundIds(id);\n\t\tfor (var i = 0; i < ids.length; i++) {\n\t\t\t// Get the sound.\n\t\t\tvar sound = self._soundById(ids[i]);\n\n\t\t\tif (sound) {\n\t\t\t\tif (typeof x === 'number') {\n\t\t\t\t\tsound._pos = [x, y, z];\n\n\t\t\t\t\tif (sound._node) {\n\t\t\t\t\t\t// Check if there is a panner setup and create a new one if not.\n\t\t\t\t\t\tif (!sound._panner || sound._panner.pan) {\n\t\t\t\t\t\t\tsetupPanner(sound, 'spatial');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof sound._panner.positionX !== 'undefined') {\n\t\t\t\t\t\t\tsound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);\n\t\t\t\t\t\t\tsound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);\n\t\t\t\t\t\t\tsound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsound._panner.setPosition(x, y, z);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tself._emit('pos', sound._id);\n\t\t\t\t} else {\n\t\t\t\t\treturn sound._pos;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn self;\n\t};\n\n\t/**\r\n  * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\r\n  * space. Depending on how direction the sound is, based on the `cone` attributes,\r\n  * a sound pointing away from the listener can be quiet or silent.\r\n  * @param  {Number} x  The x-orientation of the source.\r\n  * @param  {Number} y  The y-orientation of the source.\r\n  * @param  {Number} z  The z-orientation of the source.\r\n  * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\r\n  * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\r\n  */\n\tHowl.prototype.orientation = function (x, y, z, id) {\n\t\tvar self = this;\n\n\t\t// Stop right here if not using Web Audio.\n\t\tif (!self._webAudio) {\n\t\t\treturn self;\n\t\t}\n\n\t\t// If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n\t\tif (self._state !== 'loaded') {\n\t\t\tself._queue.push({\n\t\t\t\tevent: 'orientation',\n\t\t\t\taction: function action() {\n\t\t\t\t\tself.orientation(x, y, z, id);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn self;\n\t\t}\n\n\t\t// Set the defaults for optional 'y' & 'z'.\n\t\ty = typeof y !== 'number' ? self._orientation[1] : y;\n\t\tz = typeof z !== 'number' ? self._orientation[2] : z;\n\n\t\t// Setup the group's spatial orientation if no ID is passed.\n\t\tif (typeof id === 'undefined') {\n\t\t\t// Return the group's spatial orientation if no parameters are passed.\n\t\t\tif (typeof x === 'number') {\n\t\t\t\tself._orientation = [x, y, z];\n\t\t\t} else {\n\t\t\t\treturn self._orientation;\n\t\t\t}\n\t\t}\n\n\t\t// Change the spatial orientation of one or all sounds in group.\n\t\tvar ids = self._getSoundIds(id);\n\t\tfor (var i = 0; i < ids.length; i++) {\n\t\t\t// Get the sound.\n\t\t\tvar sound = self._soundById(ids[i]);\n\n\t\t\tif (sound) {\n\t\t\t\tif (typeof x === 'number') {\n\t\t\t\t\tsound._orientation = [x, y, z];\n\n\t\t\t\t\tif (sound._node) {\n\t\t\t\t\t\t// Check if there is a panner setup and create a new one if not.\n\t\t\t\t\t\tif (!sound._panner) {\n\t\t\t\t\t\t\t// Make sure we have a position to setup the node with.\n\t\t\t\t\t\t\tif (!sound._pos) {\n\t\t\t\t\t\t\t\tsound._pos = self._pos || [0, 0, -0.5];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsetupPanner(sound, 'spatial');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof sound._panner.orientationX !== 'undefined') {\n\t\t\t\t\t\t\tsound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);\n\t\t\t\t\t\t\tsound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);\n\t\t\t\t\t\t\tsound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsound._panner.setOrientation(x, y, z);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tself._emit('orientation', sound._id);\n\t\t\t\t} else {\n\t\t\t\t\treturn sound._orientation;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn self;\n\t};\n\n\t/**\r\n  * Get/set the panner node's attributes for a sound or group of sounds.\r\n  * This method can optionall take 0, 1 or 2 arguments.\r\n  *   pannerAttr() -> Returns the group's values.\r\n  *   pannerAttr(id) -> Returns the sound id's values.\r\n  *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\r\n  *   pannerAttr(o, id) -> Set's the values of passed sound id.\r\n  *\r\n  *   Attributes:\r\n  *     coneInnerAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\r\n  *                      inside of which there will be no volume reduction.\r\n  *     coneOuterAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\r\n  *                      outside of which the volume will be reduced to a constant value of `coneOuterGain`.\r\n  *     coneOuterGain - (0 by default) A parameter for directional audio sources, this is the gain outside of the\r\n  *                     `coneOuterAngle`. It is a linear value in the range `[0, 1]`.\r\n  *     distanceModel - ('inverse' by default) Determines algorithm used to reduce volume as audio moves away from\r\n  *                     listener. Can be `linear`, `inverse` or `exponential.\r\n  *     maxDistance - (10000 by default) The maximum distance between source and listener, after which the volume\r\n  *                   will not be reduced any further.\r\n  *     refDistance - (1 by default) A reference distance for reducing volume as source moves further from the listener.\r\n  *                   This is simply a variable of the distance model and has a different effect depending on which model\r\n  *                   is used and the scale of your coordinates. Generally, volume will be equal to 1 at this distance.\r\n  *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener. This is simply a\r\n  *                     variable of the distance model and can be in the range of `[0, 1]` with `linear` and `[0, ∞]`\r\n  *                     with `inverse` and `exponential`.\r\n  *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\r\n  *                     Can be `HRTF` or `equalpower`.\r\n  *\r\n  * @return {Howl/Object} Returns self or current panner attributes.\r\n  */\n\tHowl.prototype.pannerAttr = function () {\n\t\tvar self = this;\n\t\tvar args = arguments;\n\t\tvar o, id, sound;\n\n\t\t// Stop right here if not using Web Audio.\n\t\tif (!self._webAudio) {\n\t\t\treturn self;\n\t\t}\n\n\t\t// Determine the values based on arguments.\n\t\tif (args.length === 0) {\n\t\t\t// Return the group's panner attribute values.\n\t\t\treturn self._pannerAttr;\n\t\t} else if (args.length === 1) {\n\t\t\tif (_typeof(args[0]) === 'object') {\n\t\t\t\to = args[0];\n\n\t\t\t\t// Set the grou's panner attribute values.\n\t\t\t\tif (typeof id === 'undefined') {\n\t\t\t\t\tif (!o.pannerAttr) {\n\t\t\t\t\t\to.pannerAttr = {\n\t\t\t\t\t\t\tconeInnerAngle: o.coneInnerAngle,\n\t\t\t\t\t\t\tconeOuterAngle: o.coneOuterAngle,\n\t\t\t\t\t\t\tconeOuterGain: o.coneOuterGain,\n\t\t\t\t\t\t\tdistanceModel: o.distanceModel,\n\t\t\t\t\t\t\tmaxDistance: o.maxDistance,\n\t\t\t\t\t\t\trefDistance: o.refDistance,\n\t\t\t\t\t\t\trolloffFactor: o.rolloffFactor,\n\t\t\t\t\t\t\tpanningModel: o.panningModel\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tself._pannerAttr = {\n\t\t\t\t\t\tconeInnerAngle: typeof o.pannerAttr.coneInnerAngle !== 'undefined' ? o.pannerAttr.coneInnerAngle : self._coneInnerAngle,\n\t\t\t\t\t\tconeOuterAngle: typeof o.pannerAttr.coneOuterAngle !== 'undefined' ? o.pannerAttr.coneOuterAngle : self._coneOuterAngle,\n\t\t\t\t\t\tconeOuterGain: typeof o.pannerAttr.coneOuterGain !== 'undefined' ? o.pannerAttr.coneOuterGain : self._coneOuterGain,\n\t\t\t\t\t\tdistanceModel: typeof o.pannerAttr.distanceModel !== 'undefined' ? o.pannerAttr.distanceModel : self._distanceModel,\n\t\t\t\t\t\tmaxDistance: typeof o.pannerAttr.maxDistance !== 'undefined' ? o.pannerAttr.maxDistance : self._maxDistance,\n\t\t\t\t\t\trefDistance: typeof o.pannerAttr.refDistance !== 'undefined' ? o.pannerAttr.refDistance : self._refDistance,\n\t\t\t\t\t\trolloffFactor: typeof o.pannerAttr.rolloffFactor !== 'undefined' ? o.pannerAttr.rolloffFactor : self._rolloffFactor,\n\t\t\t\t\t\tpanningModel: typeof o.pannerAttr.panningModel !== 'undefined' ? o.pannerAttr.panningModel : self._panningModel\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Return this sound's panner attribute values.\n\t\t\t\tsound = self._soundById(parseInt(args[0], 10));\n\t\t\t\treturn sound ? sound._pannerAttr : self._pannerAttr;\n\t\t\t}\n\t\t} else if (args.length === 2) {\n\t\t\to = args[0];\n\t\t\tid = parseInt(args[1], 10);\n\t\t}\n\n\t\t// Update the values of the specified sounds.\n\t\tvar ids = self._getSoundIds(id);\n\t\tfor (var i = 0; i < ids.length; i++) {\n\t\t\tsound = self._soundById(ids[i]);\n\n\t\t\tif (sound) {\n\t\t\t\t// Merge the new values into the sound.\n\t\t\t\tvar pa = sound._pannerAttr;\n\t\t\t\tpa = {\n\t\t\t\t\tconeInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n\t\t\t\t\tconeOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n\t\t\t\t\tconeOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n\t\t\t\t\tdistanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n\t\t\t\t\tmaxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n\t\t\t\t\trefDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n\t\t\t\t\trolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor,\n\t\t\t\t\tpanningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel\n\t\t\t\t};\n\n\t\t\t\t// Update the panner values or create a new panner if none exists.\n\t\t\t\tvar panner = sound._panner;\n\t\t\t\tif (panner) {\n\t\t\t\t\tpanner.coneInnerAngle = pa.coneInnerAngle;\n\t\t\t\t\tpanner.coneOuterAngle = pa.coneOuterAngle;\n\t\t\t\t\tpanner.coneOuterGain = pa.coneOuterGain;\n\t\t\t\t\tpanner.distanceModel = pa.distanceModel;\n\t\t\t\t\tpanner.maxDistance = pa.maxDistance;\n\t\t\t\t\tpanner.refDistance = pa.refDistance;\n\t\t\t\t\tpanner.rolloffFactor = pa.rolloffFactor;\n\t\t\t\t\tpanner.panningModel = pa.panningModel;\n\t\t\t\t} else {\n\t\t\t\t\t// Make sure we have a position to setup the node with.\n\t\t\t\t\tif (!sound._pos) {\n\t\t\t\t\t\tsound._pos = self._pos || [0, 0, -0.5];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create a new panner node.\n\t\t\t\t\tsetupPanner(sound, 'spatial');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn self;\n\t};\n\n\t/** Single Sound Methods **/\n\t/***************************************************************************/\n\n\t/**\r\n  * Add new properties to the core Sound init.\r\n  * @param  {Function} _super Core Sound init method.\r\n  * @return {Sound}\r\n  */\n\tSound.prototype.init = function (_super) {\n\t\treturn function () {\n\t\t\tvar self = this;\n\t\t\tvar parent = self._parent;\n\n\t\t\t// Setup user-defined default properties.\n\t\t\tself._orientation = parent._orientation;\n\t\t\tself._stereo = parent._stereo;\n\t\t\tself._pos = parent._pos;\n\t\t\tself._pannerAttr = parent._pannerAttr;\n\n\t\t\t// Complete initilization with howler.js core Sound's init function.\n\t\t\t_super.call(this);\n\n\t\t\t// If a stereo or position was specified, set it up.\n\t\t\tif (self._stereo) {\n\t\t\t\tparent.stereo(self._stereo);\n\t\t\t} else if (self._pos) {\n\t\t\t\tparent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n\t\t\t}\n\t\t};\n\t}(Sound.prototype.init);\n\n\t/**\r\n  * Override the Sound.reset method to clean up properties from the spatial plugin.\r\n  * @param  {Function} _super Sound reset method.\r\n  * @return {Sound}\r\n  */\n\tSound.prototype.reset = function (_super) {\n\t\treturn function () {\n\t\t\tvar self = this;\n\t\t\tvar parent = self._parent;\n\n\t\t\t// Reset all spatial plugin properties on this sound.\n\t\t\tself._orientation = parent._orientation;\n\t\t\tself._stereo = parent._stereo;\n\t\t\tself._pos = parent._pos;\n\t\t\tself._pannerAttr = parent._pannerAttr;\n\n\t\t\t// If a stereo or position was specified, set it up.\n\t\t\tif (self._stereo) {\n\t\t\t\tparent.stereo(self._stereo);\n\t\t\t} else if (self._pos) {\n\t\t\t\tparent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n\t\t\t} else if (self._panner) {\n\t\t\t\t// Disconnect the panner.\n\t\t\t\tself._panner.disconnect(0);\n\t\t\t\tself._panner = undefined;\n\t\t\t\tparent._refreshBuffer(self);\n\t\t\t}\n\n\t\t\t// Complete resetting of the sound.\n\t\t\treturn _super.call(this);\n\t\t};\n\t}(Sound.prototype.reset);\n\n\t/** Helper Methods **/\n\t/***************************************************************************/\n\n\t/**\r\n  * Create a new panner node and save it on the sound.\r\n  * @param  {Sound} sound Specific sound to setup panning on.\r\n  * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\r\n  */\n\tvar setupPanner = function setupPanner(sound, type) {\n\t\ttype = type || 'spatial';\n\n\t\t// Create the new panner node.\n\t\tif (type === 'spatial') {\n\t\t\tsound._panner = Howler.ctx.createPanner();\n\t\t\tsound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n\t\t\tsound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n\t\t\tsound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n\t\t\tsound._panner.distanceModel = sound._pannerAttr.distanceModel;\n\t\t\tsound._panner.maxDistance = sound._pannerAttr.maxDistance;\n\t\t\tsound._panner.refDistance = sound._pannerAttr.refDistance;\n\t\t\tsound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n\t\t\tsound._panner.panningModel = sound._pannerAttr.panningModel;\n\n\t\t\tif (typeof sound._panner.positionX !== 'undefined') {\n\t\t\t\tsound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);\n\t\t\t\tsound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);\n\t\t\t\tsound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);\n\t\t\t} else {\n\t\t\t\tsound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n\t\t\t}\n\n\t\t\tif (typeof sound._panner.orientationX !== 'undefined') {\n\t\t\t\tsound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);\n\t\t\t\tsound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);\n\t\t\t\tsound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);\n\t\t\t} else {\n\t\t\t\tsound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n\t\t\t}\n\t\t} else {\n\t\t\tsound._panner = Howler.ctx.createStereoPanner();\n\t\t\tsound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);\n\t\t}\n\n\t\tsound._panner.connect(sound._node);\n\n\t\t// Update the connections.\n\t\tif (!sound._paused) {\n\t\t\tsound._parent.pause(sound._id, true).play(sound._id, true);\n\t\t}\n\t};\n})();\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(12)))\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvbGliL2hvd2xlci5qcz8xMmNkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxyXG4gKiAgaG93bGVyLmpzIHYyLjEuMVxyXG4gKiAgaG93bGVyanMuY29tXHJcbiAqXHJcbiAqICAoYykgMjAxMy0yMDE4LCBKYW1lcyBTaW1wc29uIG9mIEdvbGRGaXJlIFN0dWRpb3NcclxuICogIGdvbGRmaXJlc3R1ZGlvcy5jb21cclxuICpcclxuICogIE1JVCBMaWNlbnNlXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCkge1xyXG5cclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8qKiBHbG9iYWwgTWV0aG9kcyAqKi9cclxuXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGUgdGhlIGdsb2JhbCBjb250cm9sbGVyLiBBbGwgY29udGFpbmVkIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMgYXBwbHlcclxuXHQgKiB0byBhbGwgc291bmRzIHRoYXQgYXJlIGN1cnJlbnRseSBwbGF5aW5nIG9yIHdpbGwgYmUgaW4gdGhlIGZ1dHVyZS5cclxuXHQgKi9cclxuXHR2YXIgSG93bGVyR2xvYmFsID0gZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmluaXQoKTtcclxuXHR9O1xyXG5cdEhvd2xlckdsb2JhbC5wcm90b3R5cGUgPSB7XHJcblx0XHQvKipcclxuXHRcdCAqIEluaXRpYWxpemUgdGhlIGdsb2JhbCBIb3dsZXIgb2JqZWN0LlxyXG5cdFx0ICogQHJldHVybiB7SG93bGVyfVxyXG5cdFx0ICovXHJcblx0XHRpbml0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcclxuXHJcblx0XHRcdC8vIENyZWF0ZSBhIGdsb2JhbCBJRCBjb3VudGVyLlxyXG5cdFx0XHRzZWxmLl9jb3VudGVyID0gMTAwMDtcclxuXHJcblx0XHRcdC8vIFBvb2wgb2YgdW5sb2NrZWQgSFRNTDUgQXVkaW8gb2JqZWN0cy5cclxuXHRcdFx0c2VsZi5faHRtbDVBdWRpb1Bvb2wgPSBbXTtcclxuXHRcdFx0c2VsZi5odG1sNVBvb2xTaXplID0gMTA7XHJcblxyXG5cdFx0XHQvLyBJbnRlcm5hbCBwcm9wZXJ0aWVzLlxyXG5cdFx0XHRzZWxmLl9jb2RlY3MgPSB7fTtcclxuXHRcdFx0c2VsZi5faG93bHMgPSBbXTtcclxuXHRcdFx0c2VsZi5fbXV0ZWQgPSBmYWxzZTtcclxuXHRcdFx0c2VsZi5fdm9sdW1lID0gMTtcclxuXHRcdFx0c2VsZi5fY2FuUGxheUV2ZW50ID0gJ2NhbnBsYXl0aHJvdWdoJztcclxuXHRcdFx0c2VsZi5fbmF2aWdhdG9yID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5uYXZpZ2F0b3IpID8gd2luZG93Lm5hdmlnYXRvciA6IG51bGw7XHJcblxyXG5cdFx0XHQvLyBQdWJsaWMgcHJvcGVydGllcy5cclxuXHRcdFx0c2VsZi5tYXN0ZXJHYWluID0gbnVsbDtcclxuXHRcdFx0c2VsZi5ub0F1ZGlvID0gZmFsc2U7XHJcblx0XHRcdHNlbGYudXNpbmdXZWJBdWRpbyA9IHRydWU7XHJcblx0XHRcdHNlbGYuYXV0b1N1c3BlbmQgPSB0cnVlO1xyXG5cdFx0XHRzZWxmLmN0eCA9IG51bGw7XHJcblxyXG5cdFx0XHQvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB0aGUgYXV0byBhdWRpbyB1bmxvY2tlci5cclxuXHRcdFx0c2VsZi5hdXRvVW5sb2NrID0gdHJ1ZTtcclxuXHJcblx0XHRcdC8vIFNldHVwIHRoZSB2YXJpb3VzIHN0YXRlIHZhbHVlcyBmb3IgZ2xvYmFsIHRyYWNraW5nLlxyXG5cdFx0XHRzZWxmLl9zZXR1cCgpO1xyXG5cclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogR2V0L3NldCB0aGUgZ2xvYmFsIHZvbHVtZSBmb3IgYWxsIHNvdW5kcy5cclxuXHRcdCAqIEBwYXJhbSAge0Zsb2F0fSB2b2wgVm9sdW1lIGZyb20gMC4wIHRvIDEuMC5cclxuXHRcdCAqIEByZXR1cm4ge0hvd2xlci9GbG9hdH0gICAgIFJldHVybnMgc2VsZiBvciBjdXJyZW50IHZvbHVtZS5cclxuXHRcdCAqL1xyXG5cdFx0dm9sdW1lOiBmdW5jdGlvbih2b2wpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcclxuXHRcdFx0dm9sID0gcGFyc2VGbG9hdCh2b2wpO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBBdWRpb0NvbnRleHQgY3JlYXRlZCB5ZXQsIHJ1biB0aGUgc2V0dXAuXHJcblx0XHRcdGlmICghc2VsZi5jdHgpIHtcclxuXHRcdFx0XHRzZXR1cEF1ZGlvQ29udGV4dCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAodHlwZW9mIHZvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdm9sID49IDAgJiYgdm9sIDw9IDEpIHtcclxuXHRcdFx0XHRzZWxmLl92b2x1bWUgPSB2b2w7XHJcblxyXG5cdFx0XHRcdC8vIERvbid0IHVwZGF0ZSBhbnkgb2YgdGhlIG5vZGVzIGlmIHdlIGFyZSBtdXRlZC5cclxuXHRcdFx0XHRpZiAoc2VsZi5fbXV0ZWQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gV2hlbiB1c2luZyBXZWIgQXVkaW8sIHdlIGp1c3QgbmVlZCB0byBhZGp1c3QgdGhlIG1hc3RlciBnYWluLlxyXG5cdFx0XHRcdGlmIChzZWxmLnVzaW5nV2ViQXVkaW8pIHtcclxuXHRcdFx0XHRcdHNlbGYubWFzdGVyR2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBMb29wIHRocm91Z2ggYW5kIGNoYW5nZSB2b2x1bWUgZm9yIGFsbCBIVE1MNSBhdWRpbyBub2Rlcy5cclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRpZiAoIXNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xyXG5cdFx0XHRcdFx0XHQvLyBHZXQgYWxsIG9mIHRoZSBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxyXG5cdFx0XHRcdFx0XHR2YXIgaWRzID0gc2VsZi5faG93bHNbaV0uX2dldFNvdW5kSWRzKCk7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgY2hhbmdlIHRoZSB2b2x1bWVzLlxyXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGlkcy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdFx0XHRcdHZhciBzb3VuZCA9IHNlbGYuX2hvd2xzW2ldLl9zb3VuZEJ5SWQoaWRzW2pdKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0aWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzb3VuZC5fbm9kZS52b2x1bWUgPSBzb3VuZC5fdm9sdW1lICogdm9sO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBzZWxmLl92b2x1bWU7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogSGFuZGxlIG11dGluZyBhbmQgdW5tdXRpbmcgZ2xvYmFsbHkuXHJcblx0XHQgKiBAcGFyYW0gIHtCb29sZWFufSBtdXRlZCBJcyBtdXRlZCBvciBub3QuXHJcblx0XHQgKi9cclxuXHRcdG11dGU6IGZ1bmN0aW9uKG11dGVkKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSBkb24ndCBoYXZlIGFuIEF1ZGlvQ29udGV4dCBjcmVhdGVkIHlldCwgcnVuIHRoZSBzZXR1cC5cclxuXHRcdFx0aWYgKCFzZWxmLmN0eCkge1xyXG5cdFx0XHRcdHNldHVwQXVkaW9Db250ZXh0KCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHNlbGYuX211dGVkID0gbXV0ZWQ7XHJcblxyXG5cdFx0XHQvLyBXaXRoIFdlYiBBdWRpbywgd2UganVzdCBuZWVkIHRvIG11dGUgdGhlIG1hc3RlciBnYWluLlxyXG5cdFx0XHRpZiAoc2VsZi51c2luZ1dlYkF1ZGlvKSB7XHJcblx0XHRcdFx0c2VsZi5tYXN0ZXJHYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUobXV0ZWQgPyAwIDogc2VsZi5fdm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTG9vcCB0aHJvdWdoIGFuZCBtdXRlIGFsbCBIVE1MNSBBdWRpbyBub2Rlcy5cclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlmICghc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XHJcblx0XHRcdFx0XHQvLyBHZXQgYWxsIG9mIHRoZSBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxyXG5cdFx0XHRcdFx0dmFyIGlkcyA9IHNlbGYuX2hvd2xzW2ldLl9nZXRTb3VuZElkcygpO1xyXG5cclxuXHRcdFx0XHRcdC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBtYXJrIHRoZSBhdWRpbyBub2RlIGFzIG11dGVkLlxyXG5cdFx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBpZHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRcdFx0dmFyIHNvdW5kID0gc2VsZi5faG93bHNbaV0uX3NvdW5kQnlJZChpZHNbal0pO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlKSB7XHJcblx0XHRcdFx0XHRcdFx0c291bmQuX25vZGUubXV0ZWQgPSAobXV0ZWQpID8gdHJ1ZSA6IHNvdW5kLl9tdXRlZDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogVW5sb2FkIGFuZCBkZXN0cm95IGFsbCBjdXJyZW50bHkgbG9hZGVkIEhvd2wgb2JqZWN0cy5cclxuXHRcdCAqIEByZXR1cm4ge0hvd2xlcn1cclxuXHRcdCAqL1xyXG5cdFx0dW5sb2FkOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcclxuXHJcblx0XHRcdGZvciAodmFyIGkgPSBzZWxmLl9ob3dscy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cdFx0XHRcdHNlbGYuX2hvd2xzW2ldLnVubG9hZCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDcmVhdGUgYSBuZXcgQXVkaW9Db250ZXh0IHRvIG1ha2Ugc3VyZSBpdCBpcyBmdWxseSByZXNldC5cclxuXHRcdFx0aWYgKHNlbGYudXNpbmdXZWJBdWRpbyAmJiBzZWxmLmN0eCAmJiB0eXBlb2Ygc2VsZi5jdHguY2xvc2UgIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0c2VsZi5jdHguY2xvc2UoKTtcclxuXHRcdFx0XHRzZWxmLmN0eCA9IG51bGw7XHJcblx0XHRcdFx0c2V0dXBBdWRpb0NvbnRleHQoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ2hlY2sgZm9yIGNvZGVjIHN1cHBvcnQgb2Ygc3BlY2lmaWMgZXh0ZW5zaW9uLlxyXG5cdFx0ICogQHBhcmFtICB7U3RyaW5nfSBleHQgQXVkaW8gZmlsZSBleHRlbnRpb24uXHJcblx0XHQgKiBAcmV0dXJuIHtCb29sZWFufVxyXG5cdFx0ICovXHJcblx0XHRjb2RlY3M6IGZ1bmN0aW9uKGV4dCkge1xyXG5cdFx0XHRyZXR1cm4gKHRoaXMgfHwgSG93bGVyKS5fY29kZWNzW2V4dC5yZXBsYWNlKC9eeC0vLCAnJyldO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFNldHVwIHZhcmlvdXMgc3RhdGUgdmFsdWVzIGZvciBnbG9iYWwgdHJhY2tpbmcuXHJcblx0XHQgKiBAcmV0dXJuIHtIb3dsZXJ9XHJcblx0XHQgKi9cclxuXHRcdF9zZXR1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XHJcblxyXG5cdFx0XHQvLyBLZWVwcyB0cmFjayBvZiB0aGUgc3VzcGVuZC9yZXN1bWUgc3RhdGUgb2YgdGhlIEF1ZGlvQ29udGV4dC5cclxuXHRcdFx0c2VsZi5zdGF0ZSA9IHNlbGYuY3R4ID8gc2VsZi5jdHguc3RhdGUgfHwgJ3N1c3BlbmRlZCcgOiAnc3VzcGVuZGVkJztcclxuXHJcblx0XHRcdC8vIEF1dG9tYXRpY2FsbHkgYmVnaW4gdGhlIDMwLXNlY29uZCBzdXNwZW5kIHByb2Nlc3NcclxuXHRcdFx0c2VsZi5fYXV0b1N1c3BlbmQoKTtcclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIGF1ZGlvIGlzIGF2YWlsYWJsZS5cclxuXHRcdFx0aWYgKCFzZWxmLnVzaW5nV2ViQXVkaW8pIHtcclxuXHRcdFx0XHQvLyBObyBhdWRpbyBpcyBhdmFpbGFibGUgb24gdGhpcyBzeXN0ZW0gaWYgbm9BdWRpbyBpcyBzZXQgdG8gdHJ1ZS5cclxuXHRcdFx0XHRpZiAodHlwZW9mIEF1ZGlvICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0dmFyIHRlc3QgPSBuZXcgQXVkaW8oKTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIHRoZSBjYW5wbGF5dGhyb3VnaCBldmVudCBpcyBhdmFpbGFibGUuXHJcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgdGVzdC5vbmNhbnBsYXl0aHJvdWdoID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX2NhblBsYXlFdmVudCA9ICdjYW5wbGF5JztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLm5vQXVkaW8gPSB0cnVlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRzZWxmLm5vQXVkaW8gPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVGVzdCB0byBtYWtlIHN1cmUgYXVkaW8gaXNuJ3QgZGlzYWJsZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuXHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0dmFyIHRlc3QgPSBuZXcgQXVkaW8oKTtcclxuXHRcdFx0XHRpZiAodGVzdC5tdXRlZCkge1xyXG5cdFx0XHRcdFx0c2VsZi5ub0F1ZGlvID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2ggKGUpIHt9XHJcblxyXG5cdFx0XHQvLyBDaGVjayBmb3Igc3VwcG9ydGVkIGNvZGVjcy5cclxuXHRcdFx0aWYgKCFzZWxmLm5vQXVkaW8pIHtcclxuXHRcdFx0XHRzZWxmLl9zZXR1cENvZGVjcygpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdH0sXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDaGVjayBmb3IgYnJvd3NlciBzdXBwb3J0IGZvciB2YXJpb3VzIGNvZGVjcyBhbmQgY2FjaGUgdGhlIHJlc3VsdHMuXHJcblx0XHQgKiBAcmV0dXJuIHtIb3dsZXJ9XHJcblx0XHQgKi9cclxuXHRcdF9zZXR1cENvZGVjczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XHJcblx0XHRcdHZhciBhdWRpb1Rlc3QgPSBudWxsO1xyXG5cclxuXHRcdFx0Ly8gTXVzdCB3cmFwIGluIGEgdHJ5L2NhdGNoIGJlY2F1c2UgSUUxMSBpbiBzZXJ2ZXIgbW9kZSB0aHJvd3MgYW4gZXJyb3IuXHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0YXVkaW9UZXN0ID0gKHR5cGVvZiBBdWRpbyAhPT0gJ3VuZGVmaW5lZCcpID8gbmV3IEF1ZGlvKCkgOiBudWxsO1xyXG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcclxuXHRcdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCFhdWRpb1Rlc3QgfHwgdHlwZW9mIGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSAhPT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgbXBlZ1Rlc3QgPSBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wZWc7JykucmVwbGFjZSgvXm5vJC8sICcnKTtcclxuXHJcblx0XHRcdC8vIE9wZXJhIHZlcnNpb24gPDMzIGhhcyBtaXhlZCBNUDMgc3VwcG9ydCwgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgYW5kIGJsb2NrIGl0LlxyXG5cdFx0XHR2YXIgY2hlY2tPcGVyYSA9IHNlbGYuX25hdmlnYXRvciAmJiBzZWxmLl9uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9PUFJcXC8oWzAtNl0uKS9nKTtcclxuXHRcdFx0dmFyIGlzT2xkT3BlcmEgPSAoY2hlY2tPcGVyYSAmJiBwYXJzZUludChjaGVja09wZXJhWzBdLnNwbGl0KCcvJylbMV0sIDEwKSA8IDMzKTtcclxuXHJcblx0XHRcdHNlbGYuX2NvZGVjcyA9IHtcclxuXHRcdFx0XHRtcDM6ICEhKCFpc09sZE9wZXJhICYmIChtcGVnVGVzdCB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wMzsnKS5yZXBsYWNlKC9ebm8kLywgJycpKSksXHJcblx0XHRcdFx0bXBlZzogISFtcGVnVGVzdCxcclxuXHRcdFx0XHRvcHVzOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vb2dnOyBjb2RlY3M9XCJvcHVzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxyXG5cdFx0XHRcdG9nZzogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL29nZzsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxyXG5cdFx0XHRcdG9nYTogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL29nZzsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxyXG5cdFx0XHRcdHdhdjogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dhdjsgY29kZWNzPVwiMVwiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcclxuXHRcdFx0XHRhYWM6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykucmVwbGFjZSgvXm5vJC8sICcnKSxcclxuXHRcdFx0XHRjYWY6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LWNhZjsnKS5yZXBsYWNlKC9ebm8kLywgJycpLFxyXG5cdFx0XHRcdG00YTogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LW00YTsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL200YTsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKSkucmVwbGFjZSgvXm5vJC8sICcnKSxcclxuXHRcdFx0XHRtcDQ6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1tcDQ7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcDQ7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJyksXHJcblx0XHRcdFx0d2ViYTogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dlYm07IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcclxuXHRcdFx0XHR3ZWJtOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2VibTsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxyXG5cdFx0XHRcdGRvbGJ5OiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXA0OyBjb2RlY3M9XCJlYy0zXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxyXG5cdFx0XHRcdGZsYWM6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1mbGFjOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vZmxhYzsnKSkucmVwbGFjZSgvXm5vJC8sICcnKVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogU29tZSBicm93c2Vycy9kZXZpY2VzIHdpbGwgb25seSBhbGxvdyBhdWRpbyB0byBiZSBwbGF5ZWQgYWZ0ZXIgYSB1c2VyIGludGVyYWN0aW9uLlxyXG5cdFx0ICogQXR0ZW1wdCB0byBhdXRvbWF0aWNhbGx5IHVubG9jayBhdWRpbyBvbiB0aGUgZmlyc3QgdXNlciBpbnRlcmFjdGlvbi5cclxuXHRcdCAqIENvbmNlcHQgZnJvbTogaHR0cDovL3BhdWxiYWthdXMuY29tL3R1dG9yaWFscy9odG1sNS93ZWItYXVkaW8tb24taW9zL1xyXG5cdFx0ICogQHJldHVybiB7SG93bGVyfVxyXG5cdFx0ICovXHJcblx0XHRfdW5sb2NrQXVkaW86IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xyXG5cclxuXHRcdFx0Ly8gT25seSBydW4gdGhpcyBvbiBjZXJ0YWluIGJyb3dzZXJzL2RldmljZXMuXHJcblx0XHRcdHZhciBzaG91bGRVbmxvY2sgPSAvaVBob25lfGlQYWR8aVBvZHxBbmRyb2lkfEJsYWNrQmVycnl8QkIxMHxTaWxrfE1vYml8Q2hyb21lfFNhZmFyaS9pLnRlc3Qoc2VsZi5fbmF2aWdhdG9yICYmIHNlbGYuX25hdmlnYXRvci51c2VyQWdlbnQpO1xyXG5cdFx0XHRpZiAoc2VsZi5fYXVkaW9VbmxvY2tlZCB8fCAhc2VsZi5jdHggfHwgIXNob3VsZFVubG9jaykge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2VsZi5fYXVkaW9VbmxvY2tlZCA9IGZhbHNlO1xyXG5cdFx0XHRzZWxmLmF1dG9VbmxvY2sgPSBmYWxzZTtcclxuXHJcblx0XHRcdC8vIFNvbWUgbW9iaWxlIGRldmljZXMvcGxhdGZvcm1zIGhhdmUgZGlzdG9ydGlvbiBpc3N1ZXMgd2hlbiBvcGVuaW5nL2Nsb3NpbmcgdGFicyBhbmQvb3Igd2ViIHZpZXdzLlxyXG5cdFx0XHQvLyBCdWdzIGluIHRoZSBicm93c2VyIChlc3BlY2lhbGx5IE1vYmlsZSBTYWZhcmkpIGNhbiBjYXVzZSB0aGUgc2FtcGxlUmF0ZSB0byBjaGFuZ2UgZnJvbSA0NDEwMCB0byA0ODAwMC5cclxuXHRcdFx0Ly8gQnkgY2FsbGluZyBIb3dsZXIudW5sb2FkKCksIHdlIGNyZWF0ZSBhIG5ldyBBdWRpb0NvbnRleHQgd2l0aCB0aGUgY29ycmVjdCBzYW1wbGVSYXRlLlxyXG5cdFx0XHRpZiAoIXNlbGYuX21vYmlsZVVubG9hZGVkICYmIHNlbGYuY3R4LnNhbXBsZVJhdGUgIT09IDQ0MTAwKSB7XHJcblx0XHRcdFx0c2VsZi5fbW9iaWxlVW5sb2FkZWQgPSB0cnVlO1xyXG5cdFx0XHRcdHNlbGYudW5sb2FkKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFNjcmF0Y2ggYnVmZmVyIGZvciBlbmFibGluZyBpT1MgdG8gZGlzcG9zZSBvZiB3ZWIgYXVkaW8gYnVmZmVycyBjb3JyZWN0bHksIGFzIHBlcjpcclxuXHRcdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNDExOTY4NFxyXG5cdFx0XHRzZWxmLl9zY3JhdGNoQnVmZmVyID0gc2VsZi5jdHguY3JlYXRlQnVmZmVyKDEsIDEsIDIyMDUwKTtcclxuXHJcblx0XHRcdC8vIENhbGwgdGhpcyBtZXRob2Qgb24gdG91Y2ggc3RhcnQgdG8gY3JlYXRlIGFuZCBwbGF5IGEgYnVmZmVyLFxyXG5cdFx0XHQvLyB0aGVuIGNoZWNrIGlmIHRoZSBhdWRpbyBhY3R1YWxseSBwbGF5ZWQgdG8gZGV0ZXJtaW5lIGlmXHJcblx0XHRcdC8vIGF1ZGlvIGhhcyBub3cgYmVlbiB1bmxvY2tlZCBvbiBpT1MsIEFuZHJvaWQsIGV0Yy5cclxuXHRcdFx0dmFyIHVubG9jayA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHQvLyBDcmVhdGUgYSBwb29sIG9mIHVubG9ja2VkIEhUTUw1IEF1ZGlvIG9iamVjdHMgdGhhdCBjYW5cclxuXHRcdFx0XHQvLyBiZSB1c2VkIGZvciBwbGF5aW5nIHNvdW5kcyB3aXRob3V0IHVzZXIgaW50ZXJhY3Rpb24uIEhUTUw1XHJcblx0XHRcdFx0Ly8gQXVkaW8gb2JqZWN0cyBtdXN0IGJlIGluZGl2aWR1YWxseSB1bmxvY2tlZCwgYXMgb3Bwb3NlZFxyXG5cdFx0XHRcdC8vIHRvIHRoZSBXZWJBdWRpbyBBUEkgd2hpY2ggb25seSBuZWVkcyBhIHNpbmdsZSBhY3RpdmF0aW9uLlxyXG5cdFx0XHRcdC8vIFRoaXMgbXVzdCBvY2N1ciBiZWZvcmUgV2ViQXVkaW8gc2V0dXAgb3IgdGhlIHNvdXJjZS5vbmVuZGVkXHJcblx0XHRcdFx0Ly8gZXZlbnQgd2lsbCBub3QgZmlyZS5cclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuaHRtbDVQb29sU2l6ZTsgaSsrKSB7XHJcblx0XHRcdFx0XHR2YXIgYXVkaW9Ob2RlID0gbmV3IEF1ZGlvKCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gTWFyayB0aGlzIEF1ZGlvIG9iamVjdCBhcyB1bmxvY2tlZCB0byBlbnN1cmUgaXQgY2FuIGdldCByZXR1cm5lZFxyXG5cdFx0XHRcdFx0Ly8gdG8gdGhlIHVubG9ja2VkIHBvb2wgd2hlbiByZWxlYXNlZC5cclxuXHRcdFx0XHRcdGF1ZGlvTm9kZS5fdW5sb2NrZWQgPSB0cnVlO1xyXG5cclxuXHRcdFx0XHRcdC8vIEFkZCB0aGUgYXVkaW8gbm9kZSB0byB0aGUgcG9vbC5cclxuXHRcdFx0XHRcdHNlbGYuX3JlbGVhc2VIdG1sNUF1ZGlvKGF1ZGlvTm9kZSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBMb29wIHRocm91Z2ggYW55IGFzc2lnbmVkIGF1ZGlvIG5vZGVzIGFuZCB1bmxvY2sgdGhlbS5cclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRpZiAoIXNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xyXG5cdFx0XHRcdFx0XHQvLyBHZXQgYWxsIG9mIHRoZSBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxyXG5cdFx0XHRcdFx0XHR2YXIgaWRzID0gc2VsZi5faG93bHNbaV0uX2dldFNvdW5kSWRzKCk7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgdW5sb2NrIHRoZSBhdWRpbyBub2Rlcy5cclxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBpZHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRcdFx0XHR2YXIgc291bmQgPSBzZWxmLl9ob3dsc1tpXS5fc291bmRCeUlkKGlkc1tqXSk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmIChzb3VuZCAmJiBzb3VuZC5fbm9kZSAmJiAhc291bmQuX25vZGUuX3VubG9ja2VkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzb3VuZC5fbm9kZS5fdW5sb2NrZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0c291bmQuX25vZGUubG9hZCgpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gRml4IEFuZHJvaWQgY2FuIG5vdCBwbGF5IGluIHN1c3BlbmQgc3RhdGUuXHJcblx0XHRcdFx0c2VsZi5fYXV0b1Jlc3VtZSgpO1xyXG5cclxuXHRcdFx0XHQvLyBDcmVhdGUgYW4gZW1wdHkgYnVmZmVyLlxyXG5cdFx0XHRcdHZhciBzb3VyY2UgPSBzZWxmLmN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcclxuXHRcdFx0XHRzb3VyY2UuYnVmZmVyID0gc2VsZi5fc2NyYXRjaEJ1ZmZlcjtcclxuXHRcdFx0XHRzb3VyY2UuY29ubmVjdChzZWxmLmN0eC5kZXN0aW5hdGlvbik7XHJcblxyXG5cdFx0XHRcdC8vIFBsYXkgdGhlIGVtcHR5IGJ1ZmZlci5cclxuXHRcdFx0XHRpZiAodHlwZW9mIHNvdXJjZS5zdGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRcdHNvdXJjZS5ub3RlT24oMCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHNvdXJjZS5zdGFydCgwKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIENhbGxpbmcgcmVzdW1lKCkgb24gYSBzdGFjayBpbml0aWF0ZWQgYnkgdXNlciBnZXN0dXJlIGlzIHdoYXQgYWN0dWFsbHkgdW5sb2NrcyB0aGUgYXVkaW8gb24gQW5kcm9pZCBDaHJvbWUgPj0gNTUuXHJcblx0XHRcdFx0aWYgKHR5cGVvZiBzZWxmLmN0eC5yZXN1bWUgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRcdHNlbGYuY3R4LnJlc3VtZSgpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gU2V0dXAgYSB0aW1lb3V0IHRvIGNoZWNrIHRoYXQgd2UgYXJlIHVubG9ja2VkIG9uIHRoZSBuZXh0IGV2ZW50IGxvb3AuXHJcblx0XHRcdFx0c291cmNlLm9uZW5kZWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHNvdXJjZS5kaXNjb25uZWN0KDApO1xyXG5cclxuXHRcdFx0XHRcdC8vIFVwZGF0ZSB0aGUgdW5sb2NrZWQgc3RhdGUgYW5kIHByZXZlbnQgdGhpcyBjaGVjayBmcm9tIGhhcHBlbmluZyBhZ2Fpbi5cclxuXHRcdFx0XHRcdHNlbGYuX2F1ZGlvVW5sb2NrZWQgPSB0cnVlO1xyXG5cclxuXHRcdFx0XHRcdC8vIFJlbW92ZSB0aGUgdG91Y2ggc3RhcnQgbGlzdGVuZXIuXHJcblx0XHRcdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdW5sb2NrLCB0cnVlKTtcclxuXHRcdFx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdW5sb2NrLCB0cnVlKTtcclxuXHRcdFx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdW5sb2NrLCB0cnVlKTtcclxuXHJcblx0XHRcdFx0XHQvLyBMZXQgYWxsIHNvdW5kcyBrbm93IHRoYXQgYXVkaW8gaGFzIGJlZW4gdW5sb2NrZWQuXHJcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX2hvd2xzW2ldLl9lbWl0KCd1bmxvY2snKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Ly8gU2V0dXAgYSB0b3VjaCBzdGFydCBsaXN0ZW5lciB0byBhdHRlbXB0IGFuIHVubG9jayBpbi5cclxuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHVubG9jaywgdHJ1ZSk7XHJcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdW5sb2NrLCB0cnVlKTtcclxuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1bmxvY2ssIHRydWUpO1xyXG5cclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogR2V0IGFuIHVubG9ja2VkIEhUTUw1IEF1ZGlvIG9iamVjdCBmcm9tIHRoZSBwb29sLiBJZiBub25lIGFyZSBsZWZ0LFxyXG5cdFx0ICogcmV0dXJuIGEgbmV3IEF1ZGlvIG9iamVjdCBhbmQgdGhyb3cgYSB3YXJuaW5nLlxyXG5cdFx0ICogQHJldHVybiB7QXVkaW99IEhUTUw1IEF1ZGlvIG9iamVjdC5cclxuXHRcdCAqL1xyXG5cdFx0X29idGFpbkh0bWw1QXVkaW86IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xyXG5cclxuXHRcdFx0Ly8gUmV0dXJuIHRoZSBuZXh0IG9iamVjdCBmcm9tIHRoZSBwb29sIGlmIG9uZSBleGlzdHMuXHJcblx0XHRcdGlmIChzZWxmLl9odG1sNUF1ZGlvUG9vbC5sZW5ndGgpIHtcclxuXHRcdFx0XHRyZXR1cm4gc2VsZi5faHRtbDVBdWRpb1Bvb2wucG9wKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vLkNoZWNrIGlmIHRoZSBhdWRpbyBpcyBsb2NrZWQgYW5kIHRocm93IGEgd2FybmluZy5cclxuXHRcdFx0dmFyIHRlc3RQbGF5ID0gbmV3IEF1ZGlvKCkucGxheSgpO1xyXG5cdFx0XHRpZiAodGVzdFBsYXkgJiYgdHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmICh0ZXN0UGxheSBpbnN0YW5jZW9mIFByb21pc2UgfHwgdHlwZW9mIHRlc3RQbGF5LnRoZW4gPT09ICdmdW5jdGlvbicpKSB7XHJcblx0XHRcdFx0dGVzdFBsYXkuY2F0Y2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLndhcm4oJ0hUTUw1IEF1ZGlvIHBvb2wgZXhoYXVzdGVkLCByZXR1cm5pbmcgcG90ZW50aWFsbHkgbG9ja2VkIGF1ZGlvIG9iamVjdC4nKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIG5ldyBBdWRpbygpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFJldHVybiBhbiBhY3RpdmF0ZWQgSFRNTDUgQXVkaW8gb2JqZWN0IHRvIHRoZSBwb29sLlxyXG5cdFx0ICogQHJldHVybiB7SG93bGVyfVxyXG5cdFx0ICovXHJcblx0XHRfcmVsZWFzZUh0bWw1QXVkaW86IGZ1bmN0aW9uKGF1ZGlvKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XHJcblxyXG5cdFx0XHQvLyBEb24ndCBhZGQgYXVkaW8gdG8gdGhlIHBvb2wgaWYgd2UgZG9uJ3Qga25vdyBpZiBpdCBoYXMgYmVlbiB1bmxvY2tlZC5cclxuXHRcdFx0aWYgKGF1ZGlvLl91bmxvY2tlZCkge1xyXG5cdFx0XHRcdHNlbGYuX2h0bWw1QXVkaW9Qb29sLnB1c2goYXVkaW8pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdH0sXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBdXRvbWF0aWNhbGx5IHN1c3BlbmQgdGhlIFdlYiBBdWRpbyBBdWRpb0NvbnRleHQgYWZ0ZXIgbm8gc291bmQgaGFzIHBsYXllZCBmb3IgMzAgc2Vjb25kcy5cclxuXHRcdCAqIFRoaXMgc2F2ZXMgcHJvY2Vzc2luZy9lbmVyZ3kgYW5kIGZpeGVzIHZhcmlvdXMgYnJvd3Nlci1zcGVjaWZpYyBidWdzIHdpdGggYXVkaW8gZ2V0dGluZyBzdHVjay5cclxuXHRcdCAqIEByZXR1cm4ge0hvd2xlcn1cclxuXHRcdCAqL1xyXG5cdFx0X2F1dG9TdXNwZW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdFx0aWYgKCFzZWxmLmF1dG9TdXNwZW5kIHx8ICFzZWxmLmN0eCB8fCB0eXBlb2Ygc2VsZi5jdHguc3VzcGVuZCA9PT0gJ3VuZGVmaW5lZCcgfHwgIUhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiBhbnkgc291bmRzIGFyZSBwbGF5aW5nLlxyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYgKHNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xyXG5cdFx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBzZWxmLl9ob3dsc1tpXS5fc291bmRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdGlmICghc2VsZi5faG93bHNbaV0uX3NvdW5kc1tqXS5fcGF1c2VkKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChzZWxmLl9zdXNwZW5kVGltZXIpIHtcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgbm8gc291bmQgaGFzIHBsYXllZCBhZnRlciAzMCBzZWNvbmRzLCBzdXNwZW5kIHRoZSBjb250ZXh0LlxyXG5cdFx0XHRzZWxmLl9zdXNwZW5kVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICghc2VsZi5hdXRvU3VzcGVuZCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0c2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcclxuXHRcdFx0XHRzZWxmLnN0YXRlID0gJ3N1c3BlbmRpbmcnO1xyXG5cdFx0XHRcdHNlbGYuY3R4LnN1c3BlbmQoKS50aGVuKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0c2VsZi5zdGF0ZSA9ICdzdXNwZW5kZWQnO1xyXG5cclxuXHRcdFx0XHRcdGlmIChzZWxmLl9yZXN1bWVBZnRlclN1c3BlbmQpIHtcclxuXHRcdFx0XHRcdFx0ZGVsZXRlIHNlbGYuX3Jlc3VtZUFmdGVyU3VzcGVuZDtcclxuXHRcdFx0XHRcdFx0c2VsZi5fYXV0b1Jlc3VtZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9LCAzMDAwMCk7XHJcblxyXG5cdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdH0sXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBdXRvbWF0aWNhbGx5IHJlc3VtZSB0aGUgV2ViIEF1ZGlvIEF1ZGlvQ29udGV4dCB3aGVuIGEgbmV3IHNvdW5kIGlzIHBsYXllZC5cclxuXHRcdCAqIEByZXR1cm4ge0hvd2xlcn1cclxuXHRcdCAqL1xyXG5cdFx0X2F1dG9SZXN1bWU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0XHRpZiAoIXNlbGYuY3R4IHx8IHR5cGVvZiBzZWxmLmN0eC5yZXN1bWUgPT09ICd1bmRlZmluZWQnIHx8ICFIb3dsZXIudXNpbmdXZWJBdWRpbykge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHNlbGYuc3RhdGUgPT09ICdydW5uaW5nJyAmJiBzZWxmLl9zdXNwZW5kVGltZXIpIHtcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcclxuXHRcdFx0XHRzZWxmLl9zdXNwZW5kVGltZXIgPSBudWxsO1xyXG5cdFx0XHR9IGVsc2UgaWYgKHNlbGYuc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7XHJcblx0XHRcdFx0c2VsZi5jdHgucmVzdW1lKCkudGhlbihmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHNlbGYuc3RhdGUgPSAncnVubmluZyc7XHJcblxyXG5cdFx0XHRcdFx0Ly8gRW1pdCB0byBhbGwgSG93bHMgdGhhdCB0aGUgYXVkaW8gaGFzIHJlc3VtZWQuXHJcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX2hvd2xzW2ldLl9lbWl0KCdyZXN1bWUnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0aWYgKHNlbGYuX3N1c3BlbmRUaW1lcikge1xyXG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHNlbGYuX3N1c3BlbmRUaW1lcik7XHJcblx0XHRcdFx0XHRzZWxmLl9zdXNwZW5kVGltZXIgPSBudWxsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChzZWxmLnN0YXRlID09PSAnc3VzcGVuZGluZycpIHtcclxuXHRcdFx0XHRzZWxmLl9yZXN1bWVBZnRlclN1c3BlbmQgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBTZXR1cCB0aGUgZ2xvYmFsIGF1ZGlvIGNvbnRyb2xsZXIuXHJcblx0dmFyIEhvd2xlciA9IG5ldyBIb3dsZXJHbG9iYWwoKTtcclxuXHJcblx0LyoqIEdyb3VwIE1ldGhvZHMgKiovXHJcblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcblx0LyoqXHJcblx0ICogQ3JlYXRlIGFuIGF1ZGlvIGdyb3VwIGNvbnRyb2xsZXIuXHJcblx0ICogQHBhcmFtIHtPYmplY3R9IG8gUGFzc2VkIGluIHByb3BlcnRpZXMgZm9yIHRoaXMgZ3JvdXAuXHJcblx0ICovXHJcblx0dmFyIEhvd2wgPSBmdW5jdGlvbihvKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0Ly8gVGhyb3cgYW4gZXJyb3IgaWYgbm8gc291cmNlIGlzIHByb3ZpZGVkLlxyXG5cdFx0aWYgKCFvLnNyYyB8fCBvLnNyYy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignQW4gYXJyYXkgb2Ygc291cmNlIGZpbGVzIG11c3QgYmUgcGFzc2VkIHdpdGggYW55IG5ldyBIb3dsLicpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0c2VsZi5pbml0KG8pO1xyXG5cdH07XHJcblx0SG93bC5wcm90b3R5cGUgPSB7XHJcblx0XHQvKipcclxuXHRcdCAqIEluaXRpYWxpemUgYSBuZXcgSG93bCBncm91cCBvYmplY3QuXHJcblx0XHQgKiBAcGFyYW0gIHtPYmplY3R9IG8gUGFzc2VkIGluIHByb3BlcnRpZXMgZm9yIHRoaXMgZ3JvdXAuXHJcblx0XHQgKiBAcmV0dXJuIHtIb3dsfVxyXG5cdFx0ICovXHJcblx0XHRpbml0OiBmdW5jdGlvbihvKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRcdC8vIElmIHdlIGRvbid0IGhhdmUgYW4gQXVkaW9Db250ZXh0IGNyZWF0ZWQgeWV0LCBydW4gdGhlIHNldHVwLlxyXG5cdFx0XHRpZiAoIUhvd2xlci5jdHgpIHtcclxuXHRcdFx0XHRzZXR1cEF1ZGlvQ29udGV4dCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxyXG5cdFx0XHRzZWxmLl9hdXRvcGxheSA9IG8uYXV0b3BsYXkgfHwgZmFsc2U7XHJcblx0XHRcdHNlbGYuX2Zvcm1hdCA9ICh0eXBlb2Ygby5mb3JtYXQgIT09ICdzdHJpbmcnKSA/IG8uZm9ybWF0IDogW28uZm9ybWF0XTtcclxuXHRcdFx0c2VsZi5faHRtbDUgPSBvLmh0bWw1IHx8IGZhbHNlO1xyXG5cdFx0XHRzZWxmLl9tdXRlZCA9IG8ubXV0ZSB8fCBmYWxzZTtcclxuXHRcdFx0c2VsZi5fbG9vcCA9IG8ubG9vcCB8fCBmYWxzZTtcclxuXHRcdFx0c2VsZi5fcG9vbCA9IG8ucG9vbCB8fCA1O1xyXG5cdFx0XHRzZWxmLl9wcmVsb2FkID0gKHR5cGVvZiBvLnByZWxvYWQgPT09ICdib29sZWFuJykgPyBvLnByZWxvYWQgOiB0cnVlO1xyXG5cdFx0XHRzZWxmLl9yYXRlID0gby5yYXRlIHx8IDE7XHJcblx0XHRcdHNlbGYuX3Nwcml0ZSA9IG8uc3ByaXRlIHx8IHt9O1xyXG5cdFx0XHRzZWxmLl9zcmMgPSAodHlwZW9mIG8uc3JjICE9PSAnc3RyaW5nJykgPyBvLnNyYyA6IFtvLnNyY107XHJcblx0XHRcdHNlbGYuX3ZvbHVtZSA9IG8udm9sdW1lICE9PSB1bmRlZmluZWQgPyBvLnZvbHVtZSA6IDE7XHJcblx0XHRcdHNlbGYuX3hocldpdGhDcmVkZW50aWFscyA9IG8ueGhyV2l0aENyZWRlbnRpYWxzIHx8IGZhbHNlO1xyXG5cclxuXHRcdFx0Ly8gU2V0dXAgYWxsIG90aGVyIGRlZmF1bHQgcHJvcGVydGllcy5cclxuXHRcdFx0c2VsZi5fZHVyYXRpb24gPSAwO1xyXG5cdFx0XHRzZWxmLl9zdGF0ZSA9ICd1bmxvYWRlZCc7XHJcblx0XHRcdHNlbGYuX3NvdW5kcyA9IFtdO1xyXG5cdFx0XHRzZWxmLl9lbmRUaW1lcnMgPSB7fTtcclxuXHRcdFx0c2VsZi5fcXVldWUgPSBbXTtcclxuXHRcdFx0c2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcclxuXHJcblx0XHRcdC8vIFNldHVwIGV2ZW50IGxpc3RlbmVycy5cclxuXHRcdFx0c2VsZi5fb25lbmQgPSBvLm9uZW5kID8gW3tcclxuXHRcdFx0XHRmbjogby5vbmVuZFxyXG5cdFx0XHR9XSA6IFtdO1xyXG5cdFx0XHRzZWxmLl9vbmZhZGUgPSBvLm9uZmFkZSA/IFt7XHJcblx0XHRcdFx0Zm46IG8ub25mYWRlXHJcblx0XHRcdH1dIDogW107XHJcblx0XHRcdHNlbGYuX29ubG9hZCA9IG8ub25sb2FkID8gW3tcclxuXHRcdFx0XHRmbjogby5vbmxvYWRcclxuXHRcdFx0fV0gOiBbXTtcclxuXHRcdFx0c2VsZi5fb25sb2FkZXJyb3IgPSBvLm9ubG9hZGVycm9yID8gW3tcclxuXHRcdFx0XHRmbjogby5vbmxvYWRlcnJvclxyXG5cdFx0XHR9XSA6IFtdO1xyXG5cdFx0XHRzZWxmLl9vbnBsYXllcnJvciA9IG8ub25wbGF5ZXJyb3IgPyBbe1xyXG5cdFx0XHRcdGZuOiBvLm9ucGxheWVycm9yXHJcblx0XHRcdH1dIDogW107XHJcblx0XHRcdHNlbGYuX29ucGF1c2UgPSBvLm9ucGF1c2UgPyBbe1xyXG5cdFx0XHRcdGZuOiBvLm9ucGF1c2VcclxuXHRcdFx0fV0gOiBbXTtcclxuXHRcdFx0c2VsZi5fb25wbGF5ID0gby5vbnBsYXkgPyBbe1xyXG5cdFx0XHRcdGZuOiBvLm9ucGxheVxyXG5cdFx0XHR9XSA6IFtdO1xyXG5cdFx0XHRzZWxmLl9vbnN0b3AgPSBvLm9uc3RvcCA/IFt7XHJcblx0XHRcdFx0Zm46IG8ub25zdG9wXHJcblx0XHRcdH1dIDogW107XHJcblx0XHRcdHNlbGYuX29ubXV0ZSA9IG8ub25tdXRlID8gW3tcclxuXHRcdFx0XHRmbjogby5vbm11dGVcclxuXHRcdFx0fV0gOiBbXTtcclxuXHRcdFx0c2VsZi5fb252b2x1bWUgPSBvLm9udm9sdW1lID8gW3tcclxuXHRcdFx0XHRmbjogby5vbnZvbHVtZVxyXG5cdFx0XHR9XSA6IFtdO1xyXG5cdFx0XHRzZWxmLl9vbnJhdGUgPSBvLm9ucmF0ZSA/IFt7XHJcblx0XHRcdFx0Zm46IG8ub25yYXRlXHJcblx0XHRcdH1dIDogW107XHJcblx0XHRcdHNlbGYuX29uc2VlayA9IG8ub25zZWVrID8gW3tcclxuXHRcdFx0XHRmbjogby5vbnNlZWtcclxuXHRcdFx0fV0gOiBbXTtcclxuXHRcdFx0c2VsZi5fb251bmxvY2sgPSBvLm9udW5sb2NrID8gW3tcclxuXHRcdFx0XHRmbjogby5vbnVubG9ja1xyXG5cdFx0XHR9XSA6IFtdO1xyXG5cdFx0XHRzZWxmLl9vbnJlc3VtZSA9IFtdO1xyXG5cclxuXHRcdFx0Ly8gV2ViIEF1ZGlvIG9yIEhUTUw1IEF1ZGlvP1xyXG5cdFx0XHRzZWxmLl93ZWJBdWRpbyA9IEhvd2xlci51c2luZ1dlYkF1ZGlvICYmICFzZWxmLl9odG1sNTtcclxuXHJcblx0XHRcdC8vIEF1dG9tYXRpY2FsbHkgdHJ5IHRvIGVuYWJsZSBhdWRpby5cclxuXHRcdFx0aWYgKHR5cGVvZiBIb3dsZXIuY3R4ICE9PSAndW5kZWZpbmVkJyAmJiBIb3dsZXIuY3R4ICYmIEhvd2xlci5hdXRvVW5sb2NrKSB7XHJcblx0XHRcdFx0SG93bGVyLl91bmxvY2tBdWRpbygpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBLZWVwIHRyYWNrIG9mIHRoaXMgSG93bCBncm91cCBpbiB0aGUgZ2xvYmFsIGNvbnRyb2xsZXIuXHJcblx0XHRcdEhvd2xlci5faG93bHMucHVzaChzZWxmKTtcclxuXHJcblx0XHRcdC8vIElmIHRoZXkgc2VsZWN0ZWQgYXV0b3BsYXksIGFkZCBhIHBsYXkgZXZlbnQgdG8gdGhlIGxvYWQgcXVldWUuXHJcblx0XHRcdGlmIChzZWxmLl9hdXRvcGxheSkge1xyXG5cdFx0XHRcdHNlbGYuX3F1ZXVlLnB1c2goe1xyXG5cdFx0XHRcdFx0ZXZlbnQ6ICdwbGF5JyxcclxuXHRcdFx0XHRcdGFjdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYucGxheSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBMb2FkIHRoZSBzb3VyY2UgZmlsZSB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cclxuXHRcdFx0aWYgKHNlbGYuX3ByZWxvYWQpIHtcclxuXHRcdFx0XHRzZWxmLmxvYWQoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogTG9hZCB0aGUgYXVkaW8gZmlsZS5cclxuXHRcdCAqIEByZXR1cm4ge0hvd2xlcn1cclxuXHRcdCAqL1xyXG5cdFx0bG9hZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0dmFyIHVybCA9IG51bGw7XHJcblxyXG5cdFx0XHQvLyBJZiBubyBhdWRpbyBpcyBhdmFpbGFibGUsIHF1aXQgaW1tZWRpYXRlbHkuXHJcblx0XHRcdGlmIChIb3dsZXIubm9BdWRpbykge1xyXG5cdFx0XHRcdHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdObyBhdWRpbyBzdXBwb3J0LicpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTWFrZSBzdXJlIG91ciBzb3VyY2UgaXMgaW4gYW4gYXJyYXkuXHJcblx0XHRcdGlmICh0eXBlb2Ygc2VsZi5fc3JjID09PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcdHNlbGYuX3NyYyA9IFtzZWxmLl9zcmNdO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBMb29wIHRocm91Z2ggdGhlIHNvdXJjZXMgYW5kIHBpY2sgdGhlIGZpcnN0IG9uZSB0aGF0IGlzIGNvbXBhdGlibGUuXHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5fc3JjLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dmFyIGV4dCwgc3RyO1xyXG5cclxuXHRcdFx0XHRpZiAoc2VsZi5fZm9ybWF0ICYmIHNlbGYuX2Zvcm1hdFtpXSkge1xyXG5cdFx0XHRcdFx0Ly8gSWYgYW4gZXh0ZW5zaW9uIHdhcyBzcGVjaWZpZWQsIHVzZSB0aGF0IGluc3RlYWQuXHJcblx0XHRcdFx0XHRleHQgPSBzZWxmLl9mb3JtYXRbaV07XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgc291cmNlIGlzIGEgc3RyaW5nLlxyXG5cdFx0XHRcdFx0c3RyID0gc2VsZi5fc3JjW2ldO1xyXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdOb24tc3RyaW5nIGZvdW5kIGluIHNlbGVjdGVkIGF1ZGlvIHNvdXJjZXMgLSBpZ25vcmluZy4nKTtcclxuXHRcdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gRXh0cmFjdCB0aGUgZmlsZSBleHRlbnNpb24gZnJvbSB0aGUgVVJMIG9yIGJhc2U2NCBkYXRhIFVSSS5cclxuXHRcdFx0XHRcdGV4dCA9IC9eZGF0YTphdWRpb1xcLyhbXjssXSspOy9pLmV4ZWMoc3RyKTtcclxuXHRcdFx0XHRcdGlmICghZXh0KSB7XHJcblx0XHRcdFx0XHRcdGV4dCA9IC9cXC4oW14uXSspJC8uZXhlYyhzdHIuc3BsaXQoJz8nLCAxKVswXSk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKGV4dCkge1xyXG5cdFx0XHRcdFx0XHRleHQgPSBleHRbMV0udG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIExvZyBhIHdhcm5pbmcgaWYgbm8gZXh0ZW5zaW9uIHdhcyBmb3VuZC5cclxuXHRcdFx0XHRpZiAoIWV4dCkge1xyXG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKCdObyBmaWxlIGV4dGVuc2lvbiB3YXMgZm91bmQuIENvbnNpZGVyIHVzaW5nIHRoZSBcImZvcm1hdFwiIHByb3BlcnR5IG9yIHNwZWNpZnkgYW4gZXh0ZW5zaW9uLicpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBleHRlbnNpb24gaXMgYXZhaWxhYmxlLlxyXG5cdFx0XHRcdGlmIChleHQgJiYgSG93bGVyLmNvZGVjcyhleHQpKSB7XHJcblx0XHRcdFx0XHR1cmwgPSBzZWxmLl9zcmNbaV07XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICghdXJsKSB7XHJcblx0XHRcdFx0c2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ05vIGNvZGVjIHN1cHBvcnQgZm9yIHNlbGVjdGVkIGF1ZGlvIHNvdXJjZXMuJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzZWxmLl9zcmMgPSB1cmw7XHJcblx0XHRcdHNlbGYuX3N0YXRlID0gJ2xvYWRpbmcnO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGhvc3RpbmcgcGFnZSBpcyBIVFRQUyBhbmQgdGhlIHNvdXJjZSBpc24ndCxcclxuXHRcdFx0Ly8gZHJvcCBkb3duIHRvIEhUTUw1IEF1ZGlvIHRvIGF2b2lkIE1peGVkIENvbnRlbnQgZXJyb3JzLlxyXG5cdFx0XHRpZiAod2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyAmJiB1cmwuc2xpY2UoMCwgNSkgPT09ICdodHRwOicpIHtcclxuXHRcdFx0XHRzZWxmLl9odG1sNSA9IHRydWU7XHJcblx0XHRcdFx0c2VsZi5fd2ViQXVkaW8gPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ3JlYXRlIGEgbmV3IHNvdW5kIG9iamVjdCBhbmQgYWRkIGl0IHRvIHRoZSBwb29sLlxyXG5cdFx0XHRuZXcgU291bmQoc2VsZik7XHJcblxyXG5cdFx0XHQvLyBMb2FkIGFuZCBkZWNvZGUgdGhlIGF1ZGlvIGRhdGEgZm9yIHBsYXliYWNrLlxyXG5cdFx0XHRpZiAoc2VsZi5fd2ViQXVkaW8pIHtcclxuXHRcdFx0XHRsb2FkQnVmZmVyKHNlbGYpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdH0sXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBQbGF5IGEgc291bmQgb3IgcmVzdW1lIHByZXZpb3VzIHBsYXliYWNrLlxyXG5cdFx0ICogQHBhcmFtICB7U3RyaW5nL051bWJlcn0gc3ByaXRlICAgU3ByaXRlIG5hbWUgZm9yIHNwcml0ZSBwbGF5YmFjayBvciBzb3VuZCBpZCB0byBjb250aW51ZSBwcmV2aW91cy5cclxuXHRcdCAqIEBwYXJhbSAge0Jvb2xlYW59IGludGVybmFsIEludGVybmFsIFVzZTogdHJ1ZSBwcmV2ZW50cyBldmVudCBmaXJpbmcuXHJcblx0XHQgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgIFNvdW5kIElELlxyXG5cdFx0ICovXHJcblx0XHRwbGF5OiBmdW5jdGlvbihzcHJpdGUsIGludGVybmFsKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0dmFyIGlkID0gbnVsbDtcclxuXHJcblx0XHRcdC8vIERldGVybWluZSBpZiBhIHNwcml0ZSwgc291bmQgaWQgb3Igbm90aGluZyB3YXMgcGFzc2VkXHJcblx0XHRcdGlmICh0eXBlb2Ygc3ByaXRlID09PSAnbnVtYmVyJykge1xyXG5cdFx0XHRcdGlkID0gc3ByaXRlO1xyXG5cdFx0XHRcdHNwcml0ZSA9IG51bGw7XHJcblx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ3N0cmluZycgJiYgc2VsZi5fc3RhdGUgPT09ICdsb2FkZWQnICYmICFzZWxmLl9zcHJpdGVbc3ByaXRlXSkge1xyXG5cdFx0XHRcdC8vIElmIHRoZSBwYXNzZWQgc3ByaXRlIGRvZXNuJ3QgZXhpc3QsIGRvIG5vdGhpbmcuXHJcblx0XHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHQvLyBVc2UgdGhlIGRlZmF1bHQgc291bmQgc3ByaXRlIChwbGF5cyB0aGUgZnVsbCBhdWRpbyBsZW5ndGgpLlxyXG5cdFx0XHRcdHNwcml0ZSA9ICdfX2RlZmF1bHQnO1xyXG5cclxuXHRcdFx0XHQvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHNpbmdsZSBwYXVzZWQgc291bmQgdGhhdCBpc24ndCBlbmRlZC4gXHJcblx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMsIHBsYXkgdGhhdCBzb3VuZC4gSWYgbm90LCBjb250aW51ZSBhcyB1c3VhbC4gIFxyXG5cdFx0XHRcdGlmICghc2VsZi5fcGxheUxvY2spIHtcclxuXHRcdFx0XHRcdHZhciBudW0gPSAwO1xyXG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdFx0aWYgKHNlbGYuX3NvdW5kc1tpXS5fcGF1c2VkICYmICFzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XHJcblx0XHRcdFx0XHRcdFx0bnVtKys7XHJcblx0XHRcdFx0XHRcdFx0aWQgPSBzZWxmLl9zb3VuZHNbaV0uX2lkO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKG51bSA9PT0gMSkge1xyXG5cdFx0XHRcdFx0XHRzcHJpdGUgPSBudWxsO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0aWQgPSBudWxsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gR2V0IHRoZSBzZWxlY3RlZCBub2RlLCBvciBnZXQgb25lIGZyb20gdGhlIHBvb2wuXHJcblx0XHRcdHZhciBzb3VuZCA9IGlkID8gc2VsZi5fc291bmRCeUlkKGlkKSA6IHNlbGYuX2luYWN0aXZlU291bmQoKTtcclxuXHJcblx0XHRcdC8vIElmIHRoZSBzb3VuZCBkb2Vzbid0IGV4aXN0LCBkbyBub3RoaW5nLlxyXG5cdFx0XHRpZiAoIXNvdW5kKSB7XHJcblx0XHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFNlbGVjdCB0aGUgc3ByaXRlIGRlZmluaXRpb24uXHJcblx0XHRcdGlmIChpZCAmJiAhc3ByaXRlKSB7XHJcblx0XHRcdFx0c3ByaXRlID0gc291bmQuX3Nwcml0ZSB8fCAnX19kZWZhdWx0JztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIHdlIG11c3Qgd2FpdCB0byBnZXQgdGhlIGF1ZGlvJ3MgZHVyYXRpb24uXHJcblx0XHRcdC8vIFdlIGFsc28gbmVlZCB0byB3YWl0IHRvIG1ha2Ugc3VyZSB3ZSBkb24ndCBydW4gaW50byByYWNlIGNvbmRpdGlvbnMgd2l0aFxyXG5cdFx0XHQvLyB0aGUgb3JkZXIgb2YgZnVuY3Rpb24gY2FsbHMuXHJcblx0XHRcdGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcclxuXHRcdFx0XHQvLyBTZXQgdGhlIHNwcml0ZSB2YWx1ZSBvbiB0aGlzIHNvdW5kLlxyXG5cdFx0XHRcdHNvdW5kLl9zcHJpdGUgPSBzcHJpdGU7XHJcblxyXG5cdFx0XHRcdC8vIE1hcmsgdGhpcyBzb3VuZCBhcyBub3QgZW5kZWQgaW4gY2FzZSBhbm90aGVyIHNvdW5kIGlzIHBsYXllZCBiZWZvcmUgdGhpcyBvbmUgbG9hZHMuXHJcblx0XHRcdFx0c291bmQuX2VuZGVkID0gZmFsc2U7XHJcblxyXG5cdFx0XHRcdC8vIEFkZCB0aGUgc291bmQgdG8gdGhlIHF1ZXVlIHRvIGJlIHBsYXllZCBvbiBsb2FkLlxyXG5cdFx0XHRcdHZhciBzb3VuZElkID0gc291bmQuX2lkO1xyXG5cdFx0XHRcdHNlbGYuX3F1ZXVlLnB1c2goe1xyXG5cdFx0XHRcdFx0ZXZlbnQ6ICdwbGF5JyxcclxuXHRcdFx0XHRcdGFjdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYucGxheShzb3VuZElkKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHNvdW5kSWQ7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIERvbid0IHBsYXkgdGhlIHNvdW5kIGlmIGFuIGlkIHdhcyBwYXNzZWQgYW5kIGl0IGlzIGFscmVhZHkgcGxheWluZy5cclxuXHRcdFx0aWYgKGlkICYmICFzb3VuZC5fcGF1c2VkKSB7XHJcblx0XHRcdFx0Ly8gVHJpZ2dlciB0aGUgcGxheSBldmVudCwgaW4gb3JkZXIgdG8ga2VlcCBpdGVyYXRpbmcgdGhyb3VnaCBxdWV1ZS5cclxuXHRcdFx0XHRpZiAoIWludGVybmFsKSB7XHJcblx0XHRcdFx0XHRzZWxmLl9sb2FkUXVldWUoJ3BsYXknKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybiBzb3VuZC5faWQ7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgQXVkaW9Db250ZXh0IGlzbid0IHN1c3BlbmRlZCwgYW5kIHJlc3VtZSBpdCBpZiBpdCBpcy5cclxuXHRcdFx0aWYgKHNlbGYuX3dlYkF1ZGlvKSB7XHJcblx0XHRcdFx0SG93bGVyLl9hdXRvUmVzdW1lKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIERldGVybWluZSBob3cgbG9uZyB0byBwbGF5IGZvciBhbmQgd2hlcmUgdG8gc3RhcnQgcGxheWluZy5cclxuXHRcdFx0dmFyIHNlZWsgPSBNYXRoLm1heCgwLCBzb3VuZC5fc2VlayA+IDAgPyBzb3VuZC5fc2VlayA6IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdIC8gMTAwMCk7XHJcblx0XHRcdHZhciBkdXJhdGlvbiA9IE1hdGgubWF4KDAsICgoc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gKyBzZWxmLl9zcHJpdGVbc3ByaXRlXVsxXSkgLyAxMDAwKSAtIHNlZWspO1xyXG5cdFx0XHR2YXIgdGltZW91dCA9IChkdXJhdGlvbiAqIDEwMDApIC8gTWF0aC5hYnMoc291bmQuX3JhdGUpO1xyXG5cdFx0XHR2YXIgc3RhcnQgPSBzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSAvIDEwMDA7XHJcblx0XHRcdHZhciBzdG9wID0gKHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdICsgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMV0pIC8gMTAwMDtcclxuXHRcdFx0dmFyIGxvb3AgPSAhIShzb3VuZC5fbG9vcCB8fCBzZWxmLl9zcHJpdGVbc3ByaXRlXVsyXSk7XHJcblx0XHRcdHNvdW5kLl9zcHJpdGUgPSBzcHJpdGU7XHJcblxyXG5cdFx0XHQvLyBNYXJrIHRoZSBzb3VuZCBhcyBlbmRlZCBpbnN0YW50bHkgc28gdGhhdCB0aGlzIGFzeW5jIHBsYXliYWNrXHJcblx0XHRcdC8vIGRvZXNuJ3QgZ2V0IGdyYWJiZWQgYnkgYW5vdGhlciBjYWxsIHRvIHBsYXkgd2hpbGUgdGhpcyBvbmUgd2FpdHMgdG8gc3RhcnQuXHJcblx0XHRcdHNvdW5kLl9lbmRlZCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0Ly8gVXBkYXRlIHRoZSBwYXJhbWV0ZXJzIG9mIHRoZSBzb3VuZC5cclxuXHRcdFx0dmFyIHNldFBhcmFtcyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNvdW5kLl9wYXVzZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRzb3VuZC5fc2VlayA9IHNlZWs7XHJcblx0XHRcdFx0c291bmQuX3N0YXJ0ID0gc3RhcnQ7XHJcblx0XHRcdFx0c291bmQuX3N0b3AgPSBzdG9wO1xyXG5cdFx0XHRcdHNvdW5kLl9sb29wID0gbG9vcDtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdC8vIEVuZCB0aGUgc291bmQgaW5zdGFudGx5IGlmIHNlZWsgaXMgYXQgdGhlIGVuZC5cclxuXHRcdFx0aWYgKHNlZWsgPj0gc3RvcCkge1xyXG5cdFx0XHRcdHNlbGYuX2VuZGVkKHNvdW5kKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEJlZ2luIHRoZSBhY3R1YWwgcGxheWJhY2suXHJcblx0XHRcdHZhciBub2RlID0gc291bmQuX25vZGU7XHJcblx0XHRcdGlmIChzZWxmLl93ZWJBdWRpbykge1xyXG5cdFx0XHRcdC8vIEZpcmUgdGhpcyB3aGVuIHRoZSBzb3VuZCBpcyByZWFkeSB0byBwbGF5IHRvIGJlZ2luIFdlYiBBdWRpbyBwbGF5YmFjay5cclxuXHRcdFx0XHR2YXIgcGxheVdlYkF1ZGlvID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0c2V0UGFyYW1zKCk7XHJcblx0XHRcdFx0XHRzZWxmLl9yZWZyZXNoQnVmZmVyKHNvdW5kKTtcclxuXHJcblx0XHRcdFx0XHQvLyBTZXR1cCB0aGUgcGxheWJhY2sgcGFyYW1zLlxyXG5cdFx0XHRcdFx0dmFyIHZvbCA9IChzb3VuZC5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQpID8gMCA6IHNvdW5kLl92b2x1bWU7XHJcblx0XHRcdFx0XHRub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcclxuXHRcdFx0XHRcdHNvdW5kLl9wbGF5U3RhcnQgPSBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lO1xyXG5cclxuXHRcdFx0XHRcdC8vIFBsYXkgdGhlIHNvdW5kIHVzaW5nIHRoZSBzdXBwb3J0ZWQgbWV0aG9kLlxyXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBub2RlLmJ1ZmZlclNvdXJjZS5zdGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRcdFx0c291bmQuX2xvb3AgPyBub2RlLmJ1ZmZlclNvdXJjZS5ub3RlR3JhaW5PbigwLCBzZWVrLCA4NjQwMCkgOiBub2RlLmJ1ZmZlclNvdXJjZS5ub3RlR3JhaW5PbigwLCBzZWVrLCBkdXJhdGlvbik7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRzb3VuZC5fbG9vcCA/IG5vZGUuYnVmZmVyU291cmNlLnN0YXJ0KDAsIHNlZWssIDg2NDAwKSA6IG5vZGUuYnVmZmVyU291cmNlLnN0YXJ0KDAsIHNlZWssIGR1cmF0aW9uKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBTdGFydCBhIG5ldyB0aW1lciBpZiBub25lIGlzIHByZXNlbnQuXHJcblx0XHRcdFx0XHRpZiAodGltZW91dCAhPT0gSW5maW5pdHkpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoIWludGVybmFsKSB7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fbG9hZFF1ZXVlKCk7XHJcblx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdGlmIChIb3dsZXIuc3RhdGUgPT09ICdydW5uaW5nJykge1xyXG5cdFx0XHRcdFx0cGxheVdlYkF1ZGlvKCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHNlbGYuX3BsYXlMb2NrID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0XHQvLyBXYWl0IGZvciB0aGUgYXVkaW8gY29udGV4dCB0byByZXN1bWUgYmVmb3JlIHBsYXlpbmcuXHJcblx0XHRcdFx0XHRzZWxmLm9uY2UoJ3Jlc3VtZScsIHBsYXlXZWJBdWRpbyk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ2FuY2VsIHRoZSBlbmQgdGltZXIuXHJcblx0XHRcdFx0XHRzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIEZpcmUgdGhpcyB3aGVuIHRoZSBzb3VuZCBpcyByZWFkeSB0byBwbGF5IHRvIGJlZ2luIEhUTUw1IEF1ZGlvIHBsYXliYWNrLlxyXG5cdFx0XHRcdHZhciBwbGF5SHRtbDUgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdG5vZGUuY3VycmVudFRpbWUgPSBzZWVrO1xyXG5cdFx0XHRcdFx0bm9kZS5tdXRlZCA9IHNvdW5kLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCB8fCBIb3dsZXIuX211dGVkIHx8IG5vZGUubXV0ZWQ7XHJcblx0XHRcdFx0XHRub2RlLnZvbHVtZSA9IHNvdW5kLl92b2x1bWUgKiBIb3dsZXIudm9sdW1lKCk7XHJcblx0XHRcdFx0XHRub2RlLnBsYXliYWNrUmF0ZSA9IHNvdW5kLl9yYXRlO1xyXG5cclxuXHRcdFx0XHRcdC8vIFNvbWUgYnJvd3NlcnMgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGlzIGlzIGNhbGxlZCB3aXRob3V0IHVzZXIgaW50ZXJhY3Rpb24uXHJcblx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHR2YXIgcGxheSA9IG5vZGUucGxheSgpO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydCBvbGRlciBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgcHJvbWlzZXMsIGFuZCB0aHVzIGRvbid0IGhhdmUgdGhpcyBpc3N1ZS5cclxuXHRcdFx0XHRcdFx0aWYgKHBsYXkgJiYgdHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmIChwbGF5IGluc3RhbmNlb2YgUHJvbWlzZSB8fCB0eXBlb2YgcGxheS50aGVuID09PSAnZnVuY3Rpb24nKSkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIEltcGxlbWVudHMgYSBsb2NrIHRvIHByZXZlbnQgRE9NRXhjZXB0aW9uOiBUaGUgcGxheSgpIHJlcXVlc3Qgd2FzIGludGVycnVwdGVkIGJ5IGEgY2FsbCB0byBwYXVzZSgpLlxyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX3BsYXlMb2NrID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gU2V0IHBhcmFtIHZhbHVlcyBpbW1lZGlhdGVseS5cclxuXHRcdFx0XHRcdFx0XHRzZXRQYXJhbXMoKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gUmVsZWFzZXMgdGhlIGxvY2sgYW5kIGV4ZWN1dGVzIHF1ZXVlZCBhY3Rpb25zLlxyXG5cdFx0XHRcdFx0XHRcdHBsYXlcclxuXHRcdFx0XHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRub2RlLl91bmxvY2tlZCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghaW50ZXJuYWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl9sb2FkUXVldWUoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdFx0XHRcdC5jYXRjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fZW1pdCgncGxheWVycm9yJywgc291bmQuX2lkLCAnUGxheWJhY2sgd2FzIHVuYWJsZSB0byBzdGFydC4gVGhpcyBpcyBtb3N0IGNvbW1vbmx5IGFuIGlzc3VlICcgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCdvbiBtb2JpbGUgZGV2aWNlcyBhbmQgQ2hyb21lIHdoZXJlIHBsYXliYWNrIHdhcyBub3Qgd2l0aGluIGEgdXNlciBpbnRlcmFjdGlvbi4nKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlc2V0IHRoZSBlbmRlZCBhbmQgcGF1c2VkIHZhbHVlcy5cclxuXHRcdFx0XHRcdFx0XHRcdFx0c291bmQuX2VuZGVkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c291bmQuX3BhdXNlZCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICghaW50ZXJuYWwpIHtcclxuXHRcdFx0XHRcdFx0XHRzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdHNldFBhcmFtcygpO1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX2xvYWRRdWV1ZSgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBTZXR0aW5nIHJhdGUgYmVmb3JlIHBsYXlpbmcgd29uJ3Qgd29yayBpbiBJRSwgc28gd2Ugc2V0IGl0IGFnYWluIGhlcmUuXHJcblx0XHRcdFx0XHRcdG5vZGUucGxheWJhY2tSYXRlID0gc291bmQuX3JhdGU7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBJZiB0aGUgbm9kZSBpcyBzdGlsbCBwYXVzZWQsIHRoZW4gd2UgY2FuIGFzc3VtZSB0aGVyZSB3YXMgYSBwbGF5YmFjayBpc3N1ZS5cclxuXHRcdFx0XHRcdFx0aWYgKG5vZGUucGF1c2VkKSB7XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fZW1pdCgncGxheWVycm9yJywgc291bmQuX2lkLCAnUGxheWJhY2sgd2FzIHVuYWJsZSB0byBzdGFydC4gVGhpcyBpcyBtb3N0IGNvbW1vbmx5IGFuIGlzc3VlICcgK1xyXG5cdFx0XHRcdFx0XHRcdFx0J29uIG1vYmlsZSBkZXZpY2VzIGFuZCBDaHJvbWUgd2hlcmUgcGxheWJhY2sgd2FzIG5vdCB3aXRoaW4gYSB1c2VyIGludGVyYWN0aW9uLicpO1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0Ly8gU2V0dXAgdGhlIGVuZCB0aW1lciBvbiBzcHJpdGVzIG9yIGxpc3RlbiBmb3IgdGhlIGVuZGVkIGV2ZW50LlxyXG5cdFx0XHRcdFx0XHRpZiAoc3ByaXRlICE9PSAnX19kZWZhdWx0JyB8fCBzb3VuZC5fbG9vcCkge1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEZpcmUgZW5kZWQgb24gdGhpcyBhdWRpbyBub2RlLlxyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5fZW5kZWQoc291bmQpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdC8vIENsZWFyIHRoaXMgbGlzdGVuZXIuXHJcblx0XHRcdFx0XHRcdFx0XHRub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0sIGZhbHNlKTtcclxuXHRcdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHRcdG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSwgZmFsc2UpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZW1pdCgncGxheWVycm9yJywgc291bmQuX2lkLCBlcnIpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdC8vIFBsYXkgaW1tZWRpYXRlbHkgaWYgcmVhZHksIG9yIHdhaXQgZm9yIHRoZSAnY2FucGxheXRocm91Z2gnZSB2ZW50LlxyXG5cdFx0XHRcdHZhciBsb2FkZWROb1JlYWR5U3RhdGUgPSAod2luZG93ICYmIHdpbmRvdy5lamVjdGEpIHx8ICghbm9kZS5yZWFkeVN0YXRlICYmIEhvd2xlci5fbmF2aWdhdG9yLmlzQ29jb29uSlMpO1xyXG5cdFx0XHRcdGlmIChub2RlLnJlYWR5U3RhdGUgPj0gMyB8fCBsb2FkZWROb1JlYWR5U3RhdGUpIHtcclxuXHRcdFx0XHRcdHBsYXlIdG1sNSgpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRzZWxmLl9wbGF5TG9jayA9IHRydWU7XHJcblxyXG5cdFx0XHRcdFx0dmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdC8vIEJlZ2luIHBsYXliYWNrLlxyXG5cdFx0XHRcdFx0XHRwbGF5SHRtbDUoKTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIENsZWFyIHRoaXMgbGlzdGVuZXIuXHJcblx0XHRcdFx0XHRcdG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRub2RlLmFkZEV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIGxpc3RlbmVyLCBmYWxzZSk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ2FuY2VsIHRoZSBlbmQgdGltZXIuXHJcblx0XHRcdFx0XHRzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gc291bmQuX2lkO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFBhdXNlIHBsYXliYWNrIGFuZCBzYXZlIGN1cnJlbnQgcG9zaXRpb24uXHJcblx0XHQgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRCAoZW1wdHkgdG8gcGF1c2UgYWxsIGluIGdyb3VwKS5cclxuXHRcdCAqIEByZXR1cm4ge0hvd2x9XHJcblx0XHQgKi9cclxuXHRcdHBhdXNlOiBmdW5jdGlvbihpZCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCBvciBhIHBsYXkoKSBwcm9taXNlIGlzIHBlbmRpbmcsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBwYXVzZSB3aGVuIGNhcGFibGUuXHJcblx0XHRcdGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcclxuXHRcdFx0XHRzZWxmLl9xdWV1ZS5wdXNoKHtcclxuXHRcdFx0XHRcdGV2ZW50OiAncGF1c2UnLFxyXG5cdFx0XHRcdFx0YWN0aW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5wYXVzZShpZCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBwYXVzZWQuXHJcblx0XHRcdHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XHJcblxyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdC8vIENsZWFyIHRoZSBlbmQgdGltZXIuXHJcblx0XHRcdFx0c2VsZi5fY2xlYXJUaW1lcihpZHNbaV0pO1xyXG5cclxuXHRcdFx0XHQvLyBHZXQgdGhlIHNvdW5kLlxyXG5cdFx0XHRcdHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xyXG5cclxuXHRcdFx0XHRpZiAoc291bmQgJiYgIXNvdW5kLl9wYXVzZWQpIHtcclxuXHRcdFx0XHRcdC8vIFJlc2V0IHRoZSBzZWVrIHBvc2l0aW9uLlxyXG5cdFx0XHRcdFx0c291bmQuX3NlZWsgPSBzZWxmLnNlZWsoaWRzW2ldKTtcclxuXHRcdFx0XHRcdHNvdW5kLl9yYXRlU2VlayA9IDA7XHJcblx0XHRcdFx0XHRzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0XHQvLyBTdG9wIGN1cnJlbnRseSBydW5uaW5nIGZhZGVzLlxyXG5cdFx0XHRcdFx0c2VsZi5fc3RvcEZhZGUoaWRzW2ldKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoc291bmQuX25vZGUpIHtcclxuXHRcdFx0XHRcdFx0aWYgKHNlbGYuX3dlYkF1ZGlvKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRoZSBzb3VuZCBoYXMgYmVlbiBjcmVhdGVkLlxyXG5cdFx0XHRcdFx0XHRcdGlmICghc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmICh0eXBlb2Ygc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AgPT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uubm90ZU9mZigwKTtcclxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0c291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AoMCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBDbGVhbiB1cCB0aGUgYnVmZmVyIHNvdXJjZS5cclxuXHRcdFx0XHRcdFx0XHRzZWxmLl9jbGVhbkJ1ZmZlcihzb3VuZC5fbm9kZSk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIWlzTmFOKHNvdW5kLl9ub2RlLmR1cmF0aW9uKSB8fCBzb3VuZC5fbm9kZS5kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcclxuXHRcdFx0XHRcdFx0XHRzb3VuZC5fbm9kZS5wYXVzZSgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBGaXJlIHRoZSBwYXVzZSBldmVudCwgdW5sZXNzIGB0cnVlYCBpcyBwYXNzZWQgYXMgdGhlIDJuZCBhcmd1bWVudC5cclxuXHRcdFx0XHRpZiAoIWFyZ3VtZW50c1sxXSkge1xyXG5cdFx0XHRcdFx0c2VsZi5fZW1pdCgncGF1c2UnLCBzb3VuZCA/IHNvdW5kLl9pZCA6IG51bGwpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogU3RvcCBwbGF5YmFjayBhbmQgcmVzZXQgdG8gc3RhcnQuXHJcblx0XHQgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRCAoZW1wdHkgdG8gc3RvcCBhbGwgaW4gZ3JvdXApLlxyXG5cdFx0ICogQHBhcmFtICB7Qm9vbGVhbn0gaW50ZXJuYWwgSW50ZXJuYWwgVXNlOiB0cnVlIHByZXZlbnRzIGV2ZW50IGZpcmluZy5cclxuXHRcdCAqIEByZXR1cm4ge0hvd2x9XHJcblx0XHQgKi9cclxuXHRcdHN0b3A6IGZ1bmN0aW9uKGlkLCBpbnRlcm5hbCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIHN0b3Agd2hlbiBjYXBhYmxlLlxyXG5cdFx0XHRpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSB7XHJcblx0XHRcdFx0c2VsZi5fcXVldWUucHVzaCh7XHJcblx0XHRcdFx0XHRldmVudDogJ3N0b3AnLFxyXG5cdFx0XHRcdFx0YWN0aW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5zdG9wKGlkKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIHN0b3BwZWQuXHJcblx0XHRcdHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XHJcblxyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdC8vIENsZWFyIHRoZSBlbmQgdGltZXIuXHJcblx0XHRcdFx0c2VsZi5fY2xlYXJUaW1lcihpZHNbaV0pO1xyXG5cclxuXHRcdFx0XHQvLyBHZXQgdGhlIHNvdW5kLlxyXG5cdFx0XHRcdHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xyXG5cclxuXHRcdFx0XHRpZiAoc291bmQpIHtcclxuXHRcdFx0XHRcdC8vIFJlc2V0IHRoZSBzZWVrIHBvc2l0aW9uLlxyXG5cdFx0XHRcdFx0c291bmQuX3NlZWsgPSBzb3VuZC5fc3RhcnQgfHwgMDtcclxuXHRcdFx0XHRcdHNvdW5kLl9yYXRlU2VlayA9IDA7XHJcblx0XHRcdFx0XHRzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdHNvdW5kLl9lbmRlZCA9IHRydWU7XHJcblxyXG5cdFx0XHRcdFx0Ly8gU3RvcCBjdXJyZW50bHkgcnVubmluZyBmYWRlcy5cclxuXHRcdFx0XHRcdHNlbGYuX3N0b3BGYWRlKGlkc1tpXSk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKHNvdW5kLl9ub2RlKSB7XHJcblx0XHRcdFx0XHRcdGlmIChzZWxmLl93ZWJBdWRpbykge1xyXG5cdFx0XHRcdFx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgc291bmQncyBBdWRpb0J1ZmZlclNvdXJjZU5vZGUgaGFzIGJlZW4gY3JlYXRlZC5cclxuXHRcdFx0XHRcdFx0XHRpZiAoc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAodHlwZW9mIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uubm90ZU9mZigwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wKDApO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0XHRcdC8vIENsZWFuIHVwIHRoZSBidWZmZXIgc291cmNlLlxyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5fY2xlYW5CdWZmZXIoc291bmQuX25vZGUpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICghaXNOYU4oc291bmQuX25vZGUuZHVyYXRpb24pIHx8IHNvdW5kLl9ub2RlLmR1cmF0aW9uID09PSBJbmZpbml0eSkge1xyXG5cdFx0XHRcdFx0XHRcdHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lID0gc291bmQuX3N0YXJ0IHx8IDA7XHJcblx0XHRcdFx0XHRcdFx0c291bmQuX25vZGUucGF1c2UoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICghaW50ZXJuYWwpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZW1pdCgnc3RvcCcsIHNvdW5kLl9pZCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdH0sXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBNdXRlL3VubXV0ZSBhIHNpbmdsZSBzb3VuZCBvciBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cclxuXHRcdCAqIEBwYXJhbSAge0Jvb2xlYW59IG11dGVkIFNldCB0byB0cnVlIHRvIG11dGUgYW5kIGZhbHNlIHRvIHVubXV0ZS5cclxuXHRcdCAqIEBwYXJhbSAge051bWJlcn0gaWQgICAgVGhlIHNvdW5kIElEIHRvIHVwZGF0ZSAob21pdCB0byBtdXRlL3VubXV0ZSBhbGwpLlxyXG5cdFx0ICogQHJldHVybiB7SG93bH1cclxuXHRcdCAqL1xyXG5cdFx0bXV0ZTogZnVuY3Rpb24obXV0ZWQsIGlkKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRcdC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gbXV0ZSB3aGVuIGNhcGFibGUuXHJcblx0XHRcdGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcclxuXHRcdFx0XHRzZWxmLl9xdWV1ZS5wdXNoKHtcclxuXHRcdFx0XHRcdGV2ZW50OiAnbXV0ZScsXHJcblx0XHRcdFx0XHRhY3Rpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLm11dGUobXV0ZWQsIGlkKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIGFwcGx5aW5nIG11dGUvdW5tdXRlIHRvIGFsbCBzb3VuZHMsIHVwZGF0ZSB0aGUgZ3JvdXAncyB2YWx1ZS5cclxuXHRcdFx0aWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRpZiAodHlwZW9mIG11dGVkID09PSAnYm9vbGVhbicpIHtcclxuXHRcdFx0XHRcdHNlbGYuX211dGVkID0gbXV0ZWQ7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHJldHVybiBzZWxmLl9tdXRlZDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIG11dGVkLlxyXG5cdFx0XHR2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xyXG5cclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBpZHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHQvLyBHZXQgdGhlIHNvdW5kLlxyXG5cdFx0XHRcdHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xyXG5cclxuXHRcdFx0XHRpZiAoc291bmQpIHtcclxuXHRcdFx0XHRcdHNvdW5kLl9tdXRlZCA9IG11dGVkO1xyXG5cclxuXHRcdFx0XHRcdC8vIENhbmNlbCBhY3RpdmUgZmFkZSBhbmQgc2V0IHRoZSB2b2x1bWUgdG8gdGhlIGVuZCB2YWx1ZS5cclxuXHRcdFx0XHRcdGlmIChzb3VuZC5faW50ZXJ2YWwpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fc3RvcEZhZGUoc291bmQuX2lkKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUpIHtcclxuXHRcdFx0XHRcdFx0c291bmQuX25vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZShtdXRlZCA/IDAgOiBzb3VuZC5fdm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoc291bmQuX25vZGUpIHtcclxuXHRcdFx0XHRcdFx0c291bmQuX25vZGUubXV0ZWQgPSBIb3dsZXIuX211dGVkID8gdHJ1ZSA6IG11dGVkO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNlbGYuX2VtaXQoJ211dGUnLCBzb3VuZC5faWQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogR2V0L3NldCB0aGUgdm9sdW1lIG9mIHRoaXMgc291bmQgb3Igb2YgdGhlIEhvd2wgZ3JvdXAuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cclxuXHRcdCAqICAgdm9sdW1lKCkgLT4gUmV0dXJucyB0aGUgZ3JvdXAncyB2b2x1bWUgdmFsdWUuXHJcblx0XHQgKiAgIHZvbHVtZShpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBjdXJyZW50IHZvbHVtZS5cclxuXHRcdCAqICAgdm9sdW1lKHZvbCkgLT4gU2V0cyB0aGUgdm9sdW1lIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxyXG5cdFx0ICogICB2b2x1bWUodm9sLCBpZCkgLT4gU2V0cyB0aGUgdm9sdW1lIG9mIHBhc3NlZCBzb3VuZCBpZC5cclxuXHRcdCAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCB2b2x1bWUuXHJcblx0XHQgKi9cclxuXHRcdHZvbHVtZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0dmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcblx0XHRcdHZhciB2b2wsIGlkO1xyXG5cclxuXHRcdFx0Ly8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxyXG5cdFx0XHRpZiAoYXJncy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0XHQvLyBSZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBncm91cHMnIHZvbHVtZS5cclxuXHRcdFx0XHRyZXR1cm4gc2VsZi5fdm9sdW1lO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxIHx8IGFyZ3MubGVuZ3RoID09PSAyICYmIHR5cGVvZiBhcmdzWzFdID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdC8vIEZpcnN0IGNoZWNrIGlmIHRoaXMgaXMgYW4gSUQsIGFuZCBpZiBub3QsIGFzc3VtZSBpdCBpcyBhIG5ldyB2b2x1bWUuXHJcblx0XHRcdFx0dmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XHJcblx0XHRcdFx0dmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XHJcblx0XHRcdFx0aWYgKGluZGV4ID49IDApIHtcclxuXHRcdFx0XHRcdGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR2b2wgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChhcmdzLmxlbmd0aCA+PSAyKSB7XHJcblx0XHRcdFx0dm9sID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcclxuXHRcdFx0XHRpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVXBkYXRlIHRoZSB2b2x1bWUgb3IgcmV0dXJuIHRoZSBjdXJyZW50IHZvbHVtZS5cclxuXHRcdFx0dmFyIHNvdW5kO1xyXG5cdFx0XHRpZiAodHlwZW9mIHZvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdm9sID49IDAgJiYgdm9sIDw9IDEpIHtcclxuXHRcdFx0XHQvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSB2b2x1bWUgd2hlbiBjYXBhYmxlLlxyXG5cdFx0XHRcdGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcclxuXHRcdFx0XHRcdHNlbGYuX3F1ZXVlLnB1c2goe1xyXG5cdFx0XHRcdFx0XHRldmVudDogJ3ZvbHVtZScsXHJcblx0XHRcdFx0XHRcdGFjdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0c2VsZi52b2x1bWUuYXBwbHkoc2VsZiwgYXJncyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gU2V0IHRoZSBncm91cCB2b2x1bWUuXHJcblx0XHRcdFx0aWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRcdHNlbGYuX3ZvbHVtZSA9IHZvbDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFVwZGF0ZSBvbmUgb3IgYWxsIHZvbHVtZXMuXHJcblx0XHRcdFx0aWQgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBpZC5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBzb3VuZC5cclxuXHRcdFx0XHRcdHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkW2ldKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoc291bmQpIHtcclxuXHRcdFx0XHRcdFx0c291bmQuX3ZvbHVtZSA9IHZvbDtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFN0b3AgY3VycmVudGx5IHJ1bm5pbmcgZmFkZXMuXHJcblx0XHRcdFx0XHRcdGlmICghYXJnc1syXSkge1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX3N0b3BGYWRlKGlkW2ldKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0aWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbXV0ZWQpIHtcclxuXHRcdFx0XHRcdFx0XHRzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoc291bmQuX25vZGUgJiYgIXNvdW5kLl9tdXRlZCkge1xyXG5cdFx0XHRcdFx0XHRcdHNvdW5kLl9ub2RlLnZvbHVtZSA9IHZvbCAqIEhvd2xlci52b2x1bWUoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0c2VsZi5fZW1pdCgndm9sdW1lJywgc291bmQuX2lkKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0c291bmQgPSBpZCA/IHNlbGYuX3NvdW5kQnlJZChpZCkgOiBzZWxmLl9zb3VuZHNbMF07XHJcblx0XHRcdFx0cmV0dXJuIHNvdW5kID8gc291bmQuX3ZvbHVtZSA6IDA7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEZhZGUgYSBjdXJyZW50bHkgcGxheWluZyBzb3VuZCBiZXR3ZWVuIHR3byB2b2x1bWVzIChpZiBubyBpZCBpcyBwYXNzc2VkLCBhbGwgc291bmRzIHdpbGwgZmFkZSkuXHJcblx0XHQgKiBAcGFyYW0gIHtOdW1iZXJ9IGZyb20gVGhlIHZhbHVlIHRvIGZhZGUgZnJvbSAoMC4wIHRvIDEuMCkuXHJcblx0XHQgKiBAcGFyYW0gIHtOdW1iZXJ9IHRvICAgVGhlIHZvbHVtZSB0byBmYWRlIHRvICgwLjAgdG8gMS4wKS5cclxuXHRcdCAqIEBwYXJhbSAge051bWJlcn0gbGVuICBUaW1lIGluIG1pbGxpc2Vjb25kcyB0byBmYWRlLlxyXG5cdFx0ICogQHBhcmFtICB7TnVtYmVyfSBpZCAgIFRoZSBzb3VuZCBpZCAob21pdCB0byBmYWRlIGFsbCBzb3VuZHMpLlxyXG5cdFx0ICogQHJldHVybiB7SG93bH1cclxuXHRcdCAqL1xyXG5cdFx0ZmFkZTogZnVuY3Rpb24oZnJvbSwgdG8sIGxlbiwgaWQpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBmYWRlIHdoZW4gY2FwYWJsZS5cclxuXHRcdFx0aWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykge1xyXG5cdFx0XHRcdHNlbGYuX3F1ZXVlLnB1c2goe1xyXG5cdFx0XHRcdFx0ZXZlbnQ6ICdmYWRlJyxcclxuXHRcdFx0XHRcdGFjdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuZmFkZShmcm9tLCB0bywgbGVuLCBpZCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhlIHRvL2Zyb20vbGVuIHZhbHVlcyBhcmUgbnVtYmVycy5cclxuXHRcdFx0ZnJvbSA9IHBhcnNlRmxvYXQoZnJvbSk7XHJcblx0XHRcdHRvID0gcGFyc2VGbG9hdCh0byk7XHJcblx0XHRcdGxlbiA9IHBhcnNlRmxvYXQobGVuKTtcclxuXHJcblx0XHRcdC8vIFNldCB0aGUgdm9sdW1lIHRvIHRoZSBzdGFydCBwb3NpdGlvbi5cclxuXHRcdFx0c2VsZi52b2x1bWUoZnJvbSwgaWQpO1xyXG5cclxuXHRcdFx0Ly8gRmFkZSB0aGUgdm9sdW1lIG9mIG9uZSBvciBhbGwgc291bmRzLlxyXG5cdFx0XHR2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdC8vIEdldCB0aGUgc291bmQuXHJcblx0XHRcdFx0dmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XHJcblxyXG5cdFx0XHRcdC8vIENyZWF0ZSBhIGxpbmVhciBmYWRlIG9yIGZhbGwgYmFjayB0byB0aW1lb3V0cyB3aXRoIEhUTUw1IEF1ZGlvLlxyXG5cdFx0XHRcdGlmIChzb3VuZCkge1xyXG5cdFx0XHRcdFx0Ly8gU3RvcCB0aGUgcHJldmlvdXMgZmFkZSBpZiBubyBzcHJpdGUgaXMgYmVpbmcgdXNlZCAob3RoZXJ3aXNlLCB2b2x1bWUgaGFuZGxlcyB0aGlzKS5cclxuXHRcdFx0XHRcdGlmICghaWQpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fc3RvcEZhZGUoaWRzW2ldKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBJZiB3ZSBhcmUgdXNpbmcgV2ViIEF1ZGlvLCBsZXQgdGhlIG5hdGl2ZSBtZXRob2RzIGRvIHRoZSBhY3R1YWwgZmFkZS5cclxuXHRcdFx0XHRcdGlmIChzZWxmLl93ZWJBdWRpbyAmJiAhc291bmQuX211dGVkKSB7XHJcblx0XHRcdFx0XHRcdHZhciBjdXJyZW50VGltZSA9IEhvd2xlci5jdHguY3VycmVudFRpbWU7XHJcblx0XHRcdFx0XHRcdHZhciBlbmQgPSBjdXJyZW50VGltZSArIChsZW4gLyAxMDAwKTtcclxuXHRcdFx0XHRcdFx0c291bmQuX3ZvbHVtZSA9IGZyb207XHJcblx0XHRcdFx0XHRcdHNvdW5kLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUoZnJvbSwgY3VycmVudFRpbWUpO1xyXG5cdFx0XHRcdFx0XHRzb3VuZC5fbm9kZS5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHRvLCBlbmQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNlbGYuX3N0YXJ0RmFkZUludGVydmFsKHNvdW5kLCBmcm9tLCB0bywgbGVuLCBpZHNbaV0sIHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogU3RhcnRzIHRoZSBpbnRlcm5hbCBpbnRlcnZhbCB0byBmYWRlIGEgc291bmQuXHJcblx0XHQgKiBAcGFyYW0gIHtPYmplY3R9IHNvdW5kIFJlZmVyZW5jZSB0byBzb3VuZCB0byBmYWRlLlxyXG5cdFx0ICogQHBhcmFtICB7TnVtYmVyfSBmcm9tIFRoZSB2YWx1ZSB0byBmYWRlIGZyb20gKDAuMCB0byAxLjApLlxyXG5cdFx0ICogQHBhcmFtICB7TnVtYmVyfSB0byAgIFRoZSB2b2x1bWUgdG8gZmFkZSB0byAoMC4wIHRvIDEuMCkuXHJcblx0XHQgKiBAcGFyYW0gIHtOdW1iZXJ9IGxlbiAgVGltZSBpbiBtaWxsaXNlY29uZHMgdG8gZmFkZS5cclxuXHRcdCAqIEBwYXJhbSAge051bWJlcn0gaWQgICBUaGUgc291bmQgaWQgdG8gZmFkZS5cclxuXHRcdCAqIEBwYXJhbSAge0Jvb2xlYW59IGlzR3JvdXAgICBJZiB0cnVlLCBzZXQgdGhlIHZvbHVtZSBvbiB0aGUgZ3JvdXAuXHJcblx0XHQgKi9cclxuXHRcdF9zdGFydEZhZGVJbnRlcnZhbDogZnVuY3Rpb24oc291bmQsIGZyb20sIHRvLCBsZW4sIGlkLCBpc0dyb3VwKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0dmFyIHZvbCA9IGZyb207XHJcblx0XHRcdHZhciBkaWZmID0gdG8gLSBmcm9tO1xyXG5cdFx0XHR2YXIgc3RlcHMgPSBNYXRoLmFicyhkaWZmIC8gMC4wMSk7XHJcblx0XHRcdHZhciBzdGVwTGVuID0gTWF0aC5tYXgoNCwgKHN0ZXBzID4gMCkgPyBsZW4gLyBzdGVwcyA6IGxlbik7XHJcblx0XHRcdHZhciBsYXN0VGljayA9IERhdGUubm93KCk7XHJcblxyXG5cdFx0XHQvLyBTdG9yZSB0aGUgdmFsdWUgYmVpbmcgZmFkZWQgdG8uXHJcblx0XHRcdHNvdW5kLl9mYWRlVG8gPSB0bztcclxuXHJcblx0XHRcdC8vIFVwZGF0ZSB0aGUgdm9sdW1lIHZhbHVlIG9uIGVhY2ggaW50ZXJ2YWwgdGljay5cclxuXHRcdFx0c291bmQuX2ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Ly8gVXBkYXRlIHRoZSB2b2x1bWUgYmFzZWQgb24gdGhlIHRpbWUgc2luY2UgdGhlIGxhc3QgdGljay5cclxuXHRcdFx0XHR2YXIgdGljayA9IChEYXRlLm5vdygpIC0gbGFzdFRpY2spIC8gbGVuO1xyXG5cdFx0XHRcdGxhc3RUaWNrID0gRGF0ZS5ub3coKTtcclxuXHRcdFx0XHR2b2wgKz0gZGlmZiAqIHRpY2s7XHJcblxyXG5cdFx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgdm9sdW1lIGlzIGluIHRoZSByaWdodCBib3VuZHMuXHJcblx0XHRcdFx0dm9sID0gTWF0aC5tYXgoMCwgdm9sKTtcclxuXHRcdFx0XHR2b2wgPSBNYXRoLm1pbigxLCB2b2wpO1xyXG5cclxuXHRcdFx0XHQvLyBSb3VuZCB0byB3aXRoaW4gMiBkZWNpbWFsIHBvaW50cy5cclxuXHRcdFx0XHR2b2wgPSBNYXRoLnJvdW5kKHZvbCAqIDEwMCkgLyAxMDA7XHJcblxyXG5cdFx0XHRcdC8vIENoYW5nZSB0aGUgdm9sdW1lLlxyXG5cdFx0XHRcdGlmIChzZWxmLl93ZWJBdWRpbykge1xyXG5cdFx0XHRcdFx0c291bmQuX3ZvbHVtZSA9IHZvbDtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0c2VsZi52b2x1bWUodm9sLCBzb3VuZC5faWQsIHRydWUpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gU2V0IHRoZSBncm91cCdzIHZvbHVtZS5cclxuXHRcdFx0XHRpZiAoaXNHcm91cCkge1xyXG5cdFx0XHRcdFx0c2VsZi5fdm9sdW1lID0gdm9sO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gV2hlbiB0aGUgZmFkZSBpcyBjb21wbGV0ZSwgc3RvcCBpdCBhbmQgZmlyZSBldmVudC5cclxuXHRcdFx0XHRpZiAoKHRvIDwgZnJvbSAmJiB2b2wgPD0gdG8pIHx8ICh0byA+IGZyb20gJiYgdm9sID49IHRvKSkge1xyXG5cdFx0XHRcdFx0Y2xlYXJJbnRlcnZhbChzb3VuZC5faW50ZXJ2YWwpO1xyXG5cdFx0XHRcdFx0c291bmQuX2ludGVydmFsID0gbnVsbDtcclxuXHRcdFx0XHRcdHNvdW5kLl9mYWRlVG8gPSBudWxsO1xyXG5cdFx0XHRcdFx0c2VsZi52b2x1bWUodG8sIHNvdW5kLl9pZCk7XHJcblx0XHRcdFx0XHRzZWxmLl9lbWl0KCdmYWRlJywgc291bmQuX2lkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHN0ZXBMZW4pO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEludGVybmFsIG1ldGhvZCB0aGF0IHN0b3BzIHRoZSBjdXJyZW50bHkgcGxheWluZyBmYWRlIHdoZW5cclxuXHRcdCAqIGEgbmV3IGZhZGUgc3RhcnRzLCB2b2x1bWUgaXMgY2hhbmdlZCBvciB0aGUgc291bmQgaXMgc3RvcHBlZC5cclxuXHRcdCAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIGlkLlxyXG5cdFx0ICogQHJldHVybiB7SG93bH1cclxuXHRcdCAqL1xyXG5cdFx0X3N0b3BGYWRlOiBmdW5jdGlvbihpZCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XHJcblxyXG5cdFx0XHRpZiAoc291bmQgJiYgc291bmQuX2ludGVydmFsKSB7XHJcblx0XHRcdFx0aWYgKHNlbGYuX3dlYkF1ZGlvKSB7XHJcblx0XHRcdFx0XHRzb3VuZC5fbm9kZS5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwoc291bmQuX2ludGVydmFsKTtcclxuXHRcdFx0XHRzb3VuZC5faW50ZXJ2YWwgPSBudWxsO1xyXG5cdFx0XHRcdHNlbGYudm9sdW1lKHNvdW5kLl9mYWRlVG8sIGlkKTtcclxuXHRcdFx0XHRzb3VuZC5fZmFkZVRvID0gbnVsbDtcclxuXHRcdFx0XHRzZWxmLl9lbWl0KCdmYWRlJywgaWQpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdH0sXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBHZXQvc2V0IHRoZSBsb29wIHBhcmFtZXRlciBvbiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXHJcblx0XHQgKiAgIGxvb3AoKSAtPiBSZXR1cm5zIHRoZSBncm91cCdzIGxvb3AgdmFsdWUuXHJcblx0XHQgKiAgIGxvb3AoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgbG9vcCB2YWx1ZS5cclxuXHRcdCAqICAgbG9vcChsb29wKSAtPiBTZXRzIHRoZSBsb29wIHZhbHVlIGZvciBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cclxuXHRcdCAqICAgbG9vcChsb29wLCBpZCkgLT4gU2V0cyB0aGUgbG9vcCB2YWx1ZSBvZiBwYXNzZWQgc291bmQgaWQuXHJcblx0XHQgKiBAcmV0dXJuIHtIb3dsL0Jvb2xlYW59IFJldHVybnMgc2VsZiBvciBjdXJyZW50IGxvb3AgdmFsdWUuXHJcblx0XHQgKi9cclxuXHRcdGxvb3A6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdHZhciBhcmdzID0gYXJndW1lbnRzO1xyXG5cdFx0XHR2YXIgbG9vcCwgaWQsIHNvdW5kO1xyXG5cclxuXHRcdFx0Ly8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgZm9yIGxvb3AgYW5kIGlkLlxyXG5cdFx0XHRpZiAoYXJncy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0XHQvLyBSZXR1cm4gdGhlIGdyb3UncyBsb29wIHZhbHVlLlxyXG5cdFx0XHRcdHJldHVybiBzZWxmLl9sb29wO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XHJcblx0XHRcdFx0aWYgKHR5cGVvZiBhcmdzWzBdID09PSAnYm9vbGVhbicpIHtcclxuXHRcdFx0XHRcdGxvb3AgPSBhcmdzWzBdO1xyXG5cdFx0XHRcdFx0c2VsZi5fbG9vcCA9IGxvb3A7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIFJldHVybiB0aGlzIHNvdW5kJ3MgbG9vcCB2YWx1ZS5cclxuXHRcdFx0XHRcdHNvdW5kID0gc2VsZi5fc291bmRCeUlkKHBhcnNlSW50KGFyZ3NbMF0sIDEwKSk7XHJcblx0XHRcdFx0XHRyZXR1cm4gc291bmQgPyBzb3VuZC5fbG9vcCA6IGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xyXG5cdFx0XHRcdGxvb3AgPSBhcmdzWzBdO1xyXG5cdFx0XHRcdGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBsb29wZWQuXHJcblx0XHRcdHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgaWRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0c291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcclxuXHJcblx0XHRcdFx0aWYgKHNvdW5kKSB7XHJcblx0XHRcdFx0XHRzb3VuZC5fbG9vcCA9IGxvb3A7XHJcblx0XHRcdFx0XHRpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XHJcblx0XHRcdFx0XHRcdHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wID0gbG9vcDtcclxuXHRcdFx0XHRcdFx0aWYgKGxvb3ApIHtcclxuXHRcdFx0XHRcdFx0XHRzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcFN0YXJ0ID0gc291bmQuX3N0YXJ0IHx8IDA7XHJcblx0XHRcdFx0XHRcdFx0c291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BFbmQgPSBzb3VuZC5fc3RvcDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogR2V0L3NldCB0aGUgcGxheWJhY2sgcmF0ZSBvZiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXHJcblx0XHQgKiAgIHJhdGUoKSAtPiBSZXR1cm5zIHRoZSBmaXJzdCBzb3VuZCBub2RlJ3MgY3VycmVudCBwbGF5YmFjayByYXRlLlxyXG5cdFx0ICogICByYXRlKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGN1cnJlbnQgcGxheWJhY2sgcmF0ZS5cclxuXHRcdCAqICAgcmF0ZShyYXRlKSAtPiBTZXRzIHRoZSBwbGF5YmFjayByYXRlIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxyXG5cdFx0ICogICByYXRlKHJhdGUsIGlkKSAtPiBTZXRzIHRoZSBwbGF5YmFjayByYXRlIG9mIHBhc3NlZCBzb3VuZCBpZC5cclxuXHRcdCAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgcGxheWJhY2sgcmF0ZS5cclxuXHRcdCAqL1xyXG5cdFx0cmF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0dmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcblx0XHRcdHZhciByYXRlLCBpZDtcclxuXHJcblx0XHRcdC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cclxuXHRcdFx0aWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0Ly8gV2Ugd2lsbCBzaW1wbHkgcmV0dXJuIHRoZSBjdXJyZW50IHJhdGUgb2YgdGhlIGZpcnN0IG5vZGUuXHJcblx0XHRcdFx0aWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XHJcblx0XHRcdFx0Ly8gRmlyc3QgY2hlY2sgaWYgdGhpcyBpcyBhbiBJRCwgYW5kIGlmIG5vdCwgYXNzdW1lIGl0IGlzIGEgbmV3IHJhdGUgdmFsdWUuXHJcblx0XHRcdFx0dmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XHJcblx0XHRcdFx0dmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XHJcblx0XHRcdFx0aWYgKGluZGV4ID49IDApIHtcclxuXHRcdFx0XHRcdGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRyYXRlID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcclxuXHRcdFx0XHRyYXRlID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcclxuXHRcdFx0XHRpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVXBkYXRlIHRoZSBwbGF5YmFjayByYXRlIG9yIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZS5cclxuXHRcdFx0dmFyIHNvdW5kO1xyXG5cdFx0XHRpZiAodHlwZW9mIHJhdGUgPT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0Ly8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2UgcGxheWJhY2sgcmF0ZSB3aGVuIGNhcGFibGUuXHJcblx0XHRcdFx0aWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykge1xyXG5cdFx0XHRcdFx0c2VsZi5fcXVldWUucHVzaCh7XHJcblx0XHRcdFx0XHRcdGV2ZW50OiAncmF0ZScsXHJcblx0XHRcdFx0XHRcdGFjdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5yYXRlLmFwcGx5KHNlbGYsIGFyZ3MpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFNldCB0aGUgZ3JvdXAgcmF0ZS5cclxuXHRcdFx0XHRpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdFx0c2VsZi5fcmF0ZSA9IHJhdGU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBVcGRhdGUgb25lIG9yIGFsbCB2b2x1bWVzLlxyXG5cdFx0XHRcdGlkID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xyXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgaWQubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdC8vIEdldCB0aGUgc291bmQuXHJcblx0XHRcdFx0XHRzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZFtpXSk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKHNvdW5kKSB7XHJcblx0XHRcdFx0XHRcdC8vIEtlZXAgdHJhY2sgb2Ygb3VyIHBvc2l0aW9uIHdoZW4gdGhlIHJhdGUgY2hhbmdlZCBhbmQgdXBkYXRlIHRoZSBwbGF5YmFja1xyXG5cdFx0XHRcdFx0XHQvLyBzdGFydCBwb3NpdGlvbiBzbyB3ZSBjYW4gcHJvcGVybHkgYWRqdXN0IHRoZSBzZWVrIHBvc2l0aW9uIGZvciB0aW1lIGVsYXBzZWQuXHJcblx0XHRcdFx0XHRcdGlmIChzZWxmLnBsYXlpbmcoaWRbaV0pKSB7XHJcblx0XHRcdFx0XHRcdFx0c291bmQuX3JhdGVTZWVrID0gc2VsZi5zZWVrKGlkW2ldKTtcclxuXHRcdFx0XHRcdFx0XHRzb3VuZC5fcGxheVN0YXJ0ID0gc2VsZi5fd2ViQXVkaW8gPyBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lIDogc291bmQuX3BsYXlTdGFydDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRzb3VuZC5fcmF0ZSA9IHJhdGU7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBDaGFuZ2UgdGhlIHBsYXliYWNrIHJhdGUuXHJcblx0XHRcdFx0XHRcdGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcclxuXHRcdFx0XHRcdFx0XHRzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UucGxheWJhY2tSYXRlLnNldFZhbHVlQXRUaW1lKHJhdGUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHNvdW5kLl9ub2RlKSB7XHJcblx0XHRcdFx0XHRcdFx0c291bmQuX25vZGUucGxheWJhY2tSYXRlID0gcmF0ZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0Ly8gUmVzZXQgdGhlIHRpbWVycy5cclxuXHRcdFx0XHRcdFx0dmFyIHNlZWsgPSBzZWxmLnNlZWsoaWRbaV0pO1xyXG5cdFx0XHRcdFx0XHR2YXIgZHVyYXRpb24gPSAoKHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVswXSArIHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVsxXSkgLyAxMDAwKSAtIHNlZWs7XHJcblx0XHRcdFx0XHRcdHZhciB0aW1lb3V0ID0gKGR1cmF0aW9uICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBTdGFydCBhIG5ldyBlbmQgdGltZXIgaWYgc291bmQgaXMgYWxyZWFkeSBwbGF5aW5nLlxyXG5cdFx0XHRcdFx0XHRpZiAoc2VsZi5fZW5kVGltZXJzW2lkW2ldXSB8fCAhc291bmQuX3BhdXNlZCkge1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX2NsZWFyVGltZXIoaWRbaV0pO1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX2VuZFRpbWVyc1tpZFtpXV0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0c2VsZi5fZW1pdCgncmF0ZScsIHNvdW5kLl9pZCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcclxuXHRcdFx0XHRyZXR1cm4gc291bmQgPyBzb3VuZC5fcmF0ZSA6IHNlbGYuX3JhdGU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEdldC9zZXQgdGhlIHNlZWsgcG9zaXRpb24gb2YgYSBzb3VuZC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxyXG5cdFx0ICogICBzZWVrKCkgLT4gUmV0dXJucyB0aGUgZmlyc3Qgc291bmQgbm9kZSdzIGN1cnJlbnQgc2VlayBwb3NpdGlvbi5cclxuXHRcdCAqICAgc2VlayhpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBjdXJyZW50IHNlZWsgcG9zaXRpb24uXHJcblx0XHQgKiAgIHNlZWsoc2VlaykgLT4gU2V0cyB0aGUgc2VlayBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgc291bmQgbm9kZS5cclxuXHRcdCAqICAgc2VlayhzZWVrLCBpZCkgLT4gU2V0cyB0aGUgc2VlayBwb3NpdGlvbiBvZiBwYXNzZWQgc291bmQgaWQuXHJcblx0XHQgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IHNlZWsgcG9zaXRpb24uXHJcblx0XHQgKi9cclxuXHRcdHNlZWs6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdHZhciBhcmdzID0gYXJndW1lbnRzO1xyXG5cdFx0XHR2YXIgc2VlaywgaWQ7XHJcblxyXG5cdFx0XHQvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXHJcblx0XHRcdGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRcdC8vIFdlIHdpbGwgc2ltcGx5IHJldHVybiB0aGUgY3VycmVudCBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgbm9kZS5cclxuXHRcdFx0XHRpZCA9IHNlbGYuX3NvdW5kc1swXS5faWQ7XHJcblx0XHRcdH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcclxuXHRcdFx0XHQvLyBGaXJzdCBjaGVjayBpZiB0aGlzIGlzIGFuIElELCBhbmQgaWYgbm90LCBhc3N1bWUgaXQgaXMgYSBuZXcgc2VlayBwb3NpdGlvbi5cclxuXHRcdFx0XHR2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoKTtcclxuXHRcdFx0XHR2YXIgaW5kZXggPSBpZHMuaW5kZXhPZihhcmdzWzBdKTtcclxuXHRcdFx0XHRpZiAoaW5kZXggPj0gMCkge1xyXG5cdFx0XHRcdFx0aWQgPSBwYXJzZUludChhcmdzWzBdLCAxMCk7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChzZWxmLl9zb3VuZHMubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRpZCA9IHNlbGYuX3NvdW5kc1swXS5faWQ7XHJcblx0XHRcdFx0XHRzZWVrID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcclxuXHRcdFx0XHRzZWVrID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcclxuXHRcdFx0XHRpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgdGhlcmUgaXMgbm8gSUQsIGJhaWwgb3V0LlxyXG5cdFx0XHRpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIHNlZWsgd2hlbiBjYXBhYmxlLlxyXG5cdFx0XHRpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSB7XHJcblx0XHRcdFx0c2VsZi5fcXVldWUucHVzaCh7XHJcblx0XHRcdFx0XHRldmVudDogJ3NlZWsnLFxyXG5cdFx0XHRcdFx0YWN0aW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5zZWVrLmFwcGx5KHNlbGYsIGFyZ3MpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gR2V0IHRoZSBzb3VuZC5cclxuXHRcdFx0dmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcclxuXHJcblx0XHRcdGlmIChzb3VuZCkge1xyXG5cdFx0XHRcdGlmICh0eXBlb2Ygc2VlayA9PT0gJ251bWJlcicgJiYgc2VlayA+PSAwKSB7XHJcblx0XHRcdFx0XHQvLyBQYXVzZSB0aGUgc291bmQgYW5kIHVwZGF0ZSBwb3NpdGlvbiBmb3IgcmVzdGFydGluZyBwbGF5YmFjay5cclxuXHRcdFx0XHRcdHZhciBwbGF5aW5nID0gc2VsZi5wbGF5aW5nKGlkKTtcclxuXHRcdFx0XHRcdGlmIChwbGF5aW5nKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYucGF1c2UoaWQsIHRydWUpO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIE1vdmUgdGhlIHBvc2l0aW9uIG9mIHRoZSB0cmFjayBhbmQgY2FuY2VsIHRpbWVyLlxyXG5cdFx0XHRcdFx0c291bmQuX3NlZWsgPSBzZWVrO1xyXG5cdFx0XHRcdFx0c291bmQuX2VuZGVkID0gZmFsc2U7XHJcblx0XHRcdFx0XHRzZWxmLl9jbGVhclRpbWVyKGlkKTtcclxuXHJcblx0XHRcdFx0XHQvLyBVcGRhdGUgdGhlIHNlZWsgcG9zaXRpb24gZm9yIEhUTUw1IEF1ZGlvLlxyXG5cdFx0XHRcdFx0aWYgKCFzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiAhaXNOYU4oc291bmQuX25vZGUuZHVyYXRpb24pKSB7XHJcblx0XHRcdFx0XHRcdHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lID0gc2VlaztcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBTZWVrIGFuZCBlbWl0IHdoZW4gcmVhZHkuXHJcblx0XHRcdFx0XHR2YXIgc2Vla0FuZEVtaXQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZW1pdCgnc2VlaycsIGlkKTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFJlc3RhcnQgdGhlIHBsYXliYWNrIGlmIHRoZSBzb3VuZCB3YXMgcGxheWluZy5cclxuXHRcdFx0XHRcdFx0aWYgKHBsYXlpbmcpIHtcclxuXHRcdFx0XHRcdFx0XHRzZWxmLnBsYXkoaWQsIHRydWUpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRcdC8vIFdhaXQgZm9yIHRoZSBwbGF5IGxvY2sgdG8gYmUgdW5zZXQgYmVmb3JlIGVtaXR0aW5nIChIVE1MNSBBdWRpbykuXHJcblx0XHRcdFx0XHRpZiAocGxheWluZyAmJiAhc2VsZi5fd2ViQXVkaW8pIHtcclxuXHRcdFx0XHRcdFx0dmFyIGVtaXRTZWVrID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFzZWxmLl9wbGF5TG9jaykge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2Vla0FuZEVtaXQoKTtcclxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dChlbWl0U2VlaywgMCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KGVtaXRTZWVrLCAwKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHNlZWtBbmRFbWl0KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGlmIChzZWxmLl93ZWJBdWRpbykge1xyXG5cdFx0XHRcdFx0XHR2YXIgcmVhbFRpbWUgPSBzZWxmLnBsYXlpbmcoaWQpID8gSG93bGVyLmN0eC5jdXJyZW50VGltZSAtIHNvdW5kLl9wbGF5U3RhcnQgOiAwO1xyXG5cdFx0XHRcdFx0XHR2YXIgcmF0ZVNlZWsgPSBzb3VuZC5fcmF0ZVNlZWsgPyBzb3VuZC5fcmF0ZVNlZWsgLSBzb3VuZC5fc2VlayA6IDA7XHJcblx0XHRcdFx0XHRcdHJldHVybiBzb3VuZC5fc2VlayArIChyYXRlU2VlayArIHJlYWxUaW1lICogTWF0aC5hYnMoc291bmQuX3JhdGUpKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBzb3VuZC5fbm9kZS5jdXJyZW50VGltZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIENoZWNrIGlmIGEgc3BlY2lmaWMgc291bmQgaXMgY3VycmVudGx5IHBsYXlpbmcgb3Igbm90IChpZiBpZCBpcyBwcm92aWRlZCksIG9yIGNoZWNrIGlmIGF0IGxlYXN0IG9uZSBvZiB0aGUgc291bmRzIGluIHRoZSBncm91cCBpcyBwbGF5aW5nIG9yIG5vdC5cclxuXHRcdCAqIEBwYXJhbSAge051bWJlcn0gIGlkIFRoZSBzb3VuZCBpZCB0byBjaGVjay4gSWYgbm9uZSBpcyBwYXNzZWQsIHRoZSB3aG9sZSBzb3VuZCBncm91cCBpcyBjaGVja2VkLlxyXG5cdFx0ICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiBwbGF5aW5nIGFuZCBmYWxzZSBpZiBub3QuXHJcblx0XHQgKi9cclxuXHRcdHBsYXlpbmc6IGZ1bmN0aW9uKGlkKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRcdC8vIENoZWNrIHRoZSBwYXNzZWQgc291bmQgSUQgKGlmIGFueSkuXHJcblx0XHRcdGlmICh0eXBlb2YgaWQgPT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0dmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcclxuXHRcdFx0XHRyZXR1cm4gc291bmQgPyAhc291bmQuX3BhdXNlZCA6IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBPdGhlcndpc2UsIGxvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBjaGVjayBpZiBhbnkgYXJlIHBsYXlpbmcuXHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYgKCFzZWxmLl9zb3VuZHNbaV0uX3BhdXNlZCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogR2V0IHRoZSBkdXJhdGlvbiBvZiB0aGlzIHNvdW5kLiBQYXNzaW5nIGEgc291bmQgaWQgd2lsbCByZXR1cm4gdGhlIHNwcml0ZSBkdXJhdGlvbi5cclxuXHRcdCAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIGlkIHRvIGNoZWNrLiBJZiBub25lIGlzIHBhc3NlZCwgcmV0dXJuIGZ1bGwgc291cmNlIGR1cmF0aW9uLlxyXG5cdFx0ICogQHJldHVybiB7TnVtYmVyfSBBdWRpbyBkdXJhdGlvbiBpbiBzZWNvbmRzLlxyXG5cdFx0ICovXHJcblx0XHRkdXJhdGlvbjogZnVuY3Rpb24oaWQpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHR2YXIgZHVyYXRpb24gPSBzZWxmLl9kdXJhdGlvbjtcclxuXHJcblx0XHRcdC8vIElmIHdlIHBhc3MgYW4gSUQsIGdldCB0aGUgc291bmQgYW5kIHJldHVybiB0aGUgc3ByaXRlIGxlbmd0aC5cclxuXHRcdFx0dmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcclxuXHRcdFx0aWYgKHNvdW5kKSB7XHJcblx0XHRcdFx0ZHVyYXRpb24gPSBzZWxmLl9zcHJpdGVbc291bmQuX3Nwcml0ZV1bMV0gLyAxMDAwO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gZHVyYXRpb247XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogUmV0dXJucyB0aGUgY3VycmVudCBsb2FkZWQgc3RhdGUgb2YgdGhpcyBIb3dsLlxyXG5cdFx0ICogQHJldHVybiB7U3RyaW5nfSAndW5sb2FkZWQnLCAnbG9hZGluZycsICdsb2FkZWQnXHJcblx0XHQgKi9cclxuXHRcdHN0YXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX3N0YXRlO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFVubG9hZCBhbmQgZGVzdHJveSB0aGUgY3VycmVudCBIb3dsIG9iamVjdC5cclxuXHRcdCAqIFRoaXMgd2lsbCBpbW1lZGlhdGVseSBzdG9wIGFsbCBzb3VuZCBpbnN0YW5jZXMgYXR0YWNoZWQgdG8gdGhpcyBncm91cC5cclxuXHRcdCAqL1xyXG5cdFx0dW5sb2FkOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdFx0Ly8gU3RvcCBwbGF5aW5nIGFueSBhY3RpdmUgc291bmRzLlxyXG5cdFx0XHR2YXIgc291bmRzID0gc2VsZi5fc291bmRzO1xyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNvdW5kcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdC8vIFN0b3AgdGhlIHNvdW5kIGlmIGl0IGlzIGN1cnJlbnRseSBwbGF5aW5nLlxyXG5cdFx0XHRcdGlmICghc291bmRzW2ldLl9wYXVzZWQpIHtcclxuXHRcdFx0XHRcdHNlbGYuc3RvcChzb3VuZHNbaV0uX2lkKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFJlbW92ZSB0aGUgc291cmNlIG9yIGRpc2Nvbm5lY3QuXHJcblx0XHRcdFx0aWYgKCFzZWxmLl93ZWJBdWRpbykge1xyXG5cdFx0XHRcdFx0Ly8gU2V0IHRoZSBzb3VyY2UgdG8gMC1zZWNvbmQgc2lsZW5jZSB0byBzdG9wIGFueSBkb3dubG9hZGluZyAoZXhjZXB0IGluIElFKS5cclxuXHRcdFx0XHRcdHZhciBjaGVja0lFID0gL01TSUUgfFRyaWRlbnRcXC8vLnRlc3QoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IudXNlckFnZW50KTtcclxuXHRcdFx0XHRcdGlmICghY2hlY2tJRSkge1xyXG5cdFx0XHRcdFx0XHRzb3VuZHNbaV0uX25vZGUuc3JjID0gJ2RhdGE6YXVkaW8vd2F2O2Jhc2U2NCxVa2xHUmlnQUFBQlhRVlpGWm0xMElCSUFBQUFCQUFFQVJLd0FBSWhZQVFBQ0FCQUFBQUJrWVhSaEFnQUFBQUVBJztcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBSZW1vdmUgYW55IGV2ZW50IGxpc3RlbmVycy5cclxuXHRcdFx0XHRcdHNvdW5kc1tpXS5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHNvdW5kc1tpXS5fZXJyb3JGbiwgZmFsc2UpO1xyXG5cdFx0XHRcdFx0c291bmRzW2ldLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIHNvdW5kc1tpXS5fbG9hZEZuLCBmYWxzZSk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gUmVsZWFzZSB0aGUgQXVkaW8gb2JqZWN0IGJhY2sgdG8gdGhlIHBvb2wuXHJcblx0XHRcdFx0XHRIb3dsZXIuX3JlbGVhc2VIdG1sNUF1ZGlvKHNvdW5kc1tpXS5fbm9kZSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBFbXB0eSBvdXQgYWxsIG9mIHRoZSBub2Rlcy5cclxuXHRcdFx0XHRkZWxldGUgc291bmRzW2ldLl9ub2RlO1xyXG5cclxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgYWxsIHRpbWVycyBhcmUgY2xlYXJlZCBvdXQuXHJcblx0XHRcdFx0c2VsZi5fY2xlYXJUaW1lcihzb3VuZHNbaV0uX2lkKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIHRoZSByZWZlcmVuY2VzIGluIHRoZSBnbG9iYWwgSG93bGVyIG9iamVjdC5cclxuXHRcdFx0dmFyIGluZGV4ID0gSG93bGVyLl9ob3dscy5pbmRleE9mKHNlbGYpO1xyXG5cdFx0XHRpZiAoaW5kZXggPj0gMCkge1xyXG5cdFx0XHRcdEhvd2xlci5faG93bHMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gRGVsZXRlIHRoaXMgc291bmQgZnJvbSB0aGUgY2FjaGUgKGlmIG5vIG90aGVyIEhvd2wgaXMgdXNpbmcgaXQpLlxyXG5cdFx0XHR2YXIgcmVtQ2FjaGUgPSB0cnVlO1xyXG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgSG93bGVyLl9ob3dscy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlmIChIb3dsZXIuX2hvd2xzW2ldLl9zcmMgPT09IHNlbGYuX3NyYyB8fCBzZWxmLl9zcmMuaW5kZXhPZihIb3dsZXIuX2hvd2xzW2ldLl9zcmMpID49IDApIHtcclxuXHRcdFx0XHRcdHJlbUNhY2hlID0gZmFsc2U7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChjYWNoZSAmJiByZW1DYWNoZSkge1xyXG5cdFx0XHRcdGRlbGV0ZSBjYWNoZVtzZWxmLl9zcmNdO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDbGVhciBnbG9iYWwgZXJyb3JzLlxyXG5cdFx0XHRIb3dsZXIubm9BdWRpbyA9IGZhbHNlO1xyXG5cclxuXHRcdFx0Ly8gQ2xlYXIgb3V0IGBzZWxmYC5cclxuXHRcdFx0c2VsZi5fc3RhdGUgPSAndW5sb2FkZWQnO1xyXG5cdFx0XHRzZWxmLl9zb3VuZHMgPSBbXTtcclxuXHRcdFx0c2VsZiA9IG51bGw7XHJcblxyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH0sXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBMaXN0ZW4gdG8gYSBjdXN0b20gZXZlbnQuXHJcblx0XHQgKiBAcGFyYW0gIHtTdHJpbmd9ICAgZXZlbnQgRXZlbnQgbmFtZS5cclxuXHRcdCAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgICBMaXN0ZW5lciB0byBjYWxsLlxyXG5cdFx0ICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSBsaXN0ZW4gdG8gZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxyXG5cdFx0ICogQHBhcmFtICB7TnVtYmVyfSAgIG9uY2UgIChJTlRFUk5BTCkgTWFya3MgZXZlbnQgdG8gZmlyZSBvbmx5IG9uY2UuXHJcblx0XHQgKiBAcmV0dXJuIHtIb3dsfVxyXG5cdFx0ICovXHJcblx0XHRvbjogZnVuY3Rpb24oZXZlbnQsIGZuLCBpZCwgb25jZSkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xyXG5cclxuXHRcdFx0aWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdGV2ZW50cy5wdXNoKG9uY2UgPyB7XHJcblx0XHRcdFx0XHRpZDogaWQsXHJcblx0XHRcdFx0XHRmbjogZm4sXHJcblx0XHRcdFx0XHRvbmNlOiBvbmNlXHJcblx0XHRcdFx0fSA6IHtcclxuXHRcdFx0XHRcdGlkOiBpZCxcclxuXHRcdFx0XHRcdGZuOiBmblxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdH0sXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBSZW1vdmUgYSBjdXN0b20gZXZlbnQuIENhbGwgd2l0aG91dCBwYXJhbWV0ZXJzIHRvIHJlbW92ZSBhbGwgZXZlbnRzLlxyXG5cdFx0ICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXHJcblx0XHQgKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gICAgTGlzdGVuZXIgdG8gcmVtb3ZlLiBMZWF2ZSBlbXB0eSB0byByZW1vdmUgYWxsLlxyXG5cdFx0ICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSByZW1vdmUgZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxyXG5cdFx0ICogQHJldHVybiB7SG93bH1cclxuXHRcdCAqL1xyXG5cdFx0b2ZmOiBmdW5jdGlvbihldmVudCwgZm4sIGlkKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0dmFyIGV2ZW50cyA9IHNlbGZbJ19vbicgKyBldmVudF07XHJcblx0XHRcdHZhciBpID0gMDtcclxuXHJcblx0XHRcdC8vIEFsbG93IHBhc3NpbmcganVzdCBhbiBldmVudCBhbmQgSUQuXHJcblx0XHRcdGlmICh0eXBlb2YgZm4gPT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0aWQgPSBmbjtcclxuXHRcdFx0XHRmbiA9IG51bGw7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChmbiB8fCBpZCkge1xyXG5cdFx0XHRcdC8vIExvb3AgdGhyb3VnaCBldmVudCBzdG9yZSBhbmQgcmVtb3ZlIHRoZSBwYXNzZWQgZnVuY3Rpb24uXHJcblx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0dmFyIGlzSWQgPSAoaWQgPT09IGV2ZW50c1tpXS5pZCk7XHJcblx0XHRcdFx0XHRpZiAoZm4gPT09IGV2ZW50c1tpXS5mbiAmJiBpc0lkIHx8ICFmbiAmJiBpc0lkKSB7XHJcblx0XHRcdFx0XHRcdGV2ZW50cy5zcGxpY2UoaSwgMSk7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChldmVudCkge1xyXG5cdFx0XHRcdC8vIENsZWFyIG91dCBhbGwgZXZlbnRzIG9mIHRoaXMgdHlwZS5cclxuXHRcdFx0XHRzZWxmWydfb24nICsgZXZlbnRdID0gW107XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gQ2xlYXIgb3V0IGFsbCBldmVudHMgb2YgZXZlcnkgdHlwZS5cclxuXHRcdFx0XHR2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNlbGYpO1xyXG5cdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRpZiAoKGtleXNbaV0uaW5kZXhPZignX29uJykgPT09IDApICYmIEFycmF5LmlzQXJyYXkoc2VsZltrZXlzW2ldXSkpIHtcclxuXHRcdFx0XHRcdFx0c2VsZltrZXlzW2ldXSA9IFtdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogTGlzdGVuIHRvIGEgY3VzdG9tIGV2ZW50IGFuZCByZW1vdmUgaXQgb25jZSBmaXJlZC5cclxuXHRcdCAqIEBwYXJhbSAge1N0cmluZ30gICBldmVudCBFdmVudCBuYW1lLlxyXG5cdFx0ICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIGNhbGwuXHJcblx0XHQgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgaWQgICAgKG9wdGlvbmFsKSBPbmx5IGxpc3RlbiB0byBldmVudHMgZm9yIHRoaXMgc291bmQuXHJcblx0XHQgKiBAcmV0dXJuIHtIb3dsfVxyXG5cdFx0ICovXHJcblx0XHRvbmNlOiBmdW5jdGlvbihldmVudCwgZm4sIGlkKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRcdC8vIFNldHVwIHRoZSBldmVudCBsaXN0ZW5lci5cclxuXHRcdFx0c2VsZi5vbihldmVudCwgZm4sIGlkLCAxKTtcclxuXHJcblx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEVtaXQgYWxsIGV2ZW50cyBvZiBhIHNwZWNpZmljIHR5cGUgYW5kIHBhc3MgdGhlIHNvdW5kIGlkLlxyXG5cdFx0ICogQHBhcmFtICB7U3RyaW5nfSBldmVudCBFdmVudCBuYW1lLlxyXG5cdFx0ICogQHBhcmFtICB7TnVtYmVyfSBpZCAgICBTb3VuZCBJRC5cclxuXHRcdCAqIEBwYXJhbSAge051bWJlcn0gbXNnICAgTWVzc2FnZSB0byBnbyB3aXRoIGV2ZW50LlxyXG5cdFx0ICogQHJldHVybiB7SG93bH1cclxuXHRcdCAqL1xyXG5cdFx0X2VtaXQ6IGZ1bmN0aW9uKGV2ZW50LCBpZCwgbXNnKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0dmFyIGV2ZW50cyA9IHNlbGZbJ19vbicgKyBldmVudF07XHJcblxyXG5cdFx0XHQvLyBMb29wIHRocm91Z2ggZXZlbnQgc3RvcmUgYW5kIGZpcmUgYWxsIGZ1bmN0aW9ucy5cclxuXHRcdFx0Zm9yICh2YXIgaSA9IGV2ZW50cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cdFx0XHRcdC8vIE9ubHkgZmlyZSB0aGUgbGlzdGVuZXIgaWYgdGhlIGNvcnJlY3QgSUQgaXMgdXNlZC5cclxuXHRcdFx0XHRpZiAoIWV2ZW50c1tpXS5pZCB8fCBldmVudHNbaV0uaWQgPT09IGlkIHx8IGV2ZW50ID09PSAnbG9hZCcpIHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oZm4pIHtcclxuXHRcdFx0XHRcdFx0Zm4uY2FsbCh0aGlzLCBpZCwgbXNnKTtcclxuXHRcdFx0XHRcdH0uYmluZChzZWxmLCBldmVudHNbaV0uZm4pLCAwKTtcclxuXHJcblx0XHRcdFx0XHQvLyBJZiB0aGlzIGV2ZW50IHdhcyBzZXR1cCB3aXRoIGBvbmNlYCwgcmVtb3ZlIGl0LlxyXG5cdFx0XHRcdFx0aWYgKGV2ZW50c1tpXS5vbmNlKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYub2ZmKGV2ZW50LCBldmVudHNbaV0uZm4sIGV2ZW50c1tpXS5pZCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBQYXNzIHRoZSBldmVudCB0eXBlIGludG8gbG9hZCBxdWV1ZSBzbyB0aGF0IGl0IGNhbiBjb250aW51ZSBzdGVwcGluZy5cclxuXHRcdFx0c2VsZi5fbG9hZFF1ZXVlKGV2ZW50KTtcclxuXHJcblx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFF1ZXVlIG9mIGFjdGlvbnMgaW5pdGlhdGVkIGJlZm9yZSB0aGUgc291bmQgaGFzIGxvYWRlZC5cclxuXHRcdCAqIFRoZXNlIHdpbGwgYmUgY2FsbGVkIGluIHNlcXVlbmNlLCB3aXRoIHRoZSBuZXh0IG9ubHkgZmlyaW5nXHJcblx0XHQgKiBhZnRlciB0aGUgcHJldmlvdXMgaGFzIGZpbmlzaGVkIGV4ZWN1dGluZyAoZXZlbiBpZiBhc3luYyBsaWtlIHBsYXkpLlxyXG5cdFx0ICogQHJldHVybiB7SG93bH1cclxuXHRcdCAqL1xyXG5cdFx0X2xvYWRRdWV1ZTogZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdFx0aWYgKHNlbGYuX3F1ZXVlLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHR2YXIgdGFzayA9IHNlbGYuX3F1ZXVlWzBdO1xyXG5cclxuXHRcdFx0XHQvLyBSZW1vdmUgdGhpcyB0YXNrIGlmIGEgbWF0Y2hpbmcgZXZlbnQgd2FzIHBhc3NlZC5cclxuXHRcdFx0XHRpZiAodGFzay5ldmVudCA9PT0gZXZlbnQpIHtcclxuXHRcdFx0XHRcdHNlbGYuX3F1ZXVlLnNoaWZ0KCk7XHJcblx0XHRcdFx0XHRzZWxmLl9sb2FkUXVldWUoKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFJ1biB0aGUgdGFzayBpZiBubyBldmVudCB0eXBlIGlzIHBhc3NlZC5cclxuXHRcdFx0XHRpZiAoIWV2ZW50KSB7XHJcblx0XHRcdFx0XHR0YXNrLmFjdGlvbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogRmlyZWQgd2hlbiBwbGF5YmFjayBlbmRzIGF0IHRoZSBlbmQgb2YgdGhlIGR1cmF0aW9uLlxyXG5cdFx0ICogQHBhcmFtICB7U291bmR9IHNvdW5kIFRoZSBzb3VuZCBvYmplY3QgdG8gd29yayB3aXRoLlxyXG5cdFx0ICogQHJldHVybiB7SG93bH1cclxuXHRcdCAqL1xyXG5cdFx0X2VuZGVkOiBmdW5jdGlvbihzb3VuZCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdHZhciBzcHJpdGUgPSBzb3VuZC5fc3ByaXRlO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UgYXJlIHVzaW5nIElFIGFuZCB0aGVyZSB3YXMgbmV0d29yayBsYXRlbmN5IHdlIG1heSBiZSBjbGlwcGluZ1xyXG5cdFx0XHQvLyBhdWRpbyBiZWZvcmUgaXQgY29tcGxldGVzIHBsYXlpbmcuIExldHMgY2hlY2sgdGhlIG5vZGUgdG8gbWFrZSBzdXJlIGl0XHJcblx0XHRcdC8vIGJlbGlldmVzIGl0IGhhcyBjb21wbGV0ZWQsIGJlZm9yZSBlbmRpbmcgdGhlIHBsYXliYWNrLlxyXG5cdFx0XHRpZiAoIXNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbm9kZS5wYXVzZWQgJiYgIXNvdW5kLl9ub2RlLmVuZGVkICYmIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lIDwgc291bmQuX3N0b3ApIHtcclxuXHRcdFx0XHRzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCAxMDApO1xyXG5cdFx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBTaG91bGQgdGhpcyBzb3VuZCBsb29wP1xyXG5cdFx0XHR2YXIgbG9vcCA9ICEhKHNvdW5kLl9sb29wIHx8IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzJdKTtcclxuXHJcblx0XHRcdC8vIEZpcmUgdGhlIGVuZGVkIGV2ZW50LlxyXG5cdFx0XHRzZWxmLl9lbWl0KCdlbmQnLCBzb3VuZC5faWQpO1xyXG5cclxuXHRcdFx0Ly8gUmVzdGFydCB0aGUgcGxheWJhY2sgZm9yIEhUTUw1IEF1ZGlvIGxvb3AuXHJcblx0XHRcdGlmICghc2VsZi5fd2ViQXVkaW8gJiYgbG9vcCkge1xyXG5cdFx0XHRcdHNlbGYuc3RvcChzb3VuZC5faWQsIHRydWUpLnBsYXkoc291bmQuX2lkKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVzdGFydCB0aGlzIHRpbWVyIGlmIG9uIGEgV2ViIEF1ZGlvIGxvb3AuXHJcblx0XHRcdGlmIChzZWxmLl93ZWJBdWRpbyAmJiBsb29wKSB7XHJcblx0XHRcdFx0c2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XHJcblx0XHRcdFx0c291bmQuX3NlZWsgPSBzb3VuZC5fc3RhcnQgfHwgMDtcclxuXHRcdFx0XHRzb3VuZC5fcmF0ZVNlZWsgPSAwO1xyXG5cdFx0XHRcdHNvdW5kLl9wbGF5U3RhcnQgPSBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lO1xyXG5cclxuXHRcdFx0XHR2YXIgdGltZW91dCA9ICgoc291bmQuX3N0b3AgLSBzb3VuZC5fc3RhcnQpICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XHJcblx0XHRcdFx0c2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTWFyayB0aGUgbm9kZSBhcyBwYXVzZWQuXHJcblx0XHRcdGlmIChzZWxmLl93ZWJBdWRpbyAmJiAhbG9vcCkge1xyXG5cdFx0XHRcdHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xyXG5cdFx0XHRcdHNvdW5kLl9lbmRlZCA9IHRydWU7XHJcblx0XHRcdFx0c291bmQuX3NlZWsgPSBzb3VuZC5fc3RhcnQgfHwgMDtcclxuXHRcdFx0XHRzb3VuZC5fcmF0ZVNlZWsgPSAwO1xyXG5cdFx0XHRcdHNlbGYuX2NsZWFyVGltZXIoc291bmQuX2lkKTtcclxuXHJcblx0XHRcdFx0Ly8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXHJcblx0XHRcdFx0c2VsZi5fY2xlYW5CdWZmZXIoc291bmQuX25vZGUpO1xyXG5cclxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIGF1dG8tc3VzcGVuZCBBdWRpb0NvbnRleHQgaWYgbm8gc291bmRzIGFyZSBzdGlsbCBwbGF5aW5nLlxyXG5cdFx0XHRcdEhvd2xlci5fYXV0b1N1c3BlbmQoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gV2hlbiB1c2luZyBhIHNwcml0ZSwgZW5kIHRoZSB0cmFjay5cclxuXHRcdFx0aWYgKCFzZWxmLl93ZWJBdWRpbyAmJiAhbG9vcCkge1xyXG5cdFx0XHRcdHNlbGYuc3RvcChzb3VuZC5faWQsIHRydWUpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdH0sXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDbGVhciB0aGUgZW5kIHRpbWVyIGZvciBhIHNvdW5kIHBsYXliYWNrLlxyXG5cdFx0ICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgSUQuXHJcblx0XHQgKiBAcmV0dXJuIHtIb3dsfVxyXG5cdFx0ICovXHJcblx0XHRfY2xlYXJUaW1lcjogZnVuY3Rpb24oaWQpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdFx0aWYgKHNlbGYuX2VuZFRpbWVyc1tpZF0pIHtcclxuXHRcdFx0XHQvLyBDbGVhciB0aGUgdGltZW91dCBvciByZW1vdmUgdGhlIGVuZGVkIGxpc3RlbmVyLlxyXG5cdFx0XHRcdGlmICh0eXBlb2Ygc2VsZi5fZW5kVGltZXJzW2lkXSAhPT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHNlbGYuX2VuZFRpbWVyc1tpZF0pO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xyXG5cdFx0XHRcdFx0aWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlKSB7XHJcblx0XHRcdFx0XHRcdHNvdW5kLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kVGltZXJzW2lkXSwgZmFsc2UpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZGVsZXRlIHNlbGYuX2VuZFRpbWVyc1tpZF07XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFJldHVybiB0aGUgc291bmQgaWRlbnRpZmllZCBieSB0aGlzIElELCBvciByZXR1cm4gbnVsbC5cclxuXHRcdCAqIEBwYXJhbSAge051bWJlcn0gaWQgU291bmQgSURcclxuXHRcdCAqIEByZXR1cm4ge09iamVjdH0gICAgU291bmQgb2JqZWN0IG9yIG51bGwuXHJcblx0XHQgKi9cclxuXHRcdF9zb3VuZEJ5SWQ6IGZ1bmN0aW9uKGlkKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRcdC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBmaW5kIHRoZSBvbmUgd2l0aCB0aGlzIElELlxyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlmIChpZCA9PT0gc2VsZi5fc291bmRzW2ldLl9pZCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHNlbGYuX3NvdW5kc1tpXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFJldHVybiBhbiBpbmFjdGl2ZSBzb3VuZCBmcm9tIHRoZSBwb29sIG9yIGNyZWF0ZSBhIG5ldyBvbmUuXHJcblx0XHQgKiBAcmV0dXJuIHtTb3VuZH0gU291bmQgcGxheWJhY2sgb2JqZWN0LlxyXG5cdFx0ICovXHJcblx0XHRfaW5hY3RpdmVTb3VuZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRcdHNlbGYuX2RyYWluKCk7XHJcblxyXG5cdFx0XHQvLyBGaW5kIHRoZSBmaXJzdCBpbmFjdGl2ZSBub2RlIHRvIHJlY3ljbGUuXHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYgKHNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBzZWxmLl9zb3VuZHNbaV0ucmVzZXQoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIG5vIGluYWN0aXZlIG5vZGUgd2FzIGZvdW5kLCBjcmVhdGUgYSBuZXcgb25lLlxyXG5cdFx0XHRyZXR1cm4gbmV3IFNvdW5kKHNlbGYpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIERyYWluIGV4Y2VzcyBpbmFjdGl2ZSBzb3VuZHMgZnJvbSB0aGUgcG9vbC5cclxuXHRcdCAqL1xyXG5cdFx0X2RyYWluOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHR2YXIgbGltaXQgPSBzZWxmLl9wb29sO1xyXG5cdFx0XHR2YXIgY250ID0gMDtcclxuXHRcdFx0dmFyIGkgPSAwO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlcmUgYXJlIGxlc3Mgc291bmRzIHRoYW4gdGhlIG1heCBwb29sIHNpemUsIHdlIGFyZSBkb25lLlxyXG5cdFx0XHRpZiAoc2VsZi5fc291bmRzLmxlbmd0aCA8IGxpbWl0KSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDb3VudCB0aGUgbnVtYmVyIG9mIGluYWN0aXZlIHNvdW5kcy5cclxuXHRcdFx0Zm9yIChpID0gMDsgaSA8IHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XHJcblx0XHRcdFx0XHRjbnQrKztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJlbW92ZSBleGNlc3MgaW5hY3RpdmUgc291bmRzLCBnb2luZyBpbiByZXZlcnNlIG9yZGVyLlxyXG5cdFx0XHRmb3IgKGkgPSBzZWxmLl9zb3VuZHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuXHRcdFx0XHRpZiAoY250IDw9IGxpbWl0KSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xyXG5cdFx0XHRcdFx0Ly8gRGlzY29ubmVjdCB0aGUgYXVkaW8gc291cmNlIHdoZW4gdXNpbmcgV2ViIEF1ZGlvLlxyXG5cdFx0XHRcdFx0aWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNlbGYuX3NvdW5kc1tpXS5fbm9kZSkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9zb3VuZHNbaV0uX25vZGUuZGlzY29ubmVjdCgwKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBSZW1vdmUgc291bmRzIHVudGlsIHdlIGhhdmUgdGhlIHBvb2wgc2l6ZS5cclxuXHRcdFx0XHRcdHNlbGYuX3NvdW5kcy5zcGxpY2UoaSwgMSk7XHJcblx0XHRcdFx0XHRjbnQtLTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBHZXQgYWxsIElEJ3MgZnJvbSB0aGUgc291bmRzIHBvb2wuXHJcblx0XHQgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIE9ubHkgcmV0dXJuIG9uZSBJRCBpZiBvbmUgaXMgcGFzc2VkLlxyXG5cdFx0ICogQHJldHVybiB7QXJyYXl9ICAgIEFycmF5IG9mIElEcy5cclxuXHRcdCAqL1xyXG5cdFx0X2dldFNvdW5kSWRzOiBmdW5jdGlvbihpZCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0XHRpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdHZhciBpZHMgPSBbXTtcclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0aWRzLnB1c2goc2VsZi5fc291bmRzW2ldLl9pZCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4gaWRzO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiBbaWRdO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogTG9hZCB0aGUgc291bmQgYmFjayBpbnRvIHRoZSBidWZmZXIgc291cmNlLlxyXG5cdFx0ICogQHBhcmFtICB7U291bmR9IHNvdW5kIFRoZSBzb3VuZCBvYmplY3QgdG8gd29yayB3aXRoLlxyXG5cdFx0ICogQHJldHVybiB7SG93bH1cclxuXHRcdCAqL1xyXG5cdFx0X3JlZnJlc2hCdWZmZXI6IGZ1bmN0aW9uKHNvdW5kKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRcdC8vIFNldHVwIHRoZSBidWZmZXIgc291cmNlIGZvciBwbGF5YmFjay5cclxuXHRcdFx0c291bmQuX25vZGUuYnVmZmVyU291cmNlID0gSG93bGVyLmN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcclxuXHRcdFx0c291bmQuX25vZGUuYnVmZmVyU291cmNlLmJ1ZmZlciA9IGNhY2hlW3NlbGYuX3NyY107XHJcblxyXG5cdFx0XHQvLyBDb25uZWN0IHRvIHRoZSBjb3JyZWN0IG5vZGUuXHJcblx0XHRcdGlmIChzb3VuZC5fcGFubmVyKSB7XHJcblx0XHRcdFx0c291bmQuX25vZGUuYnVmZmVyU291cmNlLmNvbm5lY3Qoc291bmQuX3Bhbm5lcik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0c291bmQuX25vZGUuYnVmZmVyU291cmNlLmNvbm5lY3Qoc291bmQuX25vZGUpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBTZXR1cCBsb29waW5nIGFuZCBwbGF5YmFjayByYXRlLlxyXG5cdFx0XHRzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcCA9IHNvdW5kLl9sb29wO1xyXG5cdFx0XHRpZiAoc291bmQuX2xvb3ApIHtcclxuXHRcdFx0XHRzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcFN0YXJ0ID0gc291bmQuX3N0YXJ0IHx8IDA7XHJcblx0XHRcdFx0c291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BFbmQgPSBzb3VuZC5fc3RvcCB8fCAwO1xyXG5cdFx0XHR9XHJcblx0XHRcdHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5wbGF5YmFja1JhdGUuc2V0VmFsdWVBdFRpbWUoc291bmQuX3JhdGUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xyXG5cclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogUHJldmVudCBtZW1vcnkgbGVha3MgYnkgY2xlYW5pbmcgdXAgdGhlIGJ1ZmZlciBzb3VyY2UgYWZ0ZXIgcGxheWJhY2suXHJcblx0XHQgKiBAcGFyYW0gIHtPYmplY3R9IG5vZGUgU291bmQncyBhdWRpbyBub2RlIGNvbnRhaW5pbmcgdGhlIGJ1ZmZlciBzb3VyY2UuXHJcblx0XHQgKiBAcmV0dXJuIHtIb3dsfVxyXG5cdFx0ICovXHJcblx0XHRfY2xlYW5CdWZmZXI6IGZ1bmN0aW9uKG5vZGUpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHR2YXIgaXNJT1MgPSBIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci52ZW5kb3IuaW5kZXhPZignQXBwbGUnKSA+PSAwO1xyXG5cclxuXHRcdFx0aWYgKEhvd2xlci5fc2NyYXRjaEJ1ZmZlciAmJiBub2RlLmJ1ZmZlclNvdXJjZSkge1xyXG5cdFx0XHRcdG5vZGUuYnVmZmVyU291cmNlLm9uZW5kZWQgPSBudWxsO1xyXG5cdFx0XHRcdG5vZGUuYnVmZmVyU291cmNlLmRpc2Nvbm5lY3QoMCk7XHJcblx0XHRcdFx0aWYgKGlzSU9TKSB7XHJcblx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRub2RlLmJ1ZmZlclNvdXJjZS5idWZmZXIgPSBIb3dsZXIuX3NjcmF0Y2hCdWZmZXI7XHJcblx0XHRcdFx0XHR9IGNhdGNoIChlKSB7fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRub2RlLmJ1ZmZlclNvdXJjZSA9IG51bGw7XHJcblxyXG5cdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKiogU2luZ2xlIFNvdW5kIE1ldGhvZHMgKiovXHJcblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcblx0LyoqXHJcblx0ICogU2V0dXAgdGhlIHNvdW5kIG9iamVjdCwgd2hpY2ggZWFjaCBub2RlIGF0dGFjaGVkIHRvIGEgSG93bCBncm91cCBpcyBjb250YWluZWQgaW4uXHJcblx0ICogQHBhcmFtIHtPYmplY3R9IGhvd2wgVGhlIEhvd2wgcGFyZW50IGdyb3VwLlxyXG5cdCAqL1xyXG5cdHZhciBTb3VuZCA9IGZ1bmN0aW9uKGhvd2wpIHtcclxuXHRcdHRoaXMuX3BhcmVudCA9IGhvd2w7XHJcblx0XHR0aGlzLmluaXQoKTtcclxuXHR9O1xyXG5cdFNvdW5kLnByb3RvdHlwZSA9IHtcclxuXHRcdC8qKlxyXG5cdFx0ICogSW5pdGlhbGl6ZSBhIG5ldyBTb3VuZCBvYmplY3QuXHJcblx0XHQgKiBAcmV0dXJuIHtTb3VuZH1cclxuXHRcdCAqL1xyXG5cdFx0aW5pdDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0dmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcclxuXHJcblx0XHRcdC8vIFNldHVwIHRoZSBkZWZhdWx0IHBhcmFtZXRlcnMuXHJcblx0XHRcdHNlbGYuX211dGVkID0gcGFyZW50Ll9tdXRlZDtcclxuXHRcdFx0c2VsZi5fbG9vcCA9IHBhcmVudC5fbG9vcDtcclxuXHRcdFx0c2VsZi5fdm9sdW1lID0gcGFyZW50Ll92b2x1bWU7XHJcblx0XHRcdHNlbGYuX3JhdGUgPSBwYXJlbnQuX3JhdGU7XHJcblx0XHRcdHNlbGYuX3NlZWsgPSAwO1xyXG5cdFx0XHRzZWxmLl9wYXVzZWQgPSB0cnVlO1xyXG5cdFx0XHRzZWxmLl9lbmRlZCA9IHRydWU7XHJcblx0XHRcdHNlbGYuX3Nwcml0ZSA9ICdfX2RlZmF1bHQnO1xyXG5cclxuXHRcdFx0Ly8gR2VuZXJhdGUgYSB1bmlxdWUgSUQgZm9yIHRoaXMgc291bmQuXHJcblx0XHRcdHNlbGYuX2lkID0gKytIb3dsZXIuX2NvdW50ZXI7XHJcblxyXG5cdFx0XHQvLyBBZGQgaXRzZWxmIHRvIHRoZSBwYXJlbnQncyBwb29sLlxyXG5cdFx0XHRwYXJlbnQuX3NvdW5kcy5wdXNoKHNlbGYpO1xyXG5cclxuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBuZXcgbm9kZS5cclxuXHRcdFx0c2VsZi5jcmVhdGUoKTtcclxuXHJcblx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIENyZWF0ZSBhbmQgc2V0dXAgYSBuZXcgc291bmQgb2JqZWN0LCB3aGV0aGVyIEhUTUw1IEF1ZGlvIG9yIFdlYiBBdWRpby5cclxuXHRcdCAqIEByZXR1cm4ge1NvdW5kfVxyXG5cdFx0ICovXHJcblx0XHRjcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XHJcblx0XHRcdHZhciB2b2x1bWUgPSAoSG93bGVyLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCB8fCBzZWxmLl9wYXJlbnQuX211dGVkKSA/IDAgOiBzZWxmLl92b2x1bWU7XHJcblxyXG5cdFx0XHRpZiAocGFyZW50Ll93ZWJBdWRpbykge1xyXG5cdFx0XHRcdC8vIENyZWF0ZSB0aGUgZ2FpbiBub2RlIGZvciBjb250cm9sbGluZyB2b2x1bWUgKHRoZSBzb3VyY2Ugd2lsbCBjb25uZWN0IHRvIHRoaXMpLlxyXG5cdFx0XHRcdHNlbGYuX25vZGUgPSAodHlwZW9mIEhvd2xlci5jdHguY3JlYXRlR2FpbiA9PT0gJ3VuZGVmaW5lZCcpID8gSG93bGVyLmN0eC5jcmVhdGVHYWluTm9kZSgpIDogSG93bGVyLmN0eC5jcmVhdGVHYWluKCk7XHJcblx0XHRcdFx0c2VsZi5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XHJcblx0XHRcdFx0c2VsZi5fbm9kZS5wYXVzZWQgPSB0cnVlO1xyXG5cdFx0XHRcdHNlbGYuX25vZGUuY29ubmVjdChIb3dsZXIubWFzdGVyR2Fpbik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gR2V0IGFuIHVubG9ja2VkIEF1ZGlvIG9iamVjdCBmcm9tIHRoZSBwb29sLlxyXG5cdFx0XHRcdHNlbGYuX25vZGUgPSBIb3dsZXIuX29idGFpbkh0bWw1QXVkaW8oKTtcclxuXHJcblx0XHRcdFx0Ly8gTGlzdGVuIGZvciBlcnJvcnMgKGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMtYXV0aG9yLXZpZXcvc3BlYy5odG1sI21lZGlhZXJyb3IpLlxyXG5cdFx0XHRcdHNlbGYuX2Vycm9yRm4gPSBzZWxmLl9lcnJvckxpc3RlbmVyLmJpbmQoc2VsZik7XHJcblx0XHRcdFx0c2VsZi5fbm9kZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHNlbGYuX2Vycm9yRm4sIGZhbHNlKTtcclxuXHJcblx0XHRcdFx0Ly8gTGlzdGVuIGZvciAnY2FucGxheXRocm91Z2gnIGV2ZW50IHRvIGxldCB1cyBrbm93IHRoZSBzb3VuZCBpcyByZWFkeS5cclxuXHRcdFx0XHRzZWxmLl9sb2FkRm4gPSBzZWxmLl9sb2FkTGlzdGVuZXIuYmluZChzZWxmKTtcclxuXHRcdFx0XHRzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIHNlbGYuX2xvYWRGbiwgZmFsc2UpO1xyXG5cclxuXHRcdFx0XHQvLyBTZXR1cCB0aGUgbmV3IGF1ZGlvIG5vZGUuXHJcblx0XHRcdFx0c2VsZi5fbm9kZS5zcmMgPSBwYXJlbnQuX3NyYztcclxuXHRcdFx0XHRzZWxmLl9ub2RlLnByZWxvYWQgPSAnYXV0byc7XHJcblx0XHRcdFx0c2VsZi5fbm9kZS52b2x1bWUgPSB2b2x1bWUgKiBIb3dsZXIudm9sdW1lKCk7XHJcblxyXG5cdFx0XHRcdC8vIEJlZ2luIGxvYWRpbmcgdGhlIHNvdXJjZS5cclxuXHRcdFx0XHRzZWxmLl9ub2RlLmxvYWQoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogUmVzZXQgdGhlIHBhcmFtZXRlcnMgb2YgdGhpcyBzb3VuZCB0byB0aGUgb3JpZ2luYWwgc3RhdGUgKGZvciByZWN5Y2xlKS5cclxuXHRcdCAqIEByZXR1cm4ge1NvdW5kfVxyXG5cdFx0ICovXHJcblx0XHRyZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0dmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcclxuXHJcblx0XHRcdC8vIFJlc2V0IGFsbCBvZiB0aGUgcGFyYW1ldGVycyBvZiB0aGlzIHNvdW5kLlxyXG5cdFx0XHRzZWxmLl9tdXRlZCA9IHBhcmVudC5fbXV0ZWQ7XHJcblx0XHRcdHNlbGYuX2xvb3AgPSBwYXJlbnQuX2xvb3A7XHJcblx0XHRcdHNlbGYuX3ZvbHVtZSA9IHBhcmVudC5fdm9sdW1lO1xyXG5cdFx0XHRzZWxmLl9yYXRlID0gcGFyZW50Ll9yYXRlO1xyXG5cdFx0XHRzZWxmLl9zZWVrID0gMDtcclxuXHRcdFx0c2VsZi5fcmF0ZVNlZWsgPSAwO1xyXG5cdFx0XHRzZWxmLl9wYXVzZWQgPSB0cnVlO1xyXG5cdFx0XHRzZWxmLl9lbmRlZCA9IHRydWU7XHJcblx0XHRcdHNlbGYuX3Nwcml0ZSA9ICdfX2RlZmF1bHQnO1xyXG5cclxuXHRcdFx0Ly8gR2VuZXJhdGUgYSBuZXcgSUQgc28gdGhhdCBpdCBpc24ndCBjb25mdXNlZCB3aXRoIHRoZSBwcmV2aW91cyBzb3VuZC5cclxuXHRcdFx0c2VsZi5faWQgPSArK0hvd2xlci5fY291bnRlcjtcclxuXHJcblx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEhUTUw1IEF1ZGlvIGVycm9yIGxpc3RlbmVyIGNhbGxiYWNrLlxyXG5cdFx0ICovXHJcblx0XHRfZXJyb3JMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRcdC8vIEZpcmUgYW4gZXJyb3IgZXZlbnQgYW5kIHBhc3MgYmFjayB0aGUgY29kZS5cclxuXHRcdFx0c2VsZi5fcGFyZW50Ll9lbWl0KCdsb2FkZXJyb3InLCBzZWxmLl9pZCwgc2VsZi5fbm9kZS5lcnJvciA/IHNlbGYuX25vZGUuZXJyb3IuY29kZSA6IDApO1xyXG5cclxuXHRcdFx0Ly8gQ2xlYXIgdGhlIGV2ZW50IGxpc3RlbmVyLlxyXG5cdFx0XHRzZWxmLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgc2VsZi5fZXJyb3JGbiwgZmFsc2UpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEhUTUw1IEF1ZGlvIGNhbnBsYXl0aHJvdWdoIGxpc3RlbmVyIGNhbGxiYWNrLlxyXG5cdFx0ICovXHJcblx0XHRfbG9hZExpc3RlbmVyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHR2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xyXG5cclxuXHRcdFx0Ly8gUm91bmQgdXAgdGhlIGR1cmF0aW9uIHRvIGFjY291bnQgZm9yIHRoZSBsb3dlciBwcmVjaXNpb24gaW4gSFRNTDUgQXVkaW8uXHJcblx0XHRcdHBhcmVudC5fZHVyYXRpb24gPSBNYXRoLmNlaWwoc2VsZi5fbm9kZS5kdXJhdGlvbiAqIDEwKSAvIDEwO1xyXG5cclxuXHRcdFx0Ly8gU2V0dXAgYSBzcHJpdGUgaWYgbm9uZSBpcyBkZWZpbmVkLlxyXG5cdFx0XHRpZiAoT2JqZWN0LmtleXMocGFyZW50Ll9zcHJpdGUpLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRcdHBhcmVudC5fc3ByaXRlID0ge1xyXG5cdFx0XHRcdFx0X19kZWZhdWx0OiBbMCwgcGFyZW50Ll9kdXJhdGlvbiAqIDEwMDBdXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHBhcmVudC5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XHJcblx0XHRcdFx0cGFyZW50Ll9zdGF0ZSA9ICdsb2FkZWQnO1xyXG5cdFx0XHRcdHBhcmVudC5fZW1pdCgnbG9hZCcpO1xyXG5cdFx0XHRcdHBhcmVudC5fbG9hZFF1ZXVlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENsZWFyIHRoZSBldmVudCBsaXN0ZW5lci5cclxuXHRcdFx0c2VsZi5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBzZWxmLl9sb2FkRm4sIGZhbHNlKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKiogSGVscGVyIE1ldGhvZHMgKiovXHJcblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcblx0dmFyIGNhY2hlID0ge307XHJcblxyXG5cdC8qKlxyXG5cdCAqIEJ1ZmZlciBhIHNvdW5kIGZyb20gVVJMLCBEYXRhIFVSSSBvciBjYWNoZSBhbmQgZGVjb2RlIHRvIGF1ZGlvIHNvdXJjZSAoV2ViIEF1ZGlvIEFQSSkuXHJcblx0ICogQHBhcmFtICB7SG93bH0gc2VsZlxyXG5cdCAqL1xyXG5cdHZhciBsb2FkQnVmZmVyID0gZnVuY3Rpb24oc2VsZikge1xyXG5cdFx0dmFyIHVybCA9IHNlbGYuX3NyYztcclxuXHJcblx0XHQvLyBDaGVjayBpZiB0aGUgYnVmZmVyIGhhcyBhbHJlYWR5IGJlZW4gY2FjaGVkIGFuZCB1c2UgaXQgaW5zdGVhZC5cclxuXHRcdGlmIChjYWNoZVt1cmxdKSB7XHJcblx0XHRcdC8vIFNldCB0aGUgZHVyYXRpb24gZnJvbSB0aGUgY2FjaGUuXHJcblx0XHRcdHNlbGYuX2R1cmF0aW9uID0gY2FjaGVbdXJsXS5kdXJhdGlvbjtcclxuXHJcblx0XHRcdC8vIExvYWQgdGhlIHNvdW5kIGludG8gdGhpcyBIb3dsLlxyXG5cdFx0XHRsb2FkU291bmQoc2VsZik7XHJcblxyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKC9eZGF0YTpbXjtdKztiYXNlNjQsLy50ZXN0KHVybCkpIHtcclxuXHRcdFx0Ly8gRGVjb2RlIHRoZSBiYXNlNjQgZGF0YSBVUkkgd2l0aG91dCBYSFIsIHNpbmNlIHNvbWUgYnJvd3NlcnMgZG9uJ3Qgc3VwcG9ydCBpdC5cclxuXHRcdFx0dmFyIGRhdGEgPSBhdG9iKHVybC5zcGxpdCgnLCcpWzFdKTtcclxuXHRcdFx0dmFyIGRhdGFWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGgpO1xyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyArK2kpIHtcclxuXHRcdFx0XHRkYXRhVmlld1tpXSA9IGRhdGEuY2hhckNvZGVBdChpKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZGVjb2RlQXVkaW9EYXRhKGRhdGFWaWV3LmJ1ZmZlciwgc2VsZik7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBMb2FkIHRoZSBidWZmZXIgZnJvbSB0aGUgVVJMLlxyXG5cdFx0XHR2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblx0XHRcdHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xyXG5cdFx0XHR4aHIud2l0aENyZWRlbnRpYWxzID0gc2VsZi5feGhyV2l0aENyZWRlbnRpYWxzO1xyXG5cdFx0XHR4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcclxuXHRcdFx0eGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdC8vIE1ha2Ugc3VyZSB3ZSBnZXQgYSBzdWNjZXNzZnVsIHJlc3BvbnNlIGJhY2suXHJcblx0XHRcdFx0dmFyIGNvZGUgPSAoeGhyLnN0YXR1cyArICcnKVswXTtcclxuXHRcdFx0XHRpZiAoY29kZSAhPT0gJzAnICYmIGNvZGUgIT09ICcyJyAmJiBjb2RlICE9PSAnMycpIHtcclxuXHRcdFx0XHRcdHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdGYWlsZWQgbG9hZGluZyBhdWRpbyBmaWxlIHdpdGggc3RhdHVzOiAnICsgeGhyLnN0YXR1cyArICcuJyk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRkZWNvZGVBdWRpb0RhdGEoeGhyLnJlc3BvbnNlLCBzZWxmKTtcclxuXHRcdFx0fTtcclxuXHRcdFx0eGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQvLyBJZiB0aGVyZSBpcyBhbiBlcnJvciwgc3dpdGNoIHRvIEhUTUw1IEF1ZGlvLlxyXG5cdFx0XHRcdGlmIChzZWxmLl93ZWJBdWRpbykge1xyXG5cdFx0XHRcdFx0c2VsZi5faHRtbDUgPSB0cnVlO1xyXG5cdFx0XHRcdFx0c2VsZi5fd2ViQXVkaW8gPSBmYWxzZTtcclxuXHRcdFx0XHRcdHNlbGYuX3NvdW5kcyA9IFtdO1xyXG5cdFx0XHRcdFx0ZGVsZXRlIGNhY2hlW3VybF07XHJcblx0XHRcdFx0XHRzZWxmLmxvYWQoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHRcdHNhZmVYaHJTZW5kKHhocik7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU2VuZCB0aGUgWEhSIHJlcXVlc3Qgd3JhcHBlZCBpbiBhIHRyeS9jYXRjaC5cclxuXHQgKiBAcGFyYW0gIHtPYmplY3R9IHhociBYSFIgdG8gc2VuZC5cclxuXHQgKi9cclxuXHR2YXIgc2FmZVhoclNlbmQgPSBmdW5jdGlvbih4aHIpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdHhoci5zZW5kKCk7XHJcblx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdHhoci5vbmVycm9yKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVjb2RlIGF1ZGlvIGRhdGEgZnJvbSBhbiBhcnJheSBidWZmZXIuXHJcblx0ICogQHBhcmFtICB7QXJyYXlCdWZmZXJ9IGFycmF5YnVmZmVyIFRoZSBhdWRpbyBkYXRhLlxyXG5cdCAqIEBwYXJhbSAge0hvd2x9ICAgICAgICBzZWxmXHJcblx0ICovXHJcblx0dmFyIGRlY29kZUF1ZGlvRGF0YSA9IGZ1bmN0aW9uKGFycmF5YnVmZmVyLCBzZWxmKSB7XHJcblx0XHQvLyBGaXJlIGEgbG9hZCBlcnJvciBpZiBzb21ldGhpbmcgYnJva2UuXHJcblx0XHR2YXIgZXJyb3IgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0c2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ0RlY29kaW5nIGF1ZGlvIGRhdGEgZmFpbGVkLicpO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBMb2FkIHRoZSBzb3VuZCBvbiBzdWNjZXNzLlxyXG5cdFx0dmFyIHN1Y2Nlc3MgPSBmdW5jdGlvbihidWZmZXIpIHtcclxuXHRcdFx0aWYgKGJ1ZmZlciAmJiBzZWxmLl9zb3VuZHMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdGNhY2hlW3NlbGYuX3NyY10gPSBidWZmZXI7XHJcblx0XHRcdFx0bG9hZFNvdW5kKHNlbGYsIGJ1ZmZlcik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZXJyb3IoKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBEZWNvZGUgdGhlIGJ1ZmZlciBpbnRvIGFuIGF1ZGlvIHNvdXJjZS5cclxuXHRcdGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgSG93bGVyLmN0eC5kZWNvZGVBdWRpb0RhdGEubGVuZ3RoID09PSAxKSB7XHJcblx0XHRcdEhvd2xlci5jdHguZGVjb2RlQXVkaW9EYXRhKGFycmF5YnVmZmVyKS50aGVuKHN1Y2Nlc3MpLmNhdGNoKGVycm9yKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdEhvd2xlci5jdHguZGVjb2RlQXVkaW9EYXRhKGFycmF5YnVmZmVyLCBzdWNjZXNzLCBlcnJvcik7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU291bmQgaXMgbm93IGxvYWRlZCwgc28gZmluaXNoIHNldHRpbmcgZXZlcnl0aGluZyB1cCBhbmQgZmlyZSB0aGUgbG9hZGVkIGV2ZW50LlxyXG5cdCAqIEBwYXJhbSAge0hvd2x9IHNlbGZcclxuXHQgKiBAcGFyYW0gIHtPYmplY3R9IGJ1ZmZlciBUaGUgZGVjb2RlZCBidWZmZXIgc291bmQgc291cmNlLlxyXG5cdCAqL1xyXG5cdHZhciBsb2FkU291bmQgPSBmdW5jdGlvbihzZWxmLCBidWZmZXIpIHtcclxuXHRcdC8vIFNldCB0aGUgZHVyYXRpb24uXHJcblx0XHRpZiAoYnVmZmVyICYmICFzZWxmLl9kdXJhdGlvbikge1xyXG5cdFx0XHRzZWxmLl9kdXJhdGlvbiA9IGJ1ZmZlci5kdXJhdGlvbjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBTZXR1cCBhIHNwcml0ZSBpZiBub25lIGlzIGRlZmluZWQuXHJcblx0XHRpZiAoT2JqZWN0LmtleXMoc2VsZi5fc3ByaXRlKS5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0c2VsZi5fc3ByaXRlID0ge1xyXG5cdFx0XHRcdF9fZGVmYXVsdDogWzAsIHNlbGYuX2R1cmF0aW9uICogMTAwMF1cclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBGaXJlIHRoZSBsb2FkZWQgZXZlbnQuXHJcblx0XHRpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XHJcblx0XHRcdHNlbGYuX3N0YXRlID0gJ2xvYWRlZCc7XHJcblx0XHRcdHNlbGYuX2VtaXQoJ2xvYWQnKTtcclxuXHRcdFx0c2VsZi5fbG9hZFF1ZXVlKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU2V0dXAgdGhlIGF1ZGlvIGNvbnRleHQgd2hlbiBhdmFpbGFibGUsIG9yIHN3aXRjaCB0byBIVE1MNSBBdWRpbyBtb2RlLlxyXG5cdCAqL1xyXG5cdHZhciBzZXR1cEF1ZGlvQ29udGV4dCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly8gSWYgd2UgaGF2ZSBhbHJlYWR5IGRldGVjdGVkIHRoYXQgV2ViIEF1ZGlvIGlzbid0IHN1cHBvcnRlZCwgZG9uJ3QgcnVuIHRoaXMgc3RlcCBhZ2Fpbi5cclxuXHRcdGlmICghSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIHdlIGFyZSB1c2luZyBXZWIgQXVkaW8gYW5kIHNldHVwIHRoZSBBdWRpb0NvbnRleHQgaWYgd2UgYXJlLlxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0aWYgKHR5cGVvZiBBdWRpb0NvbnRleHQgIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0SG93bGVyLmN0eCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcclxuXHRcdFx0fSBlbHNlIGlmICh0eXBlb2Ygd2Via2l0QXVkaW9Db250ZXh0ICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdEhvd2xlci5jdHggPSBuZXcgd2Via2l0QXVkaW9Db250ZXh0KCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0SG93bGVyLnVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIHRoZSBhdWRpbyBjb250ZXh0IGNyZWF0aW9uIHN0aWxsIGZhaWxlZCwgc2V0IHVzaW5nIHdlYiBhdWRpbyB0byBmYWxzZS5cclxuXHRcdGlmICghSG93bGVyLmN0eCkge1xyXG5cdFx0XHRIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIGEgd2VidmlldyBpcyBiZWluZyB1c2VkIG9uIGlPUzggb3IgZWFybGllciAocmF0aGVyIHRoYW4gdGhlIGJyb3dzZXIpLlxyXG5cdFx0Ly8gSWYgaXQgaXMsIGRpc2FibGUgV2ViIEF1ZGlvIGFzIGl0IGNhdXNlcyBjcmFzaGluZy5cclxuXHRcdHZhciBpT1MgPSAoL2lQKGhvbmV8b2R8YWQpLy50ZXN0KEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnBsYXRmb3JtKSk7XHJcblx0XHR2YXIgYXBwVmVyc2lvbiA9IEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL09TIChcXGQrKV8oXFxkKylfPyhcXGQrKT8vKTtcclxuXHRcdHZhciB2ZXJzaW9uID0gYXBwVmVyc2lvbiA/IHBhcnNlSW50KGFwcFZlcnNpb25bMV0sIDEwKSA6IG51bGw7XHJcblx0XHRpZiAoaU9TICYmIHZlcnNpb24gJiYgdmVyc2lvbiA8IDkpIHtcclxuXHRcdFx0dmFyIHNhZmFyaSA9IC9zYWZhcmkvLnRlc3QoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xyXG5cdFx0XHRpZiAoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3Iuc3RhbmRhbG9uZSAmJiAhc2FmYXJpIHx8IEhvd2xlci5fbmF2aWdhdG9yICYmICFIb3dsZXIuX25hdmlnYXRvci5zdGFuZGFsb25lICYmICFzYWZhcmkpIHtcclxuXHRcdFx0XHRIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGFuZCBleHBvc2UgdGhlIG1hc3RlciBHYWluTm9kZSB3aGVuIHVzaW5nIFdlYiBBdWRpbyAodXNlZnVsIGZvciBwbHVnaW5zIG9yIGFkdmFuY2VkIHVzYWdlKS5cclxuXHRcdGlmIChIb3dsZXIudXNpbmdXZWJBdWRpbykge1xyXG5cdFx0XHRIb3dsZXIubWFzdGVyR2FpbiA9ICh0eXBlb2YgSG93bGVyLmN0eC5jcmVhdGVHYWluID09PSAndW5kZWZpbmVkJykgPyBIb3dsZXIuY3R4LmNyZWF0ZUdhaW5Ob2RlKCkgOiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4oKTtcclxuXHRcdFx0SG93bGVyLm1hc3RlckdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZShIb3dsZXIuX211dGVkID8gMCA6IDEsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xyXG5cdFx0XHRIb3dsZXIubWFzdGVyR2Fpbi5jb25uZWN0KEhvd2xlci5jdHguZGVzdGluYXRpb24pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJlLXJ1biB0aGUgc2V0dXAgb24gSG93bGVyLlxyXG5cdFx0SG93bGVyLl9zZXR1cCgpO1xyXG5cdH07XHJcblxyXG5cdC8vIEFkZCBzdXBwb3J0IGZvciBBTUQgKEFzeW5jaHJvbm91cyBNb2R1bGUgRGVmaW5pdGlvbikgbGlicmFyaWVzIHN1Y2ggYXMgcmVxdWlyZS5qcy5cclxuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcblx0XHRkZWZpbmUoW10sIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdEhvd2xlcjogSG93bGVyLFxyXG5cdFx0XHRcdEhvd2w6IEhvd2xcclxuXHRcdFx0fTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Ly8gQWRkIHN1cHBvcnQgZm9yIENvbW1vbkpTIGxpYnJhcmllcyBzdWNoIGFzIGJyb3dzZXJpZnkuXHJcblx0aWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0ZXhwb3J0cy5Ib3dsZXIgPSBIb3dsZXI7XHJcblx0XHRleHBvcnRzLkhvd2wgPSBIb3dsO1xyXG5cdH1cclxuXHJcblx0Ly8gRGVmaW5lIGdsb2JhbGx5IGluIGNhc2UgQU1EIGlzIG5vdCBhdmFpbGFibGUgb3IgdW51c2VkLlxyXG5cdGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0d2luZG93Lkhvd2xlckdsb2JhbCA9IEhvd2xlckdsb2JhbDtcclxuXHRcdHdpbmRvdy5Ib3dsZXIgPSBIb3dsZXI7XHJcblx0XHR3aW5kb3cuSG93bCA9IEhvd2w7XHJcblx0XHR3aW5kb3cuU291bmQgPSBTb3VuZDtcclxuXHR9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7IC8vIEFkZCB0byBnbG9iYWwgaW4gTm9kZS5qcyAoZm9yIHRlc3RpbmcsIGV0YykuXHJcblx0XHRnbG9iYWwuSG93bGVyR2xvYmFsID0gSG93bGVyR2xvYmFsO1xyXG5cdFx0Z2xvYmFsLkhvd2xlciA9IEhvd2xlcjtcclxuXHRcdGdsb2JhbC5Ib3dsID0gSG93bDtcclxuXHRcdGdsb2JhbC5Tb3VuZCA9IFNvdW5kO1xyXG5cdH1cclxufSkoKTtcclxuXHJcblxyXG4vKiFcclxuICogIFNwYXRpYWwgUGx1Z2luIC0gQWRkcyBzdXBwb3J0IGZvciBzdGVyZW8gYW5kIDNEIGF1ZGlvIHdoZXJlIFdlYiBBdWRpbyBpcyBzdXBwb3J0ZWQuXHJcbiAqICBcclxuICogIGhvd2xlci5qcyB2Mi4xLjFcclxuICogIGhvd2xlcmpzLmNvbVxyXG4gKlxyXG4gKiAgKGMpIDIwMTMtMjAxOCwgSmFtZXMgU2ltcHNvbiBvZiBHb2xkRmlyZSBTdHVkaW9zXHJcbiAqICBnb2xkZmlyZXN0dWRpb3MuY29tXHJcbiAqXHJcbiAqICBNSVQgTGljZW5zZVxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigpIHtcclxuXHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHQvLyBTZXR1cCBkZWZhdWx0IHByb3BlcnRpZXMuXHJcblx0SG93bGVyR2xvYmFsLnByb3RvdHlwZS5fcG9zID0gWzAsIDAsIDBdO1xyXG5cdEhvd2xlckdsb2JhbC5wcm90b3R5cGUuX29yaWVudGF0aW9uID0gWzAsIDAsIC0xLCAwLCAxLCAwXTtcclxuXHJcblx0LyoqIEdsb2JhbCBNZXRob2RzICoqL1xyXG5cdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG5cdC8qKlxyXG5cdCAqIEhlbHBlciBtZXRob2QgdG8gdXBkYXRlIHRoZSBzdGVyZW8gcGFubmluZyBwb3NpdGlvbiBvZiBhbGwgY3VycmVudCBIb3dscy5cclxuXHQgKiBGdXR1cmUgSG93bHMgd2lsbCBub3QgdXNlIHRoaXMgdmFsdWUgdW5sZXNzIGV4cGxpY2l0bHkgc2V0LlxyXG5cdCAqIEBwYXJhbSAge051bWJlcn0gcGFuIEEgdmFsdWUgb2YgLTEuMCBpcyBhbGwgdGhlIHdheSBsZWZ0IGFuZCAxLjAgaXMgYWxsIHRoZSB3YXkgcmlnaHQuXHJcblx0ICogQHJldHVybiB7SG93bGVyL051bWJlcn0gICAgIFNlbGYgb3IgY3VycmVudCBzdGVyZW8gcGFubmluZyB2YWx1ZS5cclxuXHQgKi9cclxuXHRIb3dsZXJHbG9iYWwucHJvdG90eXBlLnN0ZXJlbyA9IGZ1bmN0aW9uKHBhbikge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxyXG5cdFx0aWYgKCFzZWxmLmN0eCB8fCAhc2VsZi5jdHgubGlzdGVuZXIpIHtcclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTG9vcCB0aHJvdWdoIGFsbCBIb3dscyBhbmQgdXBkYXRlIHRoZWlyIHN0ZXJlbyBwYW5uaW5nLlxyXG5cdFx0Zm9yICh2YXIgaSA9IHNlbGYuX2hvd2xzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcblx0XHRcdHNlbGYuX2hvd2xzW2ldLnN0ZXJlbyhwYW4pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBzZWxmO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldC9zZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lciBpbiAzRCBjYXJ0ZXNpYW4gc3BhY2UuIFNvdW5kcyB1c2luZ1xyXG5cdCAqIDNEIHBvc2l0aW9uIHdpbGwgYmUgcmVsYXRpdmUgdG8gdGhlIGxpc3RlbmVyJ3MgcG9zaXRpb24uXHJcblx0ICogQHBhcmFtICB7TnVtYmVyfSB4IFRoZSB4LXBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lci5cclxuXHQgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgVGhlIHktcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxyXG5cdCAqIEBwYXJhbSAge051bWJlcn0geiBUaGUgei1wb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIuXHJcblx0ICogQHJldHVybiB7SG93bGVyL0FycmF5fSAgIFNlbGYgb3IgY3VycmVudCBsaXN0ZW5lciBwb3NpdGlvbi5cclxuXHQgKi9cclxuXHRIb3dsZXJHbG9iYWwucHJvdG90eXBlLnBvcyA9IGZ1bmN0aW9uKHgsIHksIHopIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHQvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cclxuXHRcdGlmICghc2VsZi5jdHggfHwgIXNlbGYuY3R4Lmxpc3RlbmVyKSB7XHJcblx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cclxuXHRcdHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IHNlbGYuX3Bvc1sxXSA6IHk7XHJcblx0XHR6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9wb3NbMl0gOiB6O1xyXG5cclxuXHRcdGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcclxuXHRcdFx0c2VsZi5fcG9zID0gW3gsIHksIHpdO1xyXG5cclxuXHRcdFx0aWYgKHR5cGVvZiBzZWxmLmN0eC5saXN0ZW5lci5wb3NpdGlvblggIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0c2VsZi5jdHgubGlzdGVuZXIucG9zaXRpb25YLnNldFRhcmdldEF0VGltZShzZWxmLl9wb3NbMF0sIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XHJcblx0XHRcdFx0c2VsZi5jdHgubGlzdGVuZXIucG9zaXRpb25ZLnNldFRhcmdldEF0VGltZShzZWxmLl9wb3NbMV0sIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XHJcblx0XHRcdFx0c2VsZi5jdHgubGlzdGVuZXIucG9zaXRpb25aLnNldFRhcmdldEF0VGltZShzZWxmLl9wb3NbMl0sIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0c2VsZi5jdHgubGlzdGVuZXIuc2V0UG9zaXRpb24oc2VsZi5fcG9zWzBdLCBzZWxmLl9wb3NbMV0sIHNlbGYuX3Bvc1syXSk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJldHVybiBzZWxmLl9wb3M7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHNlbGY7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0L3NldCB0aGUgZGlyZWN0aW9uIHRoZSBsaXN0ZW5lciBpcyBwb2ludGluZyBpbiB0aGUgM0QgY2FydGVzaWFuIHNwYWNlLlxyXG5cdCAqIEEgZnJvbnQgYW5kIHVwIHZlY3RvciBtdXN0IGJlIHByb3ZpZGVkLiBUaGUgZnJvbnQgaXMgdGhlIGRpcmVjdGlvbiB0aGVcclxuXHQgKiBmYWNlIG9mIHRoZSBsaXN0ZW5lciBpcyBwb2ludGluZywgYW5kIHVwIGlzIHRoZSBkaXJlY3Rpb24gdGhlIHRvcCBvZiB0aGVcclxuXHQgKiBsaXN0ZW5lciBpcyBwb2ludGluZy4gVGh1cywgdGhlc2UgdmFsdWVzIGFyZSBleHBlY3RlZCB0byBiZSBhdCByaWdodCBhbmdsZXNcclxuXHQgKiBmcm9tIGVhY2ggb3RoZXIuXHJcblx0ICogQHBhcmFtICB7TnVtYmVyfSB4ICAgVGhlIHgtb3JpZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyLlxyXG5cdCAqIEBwYXJhbSAge051bWJlcn0geSAgIFRoZSB5LW9yaWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lci5cclxuXHQgKiBAcGFyYW0gIHtOdW1iZXJ9IHogICBUaGUgei1vcmllbnRhdGlvbiBvZiB0aGUgbGlzdGVuZXIuXHJcblx0ICogQHBhcmFtICB7TnVtYmVyfSB4VXAgVGhlIHgtb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXHJcblx0ICogQHBhcmFtICB7TnVtYmVyfSB5VXAgVGhlIHktb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXHJcblx0ICogQHBhcmFtICB7TnVtYmVyfSB6VXAgVGhlIHotb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXHJcblx0ICogQHJldHVybiB7SG93bGVyL0FycmF5fSAgICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IG9yaWVudGF0aW9uIHZlY3RvcnMuXHJcblx0ICovXHJcblx0SG93bGVyR2xvYmFsLnByb3RvdHlwZS5vcmllbnRhdGlvbiA9IGZ1bmN0aW9uKHgsIHksIHosIHhVcCwgeVVwLCB6VXApIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHQvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cclxuXHRcdGlmICghc2VsZi5jdHggfHwgIXNlbGYuY3R4Lmxpc3RlbmVyKSB7XHJcblx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cclxuXHRcdHZhciBvciA9IHNlbGYuX29yaWVudGF0aW9uO1xyXG5cdFx0eSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gb3JbMV0gOiB5O1xyXG5cdFx0eiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gb3JbMl0gOiB6O1xyXG5cdFx0eFVwID0gKHR5cGVvZiB4VXAgIT09ICdudW1iZXInKSA/IG9yWzNdIDogeFVwO1xyXG5cdFx0eVVwID0gKHR5cGVvZiB5VXAgIT09ICdudW1iZXInKSA/IG9yWzRdIDogeVVwO1xyXG5cdFx0elVwID0gKHR5cGVvZiB6VXAgIT09ICdudW1iZXInKSA/IG9yWzVdIDogelVwO1xyXG5cclxuXHRcdGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcclxuXHRcdFx0c2VsZi5fb3JpZW50YXRpb24gPSBbeCwgeSwgeiwgeFVwLCB5VXAsIHpVcF07XHJcblxyXG5cdFx0XHRpZiAodHlwZW9mIHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRYICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRYLnNldFRhcmdldEF0VGltZSh4LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xyXG5cdFx0XHRcdHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRZLnNldFRhcmdldEF0VGltZSh5LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xyXG5cdFx0XHRcdHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRaLnNldFRhcmdldEF0VGltZSh6LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xyXG5cdFx0XHRcdHNlbGYuY3R4Lmxpc3RlbmVyLnVwWC5zZXRUYXJnZXRBdFRpbWUoeCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcclxuXHRcdFx0XHRzZWxmLmN0eC5saXN0ZW5lci51cFkuc2V0VGFyZ2V0QXRUaW1lKHksIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XHJcblx0XHRcdFx0c2VsZi5jdHgubGlzdGVuZXIudXBaLnNldFRhcmdldEF0VGltZSh6LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHNlbGYuY3R4Lmxpc3RlbmVyLnNldE9yaWVudGF0aW9uKHgsIHksIHosIHhVcCwgeVVwLCB6VXApO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXR1cm4gb3I7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHNlbGY7XHJcblx0fTtcclxuXHJcblx0LyoqIEdyb3VwIE1ldGhvZHMgKiovXHJcblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcblx0LyoqXHJcblx0ICogQWRkIG5ldyBwcm9wZXJ0aWVzIHRvIHRoZSBjb3JlIGluaXQuXHJcblx0ICogQHBhcmFtICB7RnVuY3Rpb259IF9zdXBlciBDb3JlIGluaXQgbWV0aG9kLlxyXG5cdCAqIEByZXR1cm4ge0hvd2x9XHJcblx0ICovXHJcblx0SG93bC5wcm90b3R5cGUuaW5pdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbihvKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRcdC8vIFNldHVwIHVzZXItZGVmaW5lZCBkZWZhdWx0IHByb3BlcnRpZXMuXHJcblx0XHRcdHNlbGYuX29yaWVudGF0aW9uID0gby5vcmllbnRhdGlvbiB8fCBbMSwgMCwgMF07XHJcblx0XHRcdHNlbGYuX3N0ZXJlbyA9IG8uc3RlcmVvIHx8IG51bGw7XHJcblx0XHRcdHNlbGYuX3BvcyA9IG8ucG9zIHx8IG51bGw7XHJcblx0XHRcdHNlbGYuX3Bhbm5lckF0dHIgPSB7XHJcblx0XHRcdFx0Y29uZUlubmVyQW5nbGU6IHR5cGVvZiBvLmNvbmVJbm5lckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZUlubmVyQW5nbGUgOiAzNjAsXHJcblx0XHRcdFx0Y29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyQW5nbGUgOiAzNjAsXHJcblx0XHRcdFx0Y29uZU91dGVyR2FpbjogdHlwZW9mIG8uY29uZU91dGVyR2FpbiAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckdhaW4gOiAwLFxyXG5cdFx0XHRcdGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5kaXN0YW5jZU1vZGVsIDogJ2ludmVyc2UnLFxyXG5cdFx0XHRcdG1heERpc3RhbmNlOiB0eXBlb2Ygby5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLm1heERpc3RhbmNlIDogMTAwMDAsXHJcblx0XHRcdFx0cGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uaW5nTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uaW5nTW9kZWwgOiAnSFJURicsXHJcblx0XHRcdFx0cmVmRGlzdGFuY2U6IHR5cGVvZiBvLnJlZkRpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucmVmRGlzdGFuY2UgOiAxLFxyXG5cdFx0XHRcdHJvbGxvZmZGYWN0b3I6IHR5cGVvZiBvLnJvbGxvZmZGYWN0b3IgIT09ICd1bmRlZmluZWQnID8gby5yb2xsb2ZmRmFjdG9yIDogMVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Ly8gU2V0dXAgZXZlbnQgbGlzdGVuZXJzLlxyXG5cdFx0XHRzZWxmLl9vbnN0ZXJlbyA9IG8ub25zdGVyZW8gPyBbe1xyXG5cdFx0XHRcdGZuOiBvLm9uc3RlcmVvXHJcblx0XHRcdH1dIDogW107XHJcblx0XHRcdHNlbGYuX29ucG9zID0gby5vbnBvcyA/IFt7XHJcblx0XHRcdFx0Zm46IG8ub25wb3NcclxuXHRcdFx0fV0gOiBbXTtcclxuXHRcdFx0c2VsZi5fb25vcmllbnRhdGlvbiA9IG8ub25vcmllbnRhdGlvbiA/IFt7XHJcblx0XHRcdFx0Zm46IG8ub25vcmllbnRhdGlvblxyXG5cdFx0XHR9XSA6IFtdO1xyXG5cclxuXHRcdFx0Ly8gQ29tcGxldGUgaW5pdGlsaXphdGlvbiB3aXRoIGhvd2xlci5qcyBjb3JlJ3MgaW5pdCBmdW5jdGlvbi5cclxuXHRcdFx0cmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG8pO1xyXG5cdFx0fTtcclxuXHR9KShIb3dsLnByb3RvdHlwZS5pbml0KTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0L3NldCB0aGUgc3RlcmVvIHBhbm5pbmcgb2YgdGhlIGF1ZGlvIHNvdXJjZSBmb3IgdGhpcyBzb3VuZCBvciBhbGwgaW4gdGhlIGdyb3VwLlxyXG5cdCAqIEBwYXJhbSAge051bWJlcn0gcGFuICBBIHZhbHVlIG9mIC0xLjAgaXMgYWxsIHRoZSB3YXkgbGVmdCBhbmQgMS4wIGlzIGFsbCB0aGUgd2F5IHJpZ2h0LlxyXG5cdCAqIEBwYXJhbSAge051bWJlcn0gaWQgKG9wdGlvbmFsKSBUaGUgc291bmQgSUQuIElmIG5vbmUgaXMgcGFzc2VkLCBhbGwgaW4gZ3JvdXAgd2lsbCBiZSB1cGRhdGVkLlxyXG5cdCAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgc3RlcmVvIHBhbm5pbmcgdmFsdWUuXHJcblx0ICovXHJcblx0SG93bC5wcm90b3R5cGUuc3RlcmVvID0gZnVuY3Rpb24ocGFuLCBpZCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxyXG5cdFx0aWYgKCFzZWxmLl93ZWJBdWRpbykge1xyXG5cdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBzdGVyZW8gcGFuIHdoZW4gY2FwYWJsZS5cclxuXHRcdGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcclxuXHRcdFx0c2VsZi5fcXVldWUucHVzaCh7XHJcblx0XHRcdFx0ZXZlbnQ6ICdzdGVyZW8nLFxyXG5cdFx0XHRcdGFjdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRzZWxmLnN0ZXJlbyhwYW4sIGlkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZm9yIFBhbm5lclN0ZXJlb05vZGUgc3VwcG9ydCBhbmQgZmFsbGJhY2sgdG8gUGFubmVyTm9kZSBpZiBpdCBkb2Vzbid0IGV4aXN0LlxyXG5cdFx0dmFyIHBhbm5lclR5cGUgPSAodHlwZW9mIEhvd2xlci5jdHguY3JlYXRlU3RlcmVvUGFubmVyID09PSAndW5kZWZpbmVkJykgPyAnc3BhdGlhbCcgOiAnc3RlcmVvJztcclxuXHJcblx0XHQvLyBTZXR1cCB0aGUgZ3JvdXAncyBzdGVyZW8gcGFubmluZyBpZiBubyBJRCBpcyBwYXNzZWQuXHJcblx0XHRpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHQvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3RlcmVvIHBhbm5pbmcgaWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkLlxyXG5cdFx0XHRpZiAodHlwZW9mIHBhbiA9PT0gJ251bWJlcicpIHtcclxuXHRcdFx0XHRzZWxmLl9zdGVyZW8gPSBwYW47XHJcblx0XHRcdFx0c2VsZi5fcG9zID0gW3BhbiwgMCwgMF07XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIHNlbGYuX3N0ZXJlbztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoYW5nZSB0aGUgc3RyZW8gcGFubmluZyBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cclxuXHRcdHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHQvLyBHZXQgdGhlIHNvdW5kLlxyXG5cdFx0XHR2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcclxuXHJcblx0XHRcdGlmIChzb3VuZCkge1xyXG5cdFx0XHRcdGlmICh0eXBlb2YgcGFuID09PSAnbnVtYmVyJykge1xyXG5cdFx0XHRcdFx0c291bmQuX3N0ZXJlbyA9IHBhbjtcclxuXHRcdFx0XHRcdHNvdW5kLl9wb3MgPSBbcGFuLCAwLCAwXTtcclxuXHJcblx0XHRcdFx0XHRpZiAoc291bmQuX25vZGUpIHtcclxuXHRcdFx0XHRcdFx0Ly8gSWYgd2UgYXJlIGZhbGxpbmcgYmFjaywgbWFrZSBzdXJlIHRoZSBwYW5uaW5nTW9kZWwgaXMgZXF1YWxwb3dlci5cclxuXHRcdFx0XHRcdFx0c291bmQuX3Bhbm5lckF0dHIucGFubmluZ01vZGVsID0gJ2VxdWFscG93ZXInO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBwYW5uZXIgc2V0dXAgYW5kIGNyZWF0ZSBhIG5ldyBvbmUgaWYgbm90LlxyXG5cdFx0XHRcdFx0XHRpZiAoIXNvdW5kLl9wYW5uZXIgfHwgIXNvdW5kLl9wYW5uZXIucGFuKSB7XHJcblx0XHRcdFx0XHRcdFx0c2V0dXBQYW5uZXIoc291bmQsIHBhbm5lclR5cGUpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAocGFubmVyVHlwZSA9PT0gJ3NwYXRpYWwnKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNvdW5kLl9wYW5uZXIucG9zaXRpb25YLnNldFZhbHVlQXRUaW1lKHBhbiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XHJcblx0XHRcdFx0XHRcdFx0XHRzb3VuZC5fcGFubmVyLnBvc2l0aW9uWS5zZXRWYWx1ZUF0VGltZSgwLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcclxuXHRcdFx0XHRcdFx0XHRcdHNvdW5kLl9wYW5uZXIucG9zaXRpb25aLnNldFZhbHVlQXRUaW1lKDAsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzb3VuZC5fcGFubmVyLnNldFBvc2l0aW9uKHBhbiwgMCwgMCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdHNvdW5kLl9wYW5uZXIucGFuLnNldFZhbHVlQXRUaW1lKHBhbiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzZWxmLl9lbWl0KCdzdGVyZW8nLCBzb3VuZC5faWQpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gc291bmQuX3N0ZXJlbztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gc2VsZjtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXQvc2V0IHRoZSAzRCBzcGF0aWFsIHBvc2l0aW9uIG9mIHRoZSBhdWRpbyBzb3VyY2UgZm9yIHRoaXMgc291bmQgb3IgZ3JvdXAgcmVsYXRpdmUgdG8gdGhlIGdsb2JhbCBsaXN0ZW5lci5cclxuXHQgKiBAcGFyYW0gIHtOdW1iZXJ9IHggIFRoZSB4LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBzb3VyY2UuXHJcblx0ICogQHBhcmFtICB7TnVtYmVyfSB5ICBUaGUgeS1wb3NpdGlvbiBvZiB0aGUgYXVkaW8gc291cmNlLlxyXG5cdCAqIEBwYXJhbSAge051bWJlcn0geiAgVGhlIHotcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZS5cclxuXHQgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIChvcHRpb25hbCkgVGhlIHNvdW5kIElELiBJZiBub25lIGlzIHBhc3NlZCwgYWxsIGluIGdyb3VwIHdpbGwgYmUgdXBkYXRlZC5cclxuXHQgKiBAcmV0dXJuIHtIb3dsL0FycmF5fSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgM0Qgc3BhdGlhbCBwb3NpdGlvbjogW3gsIHksIHpdLlxyXG5cdCAqL1xyXG5cdEhvd2wucHJvdG90eXBlLnBvcyA9IGZ1bmN0aW9uKHgsIHksIHosIGlkKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0Ly8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXHJcblx0XHRpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XHJcblx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHBvc2l0aW9uIHdoZW4gY2FwYWJsZS5cclxuXHRcdGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcclxuXHRcdFx0c2VsZi5fcXVldWUucHVzaCh7XHJcblx0XHRcdFx0ZXZlbnQ6ICdwb3MnLFxyXG5cdFx0XHRcdGFjdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRzZWxmLnBvcyh4LCB5LCB6LCBpZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cclxuXHRcdHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IDAgOiB5O1xyXG5cdFx0eiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gLTAuNSA6IHo7XHJcblxyXG5cdFx0Ly8gU2V0dXAgdGhlIGdyb3VwJ3Mgc3BhdGlhbCBwb3NpdGlvbiBpZiBubyBJRCBpcyBwYXNzZWQuXHJcblx0XHRpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHQvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3BhdGlhbCBwb3NpdGlvbiBpZiBubyBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQuXHJcblx0XHRcdGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcclxuXHRcdFx0XHRzZWxmLl9wb3MgPSBbeCwgeSwgel07XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIHNlbGYuX3BvcztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoYW5nZSB0aGUgc3BhdGlhbCBwb3NpdGlvbiBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cclxuXHRcdHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHQvLyBHZXQgdGhlIHNvdW5kLlxyXG5cdFx0XHR2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcclxuXHJcblx0XHRcdGlmIChzb3VuZCkge1xyXG5cdFx0XHRcdGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcclxuXHRcdFx0XHRcdHNvdW5kLl9wb3MgPSBbeCwgeSwgel07XHJcblxyXG5cdFx0XHRcdFx0aWYgKHNvdW5kLl9ub2RlKSB7XHJcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgcGFubmVyIHNldHVwIGFuZCBjcmVhdGUgYSBuZXcgb25lIGlmIG5vdC5cclxuXHRcdFx0XHRcdFx0aWYgKCFzb3VuZC5fcGFubmVyIHx8IHNvdW5kLl9wYW5uZXIucGFuKSB7XHJcblx0XHRcdFx0XHRcdFx0c2V0dXBQYW5uZXIoc291bmQsICdzcGF0aWFsJyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5wb3NpdGlvblggIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0XHRcdFx0c291bmQuX3Bhbm5lci5wb3NpdGlvblguc2V0VmFsdWVBdFRpbWUoeCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XHJcblx0XHRcdFx0XHRcdFx0c291bmQuX3Bhbm5lci5wb3NpdGlvblkuc2V0VmFsdWVBdFRpbWUoeSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XHJcblx0XHRcdFx0XHRcdFx0c291bmQuX3Bhbm5lci5wb3NpdGlvblouc2V0VmFsdWVBdFRpbWUoeiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0c291bmQuX3Bhbm5lci5zZXRQb3NpdGlvbih4LCB5LCB6KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNlbGYuX2VtaXQoJ3BvcycsIHNvdW5kLl9pZCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHJldHVybiBzb3VuZC5fcG9zO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBzZWxmO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldC9zZXQgdGhlIGRpcmVjdGlvbiB0aGUgYXVkaW8gc291cmNlIGlzIHBvaW50aW5nIGluIHRoZSAzRCBjYXJ0ZXNpYW4gY29vcmRpbmF0ZVxyXG5cdCAqIHNwYWNlLiBEZXBlbmRpbmcgb24gaG93IGRpcmVjdGlvbiB0aGUgc291bmQgaXMsIGJhc2VkIG9uIHRoZSBgY29uZWAgYXR0cmlidXRlcyxcclxuXHQgKiBhIHNvdW5kIHBvaW50aW5nIGF3YXkgZnJvbSB0aGUgbGlzdGVuZXIgY2FuIGJlIHF1aWV0IG9yIHNpbGVudC5cclxuXHQgKiBAcGFyYW0gIHtOdW1iZXJ9IHggIFRoZSB4LW9yaWVudGF0aW9uIG9mIHRoZSBzb3VyY2UuXHJcblx0ICogQHBhcmFtICB7TnVtYmVyfSB5ICBUaGUgeS1vcmllbnRhdGlvbiBvZiB0aGUgc291cmNlLlxyXG5cdCAqIEBwYXJhbSAge051bWJlcn0geiAgVGhlIHotb3JpZW50YXRpb24gb2YgdGhlIHNvdXJjZS5cclxuXHQgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIChvcHRpb25hbCkgVGhlIHNvdW5kIElELiBJZiBub25lIGlzIHBhc3NlZCwgYWxsIGluIGdyb3VwIHdpbGwgYmUgdXBkYXRlZC5cclxuXHQgKiBAcmV0dXJuIHtIb3dsL0FycmF5fSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgM0Qgc3BhdGlhbCBvcmllbnRhdGlvbjogW3gsIHksIHpdLlxyXG5cdCAqL1xyXG5cdEhvd2wucHJvdG90eXBlLm9yaWVudGF0aW9uID0gZnVuY3Rpb24oeCwgeSwgeiwgaWQpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHQvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cclxuXHRcdGlmICghc2VsZi5fd2ViQXVkaW8pIHtcclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2Ugb3JpZW50YXRpb24gd2hlbiBjYXBhYmxlLlxyXG5cdFx0aWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xyXG5cdFx0XHRzZWxmLl9xdWV1ZS5wdXNoKHtcclxuXHRcdFx0XHRldmVudDogJ29yaWVudGF0aW9uJyxcclxuXHRcdFx0XHRhY3Rpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0c2VsZi5vcmllbnRhdGlvbih4LCB5LCB6LCBpZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cclxuXHRcdHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IHNlbGYuX29yaWVudGF0aW9uWzFdIDogeTtcclxuXHRcdHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IHNlbGYuX29yaWVudGF0aW9uWzJdIDogejtcclxuXHJcblx0XHQvLyBTZXR1cCB0aGUgZ3JvdXAncyBzcGF0aWFsIG9yaWVudGF0aW9uIGlmIG5vIElEIGlzIHBhc3NlZC5cclxuXHRcdGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdC8vIFJldHVybiB0aGUgZ3JvdXAncyBzcGF0aWFsIG9yaWVudGF0aW9uIGlmIG5vIHBhcmFtZXRlcnMgYXJlIHBhc3NlZC5cclxuXHRcdFx0aWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xyXG5cdFx0XHRcdHNlbGYuX29yaWVudGF0aW9uID0gW3gsIHksIHpdO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiBzZWxmLl9vcmllbnRhdGlvbjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoYW5nZSB0aGUgc3BhdGlhbCBvcmllbnRhdGlvbiBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cclxuXHRcdHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHQvLyBHZXQgdGhlIHNvdW5kLlxyXG5cdFx0XHR2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcclxuXHJcblx0XHRcdGlmIChzb3VuZCkge1xyXG5cdFx0XHRcdGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcclxuXHRcdFx0XHRcdHNvdW5kLl9vcmllbnRhdGlvbiA9IFt4LCB5LCB6XTtcclxuXHJcblx0XHRcdFx0XHRpZiAoc291bmQuX25vZGUpIHtcclxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBwYW5uZXIgc2V0dXAgYW5kIGNyZWF0ZSBhIG5ldyBvbmUgaWYgbm90LlxyXG5cdFx0XHRcdFx0XHRpZiAoIXNvdW5kLl9wYW5uZXIpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIHBvc2l0aW9uIHRvIHNldHVwIHRoZSBub2RlIHdpdGguXHJcblx0XHRcdFx0XHRcdFx0aWYgKCFzb3VuZC5fcG9zKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzb3VuZC5fcG9zID0gc2VsZi5fcG9zIHx8IFswLCAwLCAtMC41XTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRcdHNldHVwUGFubmVyKHNvdW5kLCAnc3BhdGlhbCcpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25YICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdFx0XHRcdHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25YLnNldFZhbHVlQXRUaW1lKHgsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xyXG5cdFx0XHRcdFx0XHRcdHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25ZLnNldFZhbHVlQXRUaW1lKHksIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xyXG5cdFx0XHRcdFx0XHRcdHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25aLnNldFZhbHVlQXRUaW1lKHosIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdHNvdW5kLl9wYW5uZXIuc2V0T3JpZW50YXRpb24oeCwgeSwgeik7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzZWxmLl9lbWl0KCdvcmllbnRhdGlvbicsIHNvdW5kLl9pZCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHJldHVybiBzb3VuZC5fb3JpZW50YXRpb247XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHNlbGY7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0L3NldCB0aGUgcGFubmVyIG5vZGUncyBhdHRyaWJ1dGVzIGZvciBhIHNvdW5kIG9yIGdyb3VwIG9mIHNvdW5kcy5cclxuXHQgKiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxsIHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cclxuXHQgKiAgIHBhbm5lckF0dHIoKSAtPiBSZXR1cm5zIHRoZSBncm91cCdzIHZhbHVlcy5cclxuXHQgKiAgIHBhbm5lckF0dHIoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgdmFsdWVzLlxyXG5cdCAqICAgcGFubmVyQXR0cihvKSAtPiBTZXQncyB0aGUgdmFsdWVzIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxyXG5cdCAqICAgcGFubmVyQXR0cihvLCBpZCkgLT4gU2V0J3MgdGhlIHZhbHVlcyBvZiBwYXNzZWQgc291bmQgaWQuXHJcblx0ICpcclxuXHQgKiAgIEF0dHJpYnV0ZXM6XHJcblx0ICogICAgIGNvbmVJbm5lckFuZ2xlIC0gKDM2MCBieSBkZWZhdWx0KSBBIHBhcmFtZXRlciBmb3IgZGlyZWN0aW9uYWwgYXVkaW8gc291cmNlcywgdGhpcyBpcyBhbiBhbmdsZSwgaW4gZGVncmVlcyxcclxuXHQgKiAgICAgICAgICAgICAgICAgICAgICBpbnNpZGUgb2Ygd2hpY2ggdGhlcmUgd2lsbCBiZSBubyB2b2x1bWUgcmVkdWN0aW9uLlxyXG5cdCAqICAgICBjb25lT3V0ZXJBbmdsZSAtICgzNjAgYnkgZGVmYXVsdCkgQSBwYXJhbWV0ZXIgZm9yIGRpcmVjdGlvbmFsIGF1ZGlvIHNvdXJjZXMsIHRoaXMgaXMgYW4gYW5nbGUsIGluIGRlZ3JlZXMsXHJcblx0ICogICAgICAgICAgICAgICAgICAgICAgb3V0c2lkZSBvZiB3aGljaCB0aGUgdm9sdW1lIHdpbGwgYmUgcmVkdWNlZCB0byBhIGNvbnN0YW50IHZhbHVlIG9mIGBjb25lT3V0ZXJHYWluYC5cclxuXHQgKiAgICAgY29uZU91dGVyR2FpbiAtICgwIGJ5IGRlZmF1bHQpIEEgcGFyYW1ldGVyIGZvciBkaXJlY3Rpb25hbCBhdWRpbyBzb3VyY2VzLCB0aGlzIGlzIHRoZSBnYWluIG91dHNpZGUgb2YgdGhlXHJcblx0ICogICAgICAgICAgICAgICAgICAgICBgY29uZU91dGVyQW5nbGVgLiBJdCBpcyBhIGxpbmVhciB2YWx1ZSBpbiB0aGUgcmFuZ2UgYFswLCAxXWAuXHJcblx0ICogICAgIGRpc3RhbmNlTW9kZWwgLSAoJ2ludmVyc2UnIGJ5IGRlZmF1bHQpIERldGVybWluZXMgYWxnb3JpdGhtIHVzZWQgdG8gcmVkdWNlIHZvbHVtZSBhcyBhdWRpbyBtb3ZlcyBhd2F5IGZyb21cclxuXHQgKiAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyLiBDYW4gYmUgYGxpbmVhcmAsIGBpbnZlcnNlYCBvciBgZXhwb25lbnRpYWwuXHJcblx0ICogICAgIG1heERpc3RhbmNlIC0gKDEwMDAwIGJ5IGRlZmF1bHQpIFRoZSBtYXhpbXVtIGRpc3RhbmNlIGJldHdlZW4gc291cmNlIGFuZCBsaXN0ZW5lciwgYWZ0ZXIgd2hpY2ggdGhlIHZvbHVtZVxyXG5cdCAqICAgICAgICAgICAgICAgICAgIHdpbGwgbm90IGJlIHJlZHVjZWQgYW55IGZ1cnRoZXIuXHJcblx0ICogICAgIHJlZkRpc3RhbmNlIC0gKDEgYnkgZGVmYXVsdCkgQSByZWZlcmVuY2UgZGlzdGFuY2UgZm9yIHJlZHVjaW5nIHZvbHVtZSBhcyBzb3VyY2UgbW92ZXMgZnVydGhlciBmcm9tIHRoZSBsaXN0ZW5lci5cclxuXHQgKiAgICAgICAgICAgICAgICAgICBUaGlzIGlzIHNpbXBseSBhIHZhcmlhYmxlIG9mIHRoZSBkaXN0YW5jZSBtb2RlbCBhbmQgaGFzIGEgZGlmZmVyZW50IGVmZmVjdCBkZXBlbmRpbmcgb24gd2hpY2ggbW9kZWxcclxuXHQgKiAgICAgICAgICAgICAgICAgICBpcyB1c2VkIGFuZCB0aGUgc2NhbGUgb2YgeW91ciBjb29yZGluYXRlcy4gR2VuZXJhbGx5LCB2b2x1bWUgd2lsbCBiZSBlcXVhbCB0byAxIGF0IHRoaXMgZGlzdGFuY2UuXHJcblx0ICogICAgIHJvbGxvZmZGYWN0b3IgLSAoMSBieSBkZWZhdWx0KSBIb3cgcXVpY2tseSB0aGUgdm9sdW1lIHJlZHVjZXMgYXMgc291cmNlIG1vdmVzIGZyb20gbGlzdGVuZXIuIFRoaXMgaXMgc2ltcGx5IGFcclxuXHQgKiAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlIG9mIHRoZSBkaXN0YW5jZSBtb2RlbCBhbmQgY2FuIGJlIGluIHRoZSByYW5nZSBvZiBgWzAsIDFdYCB3aXRoIGBsaW5lYXJgIGFuZCBgWzAsIOKInl1gXHJcblx0ICogICAgICAgICAgICAgICAgICAgICB3aXRoIGBpbnZlcnNlYCBhbmQgYGV4cG9uZW50aWFsYC5cclxuXHQgKiAgICAgcGFubmluZ01vZGVsIC0gKCdIUlRGJyBieSBkZWZhdWx0KSBEZXRlcm1pbmVzIHdoaWNoIHNwYXRpYWxpemF0aW9uIGFsZ29yaXRobSBpcyB1c2VkIHRvIHBvc2l0aW9uIGF1ZGlvLlxyXG5cdCAqICAgICAgICAgICAgICAgICAgICAgQ2FuIGJlIGBIUlRGYCBvciBgZXF1YWxwb3dlcmAuXHJcblx0ICpcclxuXHQgKiBAcmV0dXJuIHtIb3dsL09iamVjdH0gUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgcGFubmVyIGF0dHJpYnV0ZXMuXHJcblx0ICovXHJcblx0SG93bC5wcm90b3R5cGUucGFubmVyQXR0ciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0dmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcblx0XHR2YXIgbywgaWQsIHNvdW5kO1xyXG5cclxuXHRcdC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxyXG5cdFx0aWYgKCFzZWxmLl93ZWJBdWRpbykge1xyXG5cdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXHJcblx0XHRpZiAoYXJncy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0Ly8gUmV0dXJuIHRoZSBncm91cCdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxyXG5cdFx0XHRyZXR1cm4gc2VsZi5fcGFubmVyQXR0cjtcclxuXHRcdH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcclxuXHRcdFx0aWYgKHR5cGVvZiBhcmdzWzBdID09PSAnb2JqZWN0Jykge1xyXG5cdFx0XHRcdG8gPSBhcmdzWzBdO1xyXG5cclxuXHRcdFx0XHQvLyBTZXQgdGhlIGdyb3UncyBwYW5uZXIgYXR0cmlidXRlIHZhbHVlcy5cclxuXHRcdFx0XHRpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdFx0aWYgKCFvLnBhbm5lckF0dHIpIHtcclxuXHRcdFx0XHRcdFx0by5wYW5uZXJBdHRyID0ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbmVJbm5lckFuZ2xlOiBvLmNvbmVJbm5lckFuZ2xlLFxyXG5cdFx0XHRcdFx0XHRcdGNvbmVPdXRlckFuZ2xlOiBvLmNvbmVPdXRlckFuZ2xlLFxyXG5cdFx0XHRcdFx0XHRcdGNvbmVPdXRlckdhaW46IG8uY29uZU91dGVyR2FpbixcclxuXHRcdFx0XHRcdFx0XHRkaXN0YW5jZU1vZGVsOiBvLmRpc3RhbmNlTW9kZWwsXHJcblx0XHRcdFx0XHRcdFx0bWF4RGlzdGFuY2U6IG8ubWF4RGlzdGFuY2UsXHJcblx0XHRcdFx0XHRcdFx0cmVmRGlzdGFuY2U6IG8ucmVmRGlzdGFuY2UsXHJcblx0XHRcdFx0XHRcdFx0cm9sbG9mZkZhY3Rvcjogby5yb2xsb2ZmRmFjdG9yLFxyXG5cdFx0XHRcdFx0XHRcdHBhbm5pbmdNb2RlbDogby5wYW5uaW5nTW9kZWxcclxuXHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzZWxmLl9wYW5uZXJBdHRyID0ge1xyXG5cdFx0XHRcdFx0XHRjb25lSW5uZXJBbmdsZTogdHlwZW9mIG8ucGFubmVyQXR0ci5jb25lSW5uZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIuY29uZUlubmVyQW5nbGUgOiBzZWxmLl9jb25lSW5uZXJBbmdsZSxcclxuXHRcdFx0XHRcdFx0Y29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLnBhbm5lckF0dHIuY29uZU91dGVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLmNvbmVPdXRlckFuZ2xlIDogc2VsZi5fY29uZU91dGVyQW5nbGUsXHJcblx0XHRcdFx0XHRcdGNvbmVPdXRlckdhaW46IHR5cGVvZiBvLnBhbm5lckF0dHIuY29uZU91dGVyR2FpbiAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIuY29uZU91dGVyR2FpbiA6IHNlbGYuX2NvbmVPdXRlckdhaW4sXHJcblx0XHRcdFx0XHRcdGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLnBhbm5lckF0dHIuZGlzdGFuY2VNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIuZGlzdGFuY2VNb2RlbCA6IHNlbGYuX2Rpc3RhbmNlTW9kZWwsXHJcblx0XHRcdFx0XHRcdG1heERpc3RhbmNlOiB0eXBlb2Ygby5wYW5uZXJBdHRyLm1heERpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5tYXhEaXN0YW5jZSA6IHNlbGYuX21heERpc3RhbmNlLFxyXG5cdFx0XHRcdFx0XHRyZWZEaXN0YW5jZTogdHlwZW9mIG8ucGFubmVyQXR0ci5yZWZEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIucmVmRGlzdGFuY2UgOiBzZWxmLl9yZWZEaXN0YW5jZSxcclxuXHRcdFx0XHRcdFx0cm9sbG9mZkZhY3RvcjogdHlwZW9mIG8ucGFubmVyQXR0ci5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5yb2xsb2ZmRmFjdG9yIDogc2VsZi5fcm9sbG9mZkZhY3RvcixcclxuXHRcdFx0XHRcdFx0cGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uZXJBdHRyLnBhbm5pbmdNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIucGFubmluZ01vZGVsIDogc2VsZi5fcGFubmluZ01vZGVsXHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBSZXR1cm4gdGhpcyBzb3VuZCdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxyXG5cdFx0XHRcdHNvdW5kID0gc2VsZi5fc291bmRCeUlkKHBhcnNlSW50KGFyZ3NbMF0sIDEwKSk7XHJcblx0XHRcdFx0cmV0dXJuIHNvdW5kID8gc291bmQuX3Bhbm5lckF0dHIgOiBzZWxmLl9wYW5uZXJBdHRyO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XHJcblx0XHRcdG8gPSBhcmdzWzBdO1xyXG5cdFx0XHRpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBVcGRhdGUgdGhlIHZhbHVlcyBvZiB0aGUgc3BlY2lmaWVkIHNvdW5kcy5cclxuXHRcdHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xyXG5cclxuXHRcdFx0aWYgKHNvdW5kKSB7XHJcblx0XHRcdFx0Ly8gTWVyZ2UgdGhlIG5ldyB2YWx1ZXMgaW50byB0aGUgc291bmQuXHJcblx0XHRcdFx0dmFyIHBhID0gc291bmQuX3Bhbm5lckF0dHI7XHJcblx0XHRcdFx0cGEgPSB7XHJcblx0XHRcdFx0XHRjb25lSW5uZXJBbmdsZTogdHlwZW9mIG8uY29uZUlubmVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lSW5uZXJBbmdsZSA6IHBhLmNvbmVJbm5lckFuZ2xlLFxyXG5cdFx0XHRcdFx0Y29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyQW5nbGUgOiBwYS5jb25lT3V0ZXJBbmdsZSxcclxuXHRcdFx0XHRcdGNvbmVPdXRlckdhaW46IHR5cGVvZiBvLmNvbmVPdXRlckdhaW4gIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJHYWluIDogcGEuY29uZU91dGVyR2FpbixcclxuXHRcdFx0XHRcdGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5kaXN0YW5jZU1vZGVsIDogcGEuZGlzdGFuY2VNb2RlbCxcclxuXHRcdFx0XHRcdG1heERpc3RhbmNlOiB0eXBlb2Ygby5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLm1heERpc3RhbmNlIDogcGEubWF4RGlzdGFuY2UsXHJcblx0XHRcdFx0XHRyZWZEaXN0YW5jZTogdHlwZW9mIG8ucmVmRGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5yZWZEaXN0YW5jZSA6IHBhLnJlZkRpc3RhbmNlLFxyXG5cdFx0XHRcdFx0cm9sbG9mZkZhY3RvcjogdHlwZW9mIG8ucm9sbG9mZkZhY3RvciAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJvbGxvZmZGYWN0b3IgOiBwYS5yb2xsb2ZmRmFjdG9yLFxyXG5cdFx0XHRcdFx0cGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uaW5nTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uaW5nTW9kZWwgOiBwYS5wYW5uaW5nTW9kZWxcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHQvLyBVcGRhdGUgdGhlIHBhbm5lciB2YWx1ZXMgb3IgY3JlYXRlIGEgbmV3IHBhbm5lciBpZiBub25lIGV4aXN0cy5cclxuXHRcdFx0XHR2YXIgcGFubmVyID0gc291bmQuX3Bhbm5lcjtcclxuXHRcdFx0XHRpZiAocGFubmVyKSB7XHJcblx0XHRcdFx0XHRwYW5uZXIuY29uZUlubmVyQW5nbGUgPSBwYS5jb25lSW5uZXJBbmdsZTtcclxuXHRcdFx0XHRcdHBhbm5lci5jb25lT3V0ZXJBbmdsZSA9IHBhLmNvbmVPdXRlckFuZ2xlO1xyXG5cdFx0XHRcdFx0cGFubmVyLmNvbmVPdXRlckdhaW4gPSBwYS5jb25lT3V0ZXJHYWluO1xyXG5cdFx0XHRcdFx0cGFubmVyLmRpc3RhbmNlTW9kZWwgPSBwYS5kaXN0YW5jZU1vZGVsO1xyXG5cdFx0XHRcdFx0cGFubmVyLm1heERpc3RhbmNlID0gcGEubWF4RGlzdGFuY2U7XHJcblx0XHRcdFx0XHRwYW5uZXIucmVmRGlzdGFuY2UgPSBwYS5yZWZEaXN0YW5jZTtcclxuXHRcdFx0XHRcdHBhbm5lci5yb2xsb2ZmRmFjdG9yID0gcGEucm9sbG9mZkZhY3RvcjtcclxuXHRcdFx0XHRcdHBhbm5lci5wYW5uaW5nTW9kZWwgPSBwYS5wYW5uaW5nTW9kZWw7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgcG9zaXRpb24gdG8gc2V0dXAgdGhlIG5vZGUgd2l0aC5cclxuXHRcdFx0XHRcdGlmICghc291bmQuX3Bvcykge1xyXG5cdFx0XHRcdFx0XHRzb3VuZC5fcG9zID0gc2VsZi5fcG9zIHx8IFswLCAwLCAtMC41XTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBDcmVhdGUgYSBuZXcgcGFubmVyIG5vZGUuXHJcblx0XHRcdFx0XHRzZXR1cFBhbm5lcihzb3VuZCwgJ3NwYXRpYWwnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gc2VsZjtcclxuXHR9O1xyXG5cclxuXHQvKiogU2luZ2xlIFNvdW5kIE1ldGhvZHMgKiovXHJcblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcblx0LyoqXHJcblx0ICogQWRkIG5ldyBwcm9wZXJ0aWVzIHRvIHRoZSBjb3JlIFNvdW5kIGluaXQuXHJcblx0ICogQHBhcmFtICB7RnVuY3Rpb259IF9zdXBlciBDb3JlIFNvdW5kIGluaXQgbWV0aG9kLlxyXG5cdCAqIEByZXR1cm4ge1NvdW5kfVxyXG5cdCAqL1xyXG5cdFNvdW5kLnByb3RvdHlwZS5pbml0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XHJcblxyXG5cdFx0XHQvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxyXG5cdFx0XHRzZWxmLl9vcmllbnRhdGlvbiA9IHBhcmVudC5fb3JpZW50YXRpb247XHJcblx0XHRcdHNlbGYuX3N0ZXJlbyA9IHBhcmVudC5fc3RlcmVvO1xyXG5cdFx0XHRzZWxmLl9wb3MgPSBwYXJlbnQuX3BvcztcclxuXHRcdFx0c2VsZi5fcGFubmVyQXR0ciA9IHBhcmVudC5fcGFubmVyQXR0cjtcclxuXHJcblx0XHRcdC8vIENvbXBsZXRlIGluaXRpbGl6YXRpb24gd2l0aCBob3dsZXIuanMgY29yZSBTb3VuZCdzIGluaXQgZnVuY3Rpb24uXHJcblx0XHRcdF9zdXBlci5jYWxsKHRoaXMpO1xyXG5cclxuXHRcdFx0Ly8gSWYgYSBzdGVyZW8gb3IgcG9zaXRpb24gd2FzIHNwZWNpZmllZCwgc2V0IGl0IHVwLlxyXG5cdFx0XHRpZiAoc2VsZi5fc3RlcmVvKSB7XHJcblx0XHRcdFx0cGFyZW50LnN0ZXJlbyhzZWxmLl9zdGVyZW8pO1xyXG5cdFx0XHR9IGVsc2UgaWYgKHNlbGYuX3Bvcykge1xyXG5cdFx0XHRcdHBhcmVudC5wb3Moc2VsZi5fcG9zWzBdLCBzZWxmLl9wb3NbMV0sIHNlbGYuX3Bvc1syXSwgc2VsZi5faWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH0pKFNvdW5kLnByb3RvdHlwZS5pbml0KTtcclxuXHJcblx0LyoqXHJcblx0ICogT3ZlcnJpZGUgdGhlIFNvdW5kLnJlc2V0IG1ldGhvZCB0byBjbGVhbiB1cCBwcm9wZXJ0aWVzIGZyb20gdGhlIHNwYXRpYWwgcGx1Z2luLlxyXG5cdCAqIEBwYXJhbSAge0Z1bmN0aW9ufSBfc3VwZXIgU291bmQgcmVzZXQgbWV0aG9kLlxyXG5cdCAqIEByZXR1cm4ge1NvdW5kfVxyXG5cdCAqL1xyXG5cdFNvdW5kLnByb3RvdHlwZS5yZXNldCA9IChmdW5jdGlvbihfc3VwZXIpIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHR2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xyXG5cclxuXHRcdFx0Ly8gUmVzZXQgYWxsIHNwYXRpYWwgcGx1Z2luIHByb3BlcnRpZXMgb24gdGhpcyBzb3VuZC5cclxuXHRcdFx0c2VsZi5fb3JpZW50YXRpb24gPSBwYXJlbnQuX29yaWVudGF0aW9uO1xyXG5cdFx0XHRzZWxmLl9zdGVyZW8gPSBwYXJlbnQuX3N0ZXJlbztcclxuXHRcdFx0c2VsZi5fcG9zID0gcGFyZW50Ll9wb3M7XHJcblx0XHRcdHNlbGYuX3Bhbm5lckF0dHIgPSBwYXJlbnQuX3Bhbm5lckF0dHI7XHJcblxyXG5cdFx0XHQvLyBJZiBhIHN0ZXJlbyBvciBwb3NpdGlvbiB3YXMgc3BlY2lmaWVkLCBzZXQgaXQgdXAuXHJcblx0XHRcdGlmIChzZWxmLl9zdGVyZW8pIHtcclxuXHRcdFx0XHRwYXJlbnQuc3RlcmVvKHNlbGYuX3N0ZXJlbyk7XHJcblx0XHRcdH0gZWxzZSBpZiAoc2VsZi5fcG9zKSB7XHJcblx0XHRcdFx0cGFyZW50LnBvcyhzZWxmLl9wb3NbMF0sIHNlbGYuX3Bvc1sxXSwgc2VsZi5fcG9zWzJdLCBzZWxmLl9pZCk7XHJcblx0XHRcdH0gZWxzZSBpZiAoc2VsZi5fcGFubmVyKSB7XHJcblx0XHRcdFx0Ly8gRGlzY29ubmVjdCB0aGUgcGFubmVyLlxyXG5cdFx0XHRcdHNlbGYuX3Bhbm5lci5kaXNjb25uZWN0KDApO1xyXG5cdFx0XHRcdHNlbGYuX3Bhbm5lciA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRwYXJlbnQuX3JlZnJlc2hCdWZmZXIoc2VsZik7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENvbXBsZXRlIHJlc2V0dGluZyBvZiB0aGUgc291bmQuXHJcblx0XHRcdHJldHVybiBfc3VwZXIuY2FsbCh0aGlzKTtcclxuXHRcdH07XHJcblx0fSkoU291bmQucHJvdG90eXBlLnJlc2V0KTtcclxuXHJcblx0LyoqIEhlbHBlciBNZXRob2RzICoqL1xyXG5cdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZSBhIG5ldyBwYW5uZXIgbm9kZSBhbmQgc2F2ZSBpdCBvbiB0aGUgc291bmQuXHJcblx0ICogQHBhcmFtICB7U291bmR9IHNvdW5kIFNwZWNpZmljIHNvdW5kIHRvIHNldHVwIHBhbm5pbmcgb24uXHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVHlwZSBvZiBwYW5uZXIgdG8gY3JlYXRlOiAnc3RlcmVvJyBvciAnc3BhdGlhbCcuXHJcblx0ICovXHJcblx0dmFyIHNldHVwUGFubmVyID0gZnVuY3Rpb24oc291bmQsIHR5cGUpIHtcclxuXHRcdHR5cGUgPSB0eXBlIHx8ICdzcGF0aWFsJztcclxuXHJcblx0XHQvLyBDcmVhdGUgdGhlIG5ldyBwYW5uZXIgbm9kZS5cclxuXHRcdGlmICh0eXBlID09PSAnc3BhdGlhbCcpIHtcclxuXHRcdFx0c291bmQuX3Bhbm5lciA9IEhvd2xlci5jdHguY3JlYXRlUGFubmVyKCk7XHJcblx0XHRcdHNvdW5kLl9wYW5uZXIuY29uZUlubmVyQW5nbGUgPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lSW5uZXJBbmdsZTtcclxuXHRcdFx0c291bmQuX3Bhbm5lci5jb25lT3V0ZXJBbmdsZSA9IHNvdW5kLl9wYW5uZXJBdHRyLmNvbmVPdXRlckFuZ2xlO1xyXG5cdFx0XHRzb3VuZC5fcGFubmVyLmNvbmVPdXRlckdhaW4gPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lT3V0ZXJHYWluO1xyXG5cdFx0XHRzb3VuZC5fcGFubmVyLmRpc3RhbmNlTW9kZWwgPSBzb3VuZC5fcGFubmVyQXR0ci5kaXN0YW5jZU1vZGVsO1xyXG5cdFx0XHRzb3VuZC5fcGFubmVyLm1heERpc3RhbmNlID0gc291bmQuX3Bhbm5lckF0dHIubWF4RGlzdGFuY2U7XHJcblx0XHRcdHNvdW5kLl9wYW5uZXIucmVmRGlzdGFuY2UgPSBzb3VuZC5fcGFubmVyQXR0ci5yZWZEaXN0YW5jZTtcclxuXHRcdFx0c291bmQuX3Bhbm5lci5yb2xsb2ZmRmFjdG9yID0gc291bmQuX3Bhbm5lckF0dHIucm9sbG9mZkZhY3RvcjtcclxuXHRcdFx0c291bmQuX3Bhbm5lci5wYW5uaW5nTW9kZWwgPSBzb3VuZC5fcGFubmVyQXR0ci5wYW5uaW5nTW9kZWw7XHJcblxyXG5cdFx0XHRpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdHNvdW5kLl9wYW5uZXIucG9zaXRpb25YLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9wb3NbMF0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xyXG5cdFx0XHRcdHNvdW5kLl9wYW5uZXIucG9zaXRpb25ZLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9wb3NbMV0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xyXG5cdFx0XHRcdHNvdW5kLl9wYW5uZXIucG9zaXRpb25aLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9wb3NbMl0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHNvdW5kLl9wYW5uZXIuc2V0UG9zaXRpb24oc291bmQuX3Bvc1swXSwgc291bmQuX3Bvc1sxXSwgc291bmQuX3Bvc1syXSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblggIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0c291bmQuX3Bhbm5lci5vcmllbnRhdGlvblguc2V0VmFsdWVBdFRpbWUoc291bmQuX29yaWVudGF0aW9uWzBdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcclxuXHRcdFx0XHRzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWS5zZXRWYWx1ZUF0VGltZShzb3VuZC5fb3JpZW50YXRpb25bMV0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xyXG5cdFx0XHRcdHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25aLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9vcmllbnRhdGlvblsyXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0c291bmQuX3Bhbm5lci5zZXRPcmllbnRhdGlvbihzb3VuZC5fb3JpZW50YXRpb25bMF0sIHNvdW5kLl9vcmllbnRhdGlvblsxXSwgc291bmQuX29yaWVudGF0aW9uWzJdKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c291bmQuX3Bhbm5lciA9IEhvd2xlci5jdHguY3JlYXRlU3RlcmVvUGFubmVyKCk7XHJcblx0XHRcdHNvdW5kLl9wYW5uZXIucGFuLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9zdGVyZW8sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHNvdW5kLl9wYW5uZXIuY29ubmVjdChzb3VuZC5fbm9kZSk7XHJcblxyXG5cdFx0Ly8gVXBkYXRlIHRoZSBjb25uZWN0aW9ucy5cclxuXHRcdGlmICghc291bmQuX3BhdXNlZCkge1xyXG5cdFx0XHRzb3VuZC5fcGFyZW50LnBhdXNlKHNvdW5kLl9pZCwgdHJ1ZSkucGxheShzb3VuZC5faWQsIHRydWUpO1xyXG5cdFx0fVxyXG5cdH07XHJcbn0pKCk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7Ozs7Ozs7O0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZEE7QUFDQTtBQWdCQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZlQTtBQUNBO0FBeWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0bERBO0FBQ0E7QUF3bERBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFySUE7QUFDQTtBQXVJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7OztBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBOEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = getScrollWidth;\nfunction getScrollWidth() {\n\tvar div = document.createElement('div');\n\n\tdiv.style.overflowY = 'scroll';\n\tdiv.style.width = '50px';\n\tdiv.style.height = '50px';\n\n\tdiv.style.visibility = 'hidden';\n\n\tdocument.body.appendChild(div);\n\tvar scrollWidth = div.offsetWidth - div.clientWidth;\n\tdocument.body.removeChild(div);\n\n\treturn scrollWidth;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvdG9vbHMvZ2V0U2Nyb2xsV2lkdGguanM/MDU5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRTY3JvbGxXaWR0aCgpIHtcclxuXHR2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG5cdGRpdi5zdHlsZS5vdmVyZmxvd1kgPSAnc2Nyb2xsJztcclxuXHRkaXYuc3R5bGUud2lkdGggPSAnNTBweCc7XHJcblx0ZGl2LnN0eWxlLmhlaWdodCA9ICc1MHB4JztcclxuXHJcblx0ZGl2LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuXHJcblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xyXG5cdHZhciBzY3JvbGxXaWR0aCA9IGRpdi5vZmZzZXRXaWR0aCAtIGRpdi5jbGllbnRXaWR0aDtcclxuXHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdik7XHJcblxyXG5cdHJldHVybiBzY3JvbGxXaWR0aDtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\n__webpack_require__(3);\n\nvar _tools = __webpack_require__(4);\n\nvar Tools = _interopRequireWildcard(_tools);\n\nvar _SoundRouter = __webpack_require__(11);\n\nvar _SoundRouter2 = _interopRequireDefault(_SoundRouter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\ndocument.addEventListener('DOMContentLoaded', function () {\n\t_SoundRouter2.default.init();\n});\n\nwindow.addEventListener('load', function () {});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvYXBwLmpzPzAzNTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICcuL2xpYi9wb2x5ZmlsbHMnO1xyXG5pbXBvcnQgKiBhcyBUb29scyBmcm9tICcuL3Rvb2xzJztcclxuaW1wb3J0IFNvdW5kUm91dGVyIGZyb20gJy4vY29yZS9zb3VuZC9Tb3VuZFJvdXRlcic7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xyXG5cdFNvdW5kUm91dGVyLmluaXQoKTtcclxufSk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\n// Element.matches();\n(function (el) {\n\tel.matches || (el.matches = el.matchesSelector || function (selector) {\n\t\tvar matches = document.querySelectorAll(selector),\n\t\t    th = this;\n\t\treturn Array.prototype.some.call(matches, function (el) {\n\t\t\treturn el === th;\n\t\t});\n\t});\n})(Element.prototype);\n\n// Element.closest()\n(function (el) {\n\tel.matches = el.matches || el.mozMatchesSelector || el.msMatchesSelector || el.oMatchesSelector || el.webkitMatchesSelector;\n\tel.closest = el.closest || function closest(selector) {\n\t\tif (!this) return null;\n\t\tif (this.matches(selector)) return this;\n\t\tif (!this.parentElement) {\n\t\t\treturn null;\n\t\t} else return this.parentElement.closest(selector);\n\t};\n})(Element.prototype);\n\n// Node.remove()\n(function () {\n\tvar arr = [window.Element, window.CharacterData, window.DocumentType];\n\tvar args = [];\n\n\tarr.forEach(function (item) {\n\t\tif (item) {\n\t\t\targs.push(item.prototype);\n\t\t}\n\t});\n\n\t// from:https://github.com/jserz/js_piece/blob/master/DOM/ChildNode/remove()/remove().md\n\t(function (arr) {\n\t\tarr.forEach(function (item) {\n\t\t\tif (item.hasOwnProperty('remove')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tObject.defineProperty(item, 'remove', {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\twritable: true,\n\t\t\t\tvalue: function remove() {\n\t\t\t\t\tthis.parentNode.removeChild(this);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t})(args);\n})();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvbGliL3BvbHlmaWxscy5qcz9lM2VmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEVsZW1lbnQubWF0Y2hlcygpO1xyXG4oZnVuY3Rpb24oZWwpIHtcclxuXHRlbC5tYXRjaGVzIHx8IChlbC5tYXRjaGVzID0gZWwubWF0Y2hlc1NlbGVjdG9yIHx8IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XHJcblx0XHR2YXIgbWF0Y2hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLFxyXG5cdFx0XHR0aCA9IHRoaXM7XHJcblx0XHRyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChtYXRjaGVzLCBmdW5jdGlvbihlbCkge1xyXG5cdFx0XHRyZXR1cm4gZWwgPT09IHRoO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcbn0pKEVsZW1lbnQucHJvdG90eXBlKTtcclxuXHJcbi8vIEVsZW1lbnQuY2xvc2VzdCgpXHJcbihmdW5jdGlvbihlbCkge1xyXG5cdGVsLm1hdGNoZXMgPSBlbC5tYXRjaGVzIHx8IGVsLm1vek1hdGNoZXNTZWxlY3RvciB8fCBlbC5tc01hdGNoZXNTZWxlY3RvciB8fCBlbC5vTWF0Y2hlc1NlbGVjdG9yIHx8IGVsLndlYmtpdE1hdGNoZXNTZWxlY3RvcjtcclxuXHRlbC5jbG9zZXN0ID0gZWwuY2xvc2VzdCB8fCBmdW5jdGlvbiBjbG9zZXN0KHNlbGVjdG9yKSB7XHJcblx0XHRpZiAoIXRoaXMpIHJldHVybiBudWxsO1xyXG5cdFx0aWYgKHRoaXMubWF0Y2hlcyhzZWxlY3RvcikpIHJldHVybiB0aGlzO1xyXG5cdFx0aWYgKCF0aGlzLnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9IGVsc2UgcmV0dXJuIHRoaXMucGFyZW50RWxlbWVudC5jbG9zZXN0KHNlbGVjdG9yKTtcclxuXHR9O1xyXG59KEVsZW1lbnQucHJvdG90eXBlKSk7XHJcblxyXG4vLyBOb2RlLnJlbW92ZSgpXHJcbihmdW5jdGlvbigpIHtcclxuXHR2YXIgYXJyID0gW3dpbmRvdy5FbGVtZW50LCB3aW5kb3cuQ2hhcmFjdGVyRGF0YSwgd2luZG93LkRvY3VtZW50VHlwZV07XHJcblx0dmFyIGFyZ3MgPSBbXTtcclxuXHJcblx0YXJyLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xyXG5cdFx0aWYgKGl0ZW0pIHtcclxuXHRcdFx0YXJncy5wdXNoKGl0ZW0ucHJvdG90eXBlKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0Ly8gZnJvbTpodHRwczovL2dpdGh1Yi5jb20vanNlcnovanNfcGllY2UvYmxvYi9tYXN0ZXIvRE9NL0NoaWxkTm9kZS9yZW1vdmUoKS9yZW1vdmUoKS5tZFxyXG5cdChmdW5jdGlvbihhcnIpIHtcclxuXHRcdGFyci5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuXHRcdFx0aWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ3JlbW92ZScpKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdGVtLCAncmVtb3ZlJywge1xyXG5cdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxyXG5cdFx0XHRcdHdyaXRhYmxlOiB0cnVlLFxyXG5cdFx0XHRcdHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKSB7XHJcblx0XHRcdFx0XHR0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH0pKGFyZ3MpO1xyXG59KSgpO1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _localStorageAvailable = __webpack_require__(5);\n\nObject.defineProperty(exports, 'localStorageAvailable', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_localStorageAvailable).default;\n  }\n});\n\nvar _getScrollWidth = __webpack_require__(1);\n\nObject.defineProperty(exports, 'getScrollWidth', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_getScrollWidth).default;\n  }\n});\n\nvar _onWindowResize = __webpack_require__(6);\n\nObject.defineProperty(exports, 'onWindowResize', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_onWindowResize).default;\n  }\n});\n\nvar _hideScroll = __webpack_require__(7);\n\nObject.defineProperty(exports, 'hideScroll', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_hideScroll).default;\n  }\n});\n\nvar _IEDetect = __webpack_require__(8);\n\nObject.defineProperty(exports, 'IEDetect', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_IEDetect).default;\n  }\n});\n\nvar _debug = __webpack_require__(9);\n\nObject.defineProperty(exports, 'debug', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_debug).default;\n  }\n});\n\nvar _xhr = __webpack_require__(10);\n\nObject.defineProperty(exports, 'xhr', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_xhr).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvdG9vbHMvaW5kZXguanM/NzE4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBkZWZhdWx0IGFzIGxvY2FsU3RvcmFnZUF2YWlsYWJsZSB9IGZyb20gJy4vbG9jYWxTdG9yYWdlQXZhaWxhYmxlJztcclxuLy8gZXhwb3J0IHsgZGVmYXVsdCBhcyBzY3JvbGxQYWdlVG9Ub3AgfSBmcm9tICcuL3Njcm9sbFBhZ2VUb1RvcCc7XHJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgZ2V0U2Nyb2xsV2lkdGggfSBmcm9tICcuL2dldFNjcm9sbFdpZHRoJztcclxuZXhwb3J0IHsgZGVmYXVsdCBhcyBvbldpbmRvd1Jlc2l6ZSB9IGZyb20gJy4vb25XaW5kb3dSZXNpemUnO1xyXG4vLyBleHBvcnQgeyBkZWZhdWx0IGFzIENvbnN0YW50c30gZnJvbSAnLi9Db25zdGFudHMnO1xyXG5leHBvcnQgeyBkZWZhdWx0IGFzIGhpZGVTY3JvbGwgfSBmcm9tICcuL2hpZGVTY3JvbGwnO1xyXG5leHBvcnQgeyBkZWZhdWx0IGFzIElFRGV0ZWN0IH0gZnJvbSAnLi9JRURldGVjdCc7XHJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgZGVidWcgfSBmcm9tICcuL2RlYnVnJztcclxuZXhwb3J0IHsgZGVmYXVsdCBhcyB4aHIgfSBmcm9tICcuL3hocic7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7O0FBRUE7Ozs7Ozs7OztBQUNBOzs7Ozs7Ozs7QUFFQTs7Ozs7Ozs7O0FBQ0E7Ozs7Ozs7OztBQUNBOzs7Ozs7Ozs7QUFDQTs7OztBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = localStorageAvailable;\n/**\r\n * Проверка поддержки localStorage\r\n * @returns {boolean}\r\n */\n\nfunction localStorageAvailable() {\n\tvar storage = void 0;\n\ttry {\n\t\tvar x = '__storage_test__';\n\t\tstorage = window.localStorage;\n\t\tstorage.setItem(x, x);\n\t\tstorage.removeItem(x);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn e instanceof DOMException && (\n\t\t// everything except Firefox\n\t\te.code === 22 ||\n\t\t// Firefox\n\t\te.code === 1014 ||\n\t\t// test name field too, because code might not be present\n\t\t// everything except Firefox\n\t\te.name === 'QuotaExceededError' ||\n\t\t// Firefox\n\t\te.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n\t\t// acknowledge QuotaExceededError only if there's something already stored\n\t\tstorage.length !== 0;\n\t}\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvdG9vbHMvbG9jYWxTdG9yYWdlQXZhaWxhYmxlLmpzPzY3NjgiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqINCf0YDQvtCy0LXRgNC60LAg0L/QvtC00LTQtdGA0LbQutC4IGxvY2FsU3RvcmFnZVxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICovXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsb2NhbFN0b3JhZ2VBdmFpbGFibGUoKSB7XHJcblx0bGV0IHN0b3JhZ2U7XHJcblx0dHJ5IHtcclxuXHRcdGNvbnN0IHggPSAnX19zdG9yYWdlX3Rlc3RfXyc7XHJcblx0XHRzdG9yYWdlID0gd2luZG93LmxvY2FsU3RvcmFnZTtcclxuXHRcdHN0b3JhZ2Uuc2V0SXRlbSh4LCB4KTtcclxuXHRcdHN0b3JhZ2UucmVtb3ZlSXRlbSh4KTtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH0gY2F0Y2ggKGUpIHtcclxuXHRcdHJldHVybiBlIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uICYmIChcclxuXHRcdC8vIGV2ZXJ5dGhpbmcgZXhjZXB0IEZpcmVmb3hcclxuXHRcdFx0ZS5jb2RlID09PSAyMiB8fFxyXG5cdFx0XHRcdC8vIEZpcmVmb3hcclxuXHRcdFx0XHRlLmNvZGUgPT09IDEwMTQgfHxcclxuXHRcdFx0XHQvLyB0ZXN0IG5hbWUgZmllbGQgdG9vLCBiZWNhdXNlIGNvZGUgbWlnaHQgbm90IGJlIHByZXNlbnRcclxuXHRcdFx0XHQvLyBldmVyeXRoaW5nIGV4Y2VwdCBGaXJlZm94XHJcblx0XHRcdFx0ZS5uYW1lID09PSAnUXVvdGFFeGNlZWRlZEVycm9yJyB8fFxyXG5cdFx0XHRcdC8vIEZpcmVmb3hcclxuXHRcdFx0XHRlLm5hbWUgPT09ICdOU19FUlJPUl9ET01fUVVPVEFfUkVBQ0hFRCcpICYmXHJcblx0XHRcdC8vIGFja25vd2xlZGdlIFF1b3RhRXhjZWVkZWRFcnJvciBvbmx5IGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGFscmVhZHkgc3RvcmVkXHJcblx0XHRcdHN0b3JhZ2UubGVuZ3RoICE9PSAwO1xyXG5cdH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBS0E7QUFMQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/**\r\n * Отслеживает изменение размеров окна браузера и вызывает cb если привысело время указанное в duration\r\n * @param {function} cb каллбэк\r\n * @param {number} [duration=300] интервал в миллисикундах\r\n */\n\nfunction onWindowResize(cb) {\n\tvar duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 300;\n\n\tvar timeout = void 0;\n\twindow.addEventListener('resize', function () {\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(cb, duration);\n\t});\n}\n\nexports.default = onWindowResize;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvdG9vbHMvb25XaW5kb3dSZXNpemUuanM/Y2M1MSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog0J7RgtGB0LvQtdC20LjQstCw0LXRgiDQuNC30LzQtdC90LXQvdC40LUg0YDQsNC30LzQtdGA0L7QsiDQvtC60L3QsCDQsdGA0LDRg9C30LXRgNCwINC4INCy0YvQt9GL0LLQsNC10YIgY2Ig0LXRgdC70Lgg0L/RgNC40LLRi9GB0LXQu9C+INCy0YDQtdC80Y8g0YPQutCw0LfQsNC90L3QvtC1INCyIGR1cmF0aW9uXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiINC60LDQu9C70LHRjdC6XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbZHVyYXRpb249MzAwXSDQuNC90YLQtdGA0LLQsNC7INCyINC80LjQu9C70LjRgdC40LrRg9C90LTQsNGFXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gb25XaW5kb3dSZXNpemUoY2IsIGR1cmF0aW9uID0gMzAwKSB7XHJcblx0bGV0IHRpbWVvdXQ7XHJcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xyXG5cdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG5cdFx0dGltZW91dCA9IHNldFRpbWVvdXQoY2IsIGR1cmF0aW9uKTtcclxuXHR9KTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgb25XaW5kb3dSZXNpemU7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7Ozs7O0FBTUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = hideScroll;\n\nvar _getScrollWidth = __webpack_require__(1);\n\nvar _getScrollWidth2 = _interopRequireDefault(_getScrollWidth);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar header = null;\nvar body = null;\nvar scrollTop = 0;\n\nfunction hideScroll(isHide) {\n\t// header = header || document.querySelector('#header');\n\tbody = body || document.body;\n\n\tif (!body) {\n\t\tconsole.warn('Error: hideScroll()');\n\t\treturn;\n\t}\n\n\trequestAnimationFrame(function () {\n\t\tif (isHide) {\n\t\t\tscrollTop = window.pageYOffset;\n\t\t\twindow.document.documentElement.style.scrollBehavior = 'auto';\n\t\t\tbody.style.top = -scrollTop + 'px';\n\t\t\tbody.style.paddingRight = (0, _getScrollWidth2.default)() + 'px';\n\t\t\tif (header) {\n\t\t\t\theader.style.paddingRight = (0, _getScrollWidth2.default)() + 'px';\n\t\t\t}\n\t\t\tbody.style.position = 'fixed';\n\t\t\tbody.style.overflow = 'hidden';\n\t\t\tbody.classList.add('open-modal');\n\t\t} else {\n\t\t\tbody.style.position = '';\n\t\t\tbody.style.overflow = '';\n\t\t\tbody.classList.remove('open-modal');\n\t\t\tbody.style.paddingRight = '';\n\t\t\tif (header) {\n\t\t\t\theader.style.paddingRight = '';\n\t\t\t}\n\t\t\twindow.scrollTo(0, scrollTop);\n\t\t\twindow.document.documentElement.style.scrollBehavior = '';\n\t\t}\n\t});\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvdG9vbHMvaGlkZVNjcm9sbC5qcz8zNzMxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBnZXRTY3JvbGxXaWR0aCBmcm9tICcuL2dldFNjcm9sbFdpZHRoJztcclxuXHJcbmxldCBoZWFkZXIgPSBudWxsO1xyXG5sZXQgYm9keSA9IG51bGw7XHJcbmxldCBzY3JvbGxUb3AgPSAwO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaGlkZVNjcm9sbChpc0hpZGUpIHtcclxuXHQvLyBoZWFkZXIgPSBoZWFkZXIgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hlYWRlcicpO1xyXG5cdGJvZHkgPSBib2R5IHx8IGRvY3VtZW50LmJvZHk7XHJcblxyXG5cdGlmICghYm9keSkge1xyXG5cdFx0Y29uc29sZS53YXJuKCdFcnJvcjogaGlkZVNjcm9sbCgpJyk7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdFxyXG5cdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRpZiAoaXNIaWRlKSB7XHJcblx0XHRcdHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldDtcclxuXHRcdFx0d2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zY3JvbGxCZWhhdmlvciA9ICdhdXRvJztcclxuXHRcdFx0Ym9keS5zdHlsZS50b3AgPSAtc2Nyb2xsVG9wICsgJ3B4JztcclxuXHRcdFx0Ym9keS5zdHlsZS5wYWRkaW5nUmlnaHQgPSBnZXRTY3JvbGxXaWR0aCgpICsgJ3B4JztcclxuXHRcdFx0aWYgKGhlYWRlcikge1xyXG5cdFx0XHRcdGhlYWRlci5zdHlsZS5wYWRkaW5nUmlnaHQgPSBnZXRTY3JvbGxXaWR0aCgpICsgJ3B4JztcclxuXHRcdFx0fVxyXG5cdFx0XHRib2R5LnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuXHRcdFx0Ym9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG5cdFx0XHRib2R5LmNsYXNzTGlzdC5hZGQoJ29wZW4tbW9kYWwnKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGJvZHkuc3R5bGUucG9zaXRpb24gPSAnJztcclxuXHRcdFx0Ym9keS5zdHlsZS5vdmVyZmxvdyA9ICcnO1xyXG5cdFx0XHRib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4tbW9kYWwnKTtcclxuXHRcdFx0Ym9keS5zdHlsZS5wYWRkaW5nUmlnaHQgPSAnJztcclxuXHRcdFx0aWYgKGhlYWRlcikge1xyXG5cdFx0XHRcdGhlYWRlci5zdHlsZS5wYWRkaW5nUmlnaHQgPSAnJztcclxuXHRcdFx0fVxyXG5cdFx0XHR3aW5kb3cuc2Nyb2xsVG8oMCwgc2Nyb2xsVG9wKTtcclxuXHRcdFx0d2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zY3JvbGxCZWhhdmlvciA9ICcnO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFNQTtBQUNBO0FBUEE7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = IEDetect;\nfunction IEDetect() {\n\tvar sAgent = window.navigator.userAgent;\n\tvar Idx = sAgent.indexOf('MSIE');\n\n\t// If IE, return version number.\n\tif (Idx > 0) return parseInt(sAgent.substring(Idx + 5, sAgent.indexOf('.', Idx)));\n\n\t// If IE 11 then look for Updated user agent string.\n\telse if (!!navigator.userAgent.match(/Trident\\/7\\./)) return 11;else return 0; //It is not IE\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvdG9vbHMvSUVEZXRlY3QuanM/MWVlZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBJRURldGVjdCgpIHtcclxuXHR2YXIgc0FnZW50ID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7XHJcblx0dmFyIElkeCA9IHNBZ2VudC5pbmRleE9mKCdNU0lFJyk7XHJcblxyXG5cdC8vIElmIElFLCByZXR1cm4gdmVyc2lvbiBudW1iZXIuXHJcblx0aWYgKElkeCA+IDApXHJcblx0XHRyZXR1cm4gcGFyc2VJbnQoc0FnZW50LnN1YnN0cmluZyhJZHggKyA1LCBzQWdlbnQuaW5kZXhPZignLicsIElkeCkpKTtcclxuXHJcblx0Ly8gSWYgSUUgMTEgdGhlbiBsb29rIGZvciBVcGRhdGVkIHVzZXIgYWdlbnQgc3RyaW5nLlxyXG5cdGVsc2UgaWYgKCEhbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVHJpZGVudFxcLzdcXC4vKSlcclxuXHRcdHJldHVybiAxMTtcclxuXHJcblx0ZWxzZVxyXG5cdFx0cmV0dXJuIDA7IC8vSXQgaXMgbm90IElFXHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUhBO0FBU0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///8\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Debug = function () {\n\tfunction Debug() {\n\t\t_classCallCheck(this, Debug);\n\t}\n\n\t_createClass(Debug, null, [{\n\t\tkey: 'isLocal',\n\n\t\t/**\r\n      * Проверка на соответсвие имени хоста\r\n      * @param {String|String[]} arr - добавление доверенных хостов\r\n      * @returns boolean\r\n      */\n\t\tvalue: function isLocal(arr) {\n\t\t\tvar locals = ['localhost', '192.168', 'herokuapp', 'github'];\n\t\t\tvar concatArr = locals.concat(arr);\n\t\t\tvar currentHostname = location && location.hostname ? location.hostname : false;\n\t\t\treturn concatArr.some(function (hostname) {\n\t\t\t\treturn currentHostname.indexOf(hostname);\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn Debug;\n}();\n\nexports.default = Debug;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvdG9vbHMvZGVidWcuanM/NWUxZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBEZWJ1ZyB7XHJcblx0LyoqXHJcbiAgICAgKiDQn9GA0L7QstC10YDQutCwINC90LAg0YHQvtC+0YLQstC10YLRgdCy0LjQtSDQuNC80LXQvdC4INGF0L7RgdGC0LBcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfFN0cmluZ1tdfSBhcnIgLSDQtNC+0LHQsNCy0LvQtdC90LjQtSDQtNC+0LLQtdGA0LXQvdC90YvRhSDRhdC+0YHRgtC+0LJcclxuICAgICAqIEByZXR1cm5zIGJvb2xlYW5cclxuICAgICAqL1xyXG5cdHN0YXRpYyBpc0xvY2FsKGFycikge1xyXG5cdFx0bGV0IGxvY2FscyA9IFsnbG9jYWxob3N0JywgJzE5Mi4xNjgnLCAnaGVyb2t1YXBwJywgJ2dpdGh1YiddO1xyXG5cdFx0bGV0IGNvbmNhdEFyciA9IGxvY2Fscy5jb25jYXQoYXJyKTtcclxuXHRcdGxldCBjdXJyZW50SG9zdG5hbWUgPSAobG9jYXRpb24gJiYgbG9jYXRpb24uaG9zdG5hbWUpID8gbG9jYXRpb24uaG9zdG5hbWUgOiBmYWxzZTtcclxuXHRcdHJldHVybiBjb25jYXRBcnIuc29tZSgoaG9zdG5hbWUpID0+IGN1cnJlbnRIb3N0bmFtZS5pbmRleE9mKGhvc3RuYW1lKSk7XHJcblx0fTtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7Ozs7QUFYQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = xhr;\n/**\r\n * XMLHttpRexuest\r\n * \r\n * @param {string} url \r\n * @param {string} type \r\n * @param {object} callback\r\n * \r\n * @example\r\n * xhr('../data/file.json', 'json', function() {\r\n *     // do somthing\r\n * })\r\n */\nfunction xhr(url, type, callback) {\n  var xhr = new XMLHttpRequest();\n\n  xhr.open('GET', url);\n  xhr.responseType = type;\n  xhr.send();\n  xhr.onload = function () {\n    if (callback) {\n      callback(xhr.response);\n    }\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3Rvb2xzL3hoci5qcz8yMDAzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBYTUxIdHRwUmV4dWVzdFxyXG4gKiBcclxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBcclxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFja1xyXG4gKiBcclxuICogQGV4YW1wbGVcclxuICogeGhyKCcuLi9kYXRhL2ZpbGUuanNvbicsICdqc29uJywgZnVuY3Rpb24oKSB7XHJcbiAqICAgICAvLyBkbyBzb210aGluZ1xyXG4gKiB9KVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24geGhyKHVybCwgdHlwZSwgY2FsbGJhY2spIHtcclxuXHR2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG5cdHhoci5vcGVuKCdHRVQnLCB1cmwpO1xyXG5cdHhoci5yZXNwb25zZVR5cGUgPSB0eXBlO1xyXG5cdHhoci5zZW5kKCk7XHJcblx0eGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKGNhbGxiYWNrKSB7XHJcblx0XHRcdGNhbGxiYWNrKHhoci5yZXNwb25zZSk7XHJcblx0XHR9XHJcblx0fTtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBWUE7QUFaQTs7Ozs7Ozs7Ozs7O0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///10\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _howler = __webpack_require__(0);\n\nvar _SoundEvents = __webpack_require__(13);\n\nvar _SoundEvents2 = _interopRequireDefault(_SoundEvents);\n\nvar _SoundControl = __webpack_require__(14);\n\nvar _SoundControl2 = _interopRequireDefault(_SoundControl);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function SoundRouter() {\n\tvar THIS = {};\n\n\tTHIS.init = function () {\n\t\t_SoundEvents2.default.init();\n\t\t_SoundControl2.default.init();\n\t\tbackground();\n\t};\n\n\tfunction getPath() {\n\t\tif (/github/.test(location.href)) {\n\t\t\treturn '/audio/build/sounds/';\n\t\t} else {\n\t\t\treturn '/sounds/';\n\t\t}\n\t}\n\n\tfunction background() {\n\t\tvar sound = new _howler.Howl({\n\t\t\tsrc: [getPath() + 'background.mp3'],\n\t\t\tloop: true,\n\t\t\tvolume: 0.1,\n\t\t\tautoplay: true\n\t\t});\n\t}\n\n\treturn THIS;\n}();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL2NvcmUvc291bmQvU291bmRSb3V0ZXIuanM/OGExNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG5cdEhvd2xcclxufSBmcm9tICcuLi8uLi9saWIvaG93bGVyJztcclxuaW1wb3J0IFNvdW5kRXZlbnRzIGZyb20gJy4vU291bmRFdmVudHMnO1xyXG5pbXBvcnQgU291bmRDb250cm9sIGZyb20gJy4vU291bmRDb250cm9sJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiBTb3VuZFJvdXRlcigpIHtcclxuXHRjb25zdCBUSElTID0ge307XHJcblx0XHJcblx0VEhJUy5pbml0ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRTb3VuZEV2ZW50cy5pbml0KCk7XHJcblx0XHRTb3VuZENvbnRyb2wuaW5pdCgpO1xyXG5cdFx0YmFja2dyb3VuZCgpO1xyXG5cdH07XHJcblxyXG5cdGZ1bmN0aW9uIGdldFBhdGgoKSB7XHJcblx0XHRpZiAoL2dpdGh1Yi8udGVzdChsb2NhdGlvbi5ocmVmKSkge1xyXG5cdFx0XHRyZXR1cm4gJy9hdWRpby9idWlsZC9zb3VuZHMvJztcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJldHVybiAnL3NvdW5kcy8nO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gYmFja2dyb3VuZCgpIHtcclxuXHRcdGNvbnN0IHNvdW5kID0gbmV3IEhvd2woe1xyXG5cdFx0XHRzcmM6IFtnZXRQYXRoKCkgKyAnYmFja2dyb3VuZC5tcDMnXSxcclxuXHRcdFx0bG9vcDogdHJ1ZSxcclxuXHRcdFx0dm9sdW1lOiAwLjEsXHJcblx0XHRcdGF1dG9wbGF5OiB0cnVlXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBUSElTO1xyXG59KSgpO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFFQTtBQUNBOzs7QUFBQTtBQUNBOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n")},function(module,exports){eval('var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function("return this")() || (1, eval)("this");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === "object") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it\'s\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzP2NkMDAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsIGV2YWwpKFwidGhpc1wiKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///12\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _howler = __webpack_require__(0);\n\n/**\r\n * Обработка событий и воспроизведение звуков\r\n */\nexports.default = function SoundEvents() {\n\tvar THIS = {};\n\tvar soundList = {};\n\tvar isMouseDown = false;\n\n\tTHIS.init = function () {\n\t\tTHIS.body = document.body;\n\t\tmouseDownListener();\n\t\thoverListener();\n\t};\n\n\tfunction getPath() {\n\t\tif (/github/.test(location.href)) {\n\t\t\treturn '/audio/build/sounds/';\n\t\t} else {\n\t\t\treturn '/sounds/';\n\t\t}\n\t}\n\n\tfunction handler(prop) {\n\t\tvar src = prop.src[0];\n\t\tif (!soundList[src]) {\n\t\t\tsoundList[src] = new _howler.Howl(prop);\n\t\t} else {\n\t\t\tsoundList[src].play();\n\t\t}\n\t};\n\n\tfunction mouseDownListener() {\n\t\tTHIS.body.addEventListener('mousedown', function (e) {\n\t\t\tisMouseDown = true;\n\t\t\tsetTimeout(function () {\n\t\t\t\tisMouseDown = false;\n\t\t\t}, 0);\n\t\t\tvar t = e.target;\n\t\t\twhile (t && t !== THIS.body) {\n\t\t\t\tif (t && t.matches('[data-sound-press-src]')) {\n\t\t\t\t\tTHIS.currentElement = t;\n\t\t\t\t\tvar src = t.dataset.soundPressSrc || '';\n\t\t\t\t\tvar volume = t.dataset.soundPressVolume || 1;\n\t\t\t\t\thandler({\n\t\t\t\t\t\tsrc: [getPath() + src],\n\t\t\t\t\t\tvolume: volume,\n\t\t\t\t\t\tautoplay: true\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (t) t = t.parentNode;\n\t\t\t}\n\t\t});\n\t};\n\n\tfunction hoverListener() {\n\t\tTHIS.body.addEventListener('mouseover', function (e) {\n\t\t\tif (THIS.currentElement) return;\n\t\t\tvar t = e.target;\n\t\t\twhile (t && t !== THIS.body) {\n\t\t\t\tif (t && t.matches('[data-sound-hover-src]')) {\n\t\t\t\t\tTHIS.currentElement = t;\n\t\t\t\t\tvar src = t.dataset.soundHoverSrc || '';\n\t\t\t\t\tvar volume = t.dataset.soundHoverVolume || 1;\n\t\t\t\t\thandler({\n\t\t\t\t\t\tsrc: [getPath() + src],\n\t\t\t\t\t\tvolume: volume,\n\t\t\t\t\t\tautoplay: true\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (t) t = t.parentNode;\n\t\t\t}\n\t\t});\n\n\t\tTHIS.body.addEventListener('mouseout', function (e) {\n\t\t\tif (!THIS.currentElement || isMouseDown) return;\n\t\t\tvar rt = e.relatedTarget;\n\t\t\twhile (rt && rt !== THIS.body) {\n\t\t\t\tif (rt === THIS.currentElement) return;\n\t\t\t\tif (rt) rt = rt.parentNode;\n\t\t\t}\n\t\t\tTHIS.currentElement = null;\n\t\t});\n\t};\n\n\treturn THIS;\n}();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL2NvcmUvc291bmQvU291bmRFdmVudHMuanM/YjI3OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG5cdEhvd2xcclxufSBmcm9tICcuLi8uLi9saWIvaG93bGVyJztcclxuXHJcbi8qKlxyXG4gKiDQntCx0YDQsNCx0L7RgtC60LAg0YHQvtCx0YvRgtC40Lkg0Lgg0LLQvtGB0L/RgNC+0LjQt9Cy0LXQtNC10L3QuNC1INC30LLRg9C60L7QslxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIFNvdW5kRXZlbnRzKCkge1xyXG5cdGNvbnN0IFRISVMgPSB7fTtcclxuXHRjb25zdCBzb3VuZExpc3QgPSB7fTtcclxuXHRsZXQgaXNNb3VzZURvd24gPSBmYWxzZTtcclxuXHJcblx0VEhJUy5pbml0ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRUSElTLmJvZHkgPSBkb2N1bWVudC5ib2R5O1xyXG5cdFx0bW91c2VEb3duTGlzdGVuZXIoKTtcclxuXHRcdGhvdmVyTGlzdGVuZXIoKTtcclxuXHR9O1xyXG5cclxuXHRmdW5jdGlvbiBnZXRQYXRoKCkge1xyXG5cdFx0aWYgKC9naXRodWIvLnRlc3QobG9jYXRpb24uaHJlZikpIHtcclxuXHRcdFx0cmV0dXJuICcvYXVkaW8vYnVpbGQvc291bmRzLyc7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXR1cm4gJy9zb3VuZHMvJztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGhhbmRsZXIocHJvcCkge1xyXG5cdFx0bGV0IHNyYyA9IHByb3Auc3JjWzBdO1xyXG5cdFx0aWYgKCFzb3VuZExpc3Rbc3JjXSkge1xyXG5cdFx0XHRzb3VuZExpc3Rbc3JjXSA9IG5ldyBIb3dsKHByb3ApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c291bmRMaXN0W3NyY10ucGxheSgpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGZ1bmN0aW9uIG1vdXNlRG93bkxpc3RlbmVyKCkge1xyXG5cdFx0VEhJUy5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7XHJcblx0XHRcdGlzTW91c2VEb3duID0gdHJ1ZTtcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0aXNNb3VzZURvd24gPSBmYWxzZTtcclxuXHRcdFx0fSwgMCk7XHJcblx0XHRcdGxldCB0ID0gZS50YXJnZXQ7XHJcblx0XHRcdHdoaWxlICh0ICYmIHQgIT09IFRISVMuYm9keSkge1xyXG5cdFx0XHRcdGlmICh0ICYmIHQubWF0Y2hlcygnW2RhdGEtc291bmQtcHJlc3Mtc3JjXScpKSB7XHJcblx0XHRcdFx0XHRUSElTLmN1cnJlbnRFbGVtZW50ID0gdDtcclxuXHRcdFx0XHRcdGxldCBzcmMgPSB0LmRhdGFzZXQuc291bmRQcmVzc1NyYyB8fCAnJztcclxuXHRcdFx0XHRcdGxldCB2b2x1bWUgPSB0LmRhdGFzZXQuc291bmRQcmVzc1ZvbHVtZSB8fCAxO1xyXG5cdFx0XHRcdFx0aGFuZGxlcih7XHJcblx0XHRcdFx0XHRcdHNyYzogW2dldFBhdGgoKSArIHNyY10sXHJcblx0XHRcdFx0XHRcdHZvbHVtZTogdm9sdW1lLFxyXG5cdFx0XHRcdFx0XHRhdXRvcGxheTogdHJ1ZVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICh0KSB0ID0gdC5wYXJlbnROb2RlO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9O1xyXG5cdFxyXG5cdGZ1bmN0aW9uIGhvdmVyTGlzdGVuZXIoKSB7XHJcblx0XHRUSElTLmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKGUpID0+IHtcclxuXHRcdFx0aWYgKFRISVMuY3VycmVudEVsZW1lbnQpIHJldHVybjtcclxuXHRcdFx0bGV0IHQgPSBlLnRhcmdldDtcclxuXHRcdFx0d2hpbGUgKHQgJiYgdCAhPT0gVEhJUy5ib2R5KSB7XHJcblx0XHRcdFx0aWYgKHQgJiYgdC5tYXRjaGVzKCdbZGF0YS1zb3VuZC1ob3Zlci1zcmNdJykpIHtcclxuXHRcdFx0XHRcdFRISVMuY3VycmVudEVsZW1lbnQgPSB0O1xyXG5cdFx0XHRcdFx0bGV0IHNyYyA9IHQuZGF0YXNldC5zb3VuZEhvdmVyU3JjIHx8ICcnO1xyXG5cdFx0XHRcdFx0bGV0IHZvbHVtZSA9IHQuZGF0YXNldC5zb3VuZEhvdmVyVm9sdW1lIHx8IDE7XHJcblx0XHRcdFx0XHRoYW5kbGVyKHtcclxuXHRcdFx0XHRcdFx0c3JjOiBbZ2V0UGF0aCgpICsgc3JjXSxcclxuXHRcdFx0XHRcdFx0dm9sdW1lOiB2b2x1bWUsXHJcblx0XHRcdFx0XHRcdGF1dG9wbGF5OiB0cnVlXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKHQpIHQgPSB0LnBhcmVudE5vZGU7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRUSElTLmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoZSkgPT4ge1xyXG5cdFx0XHRpZiAoIVRISVMuY3VycmVudEVsZW1lbnQgfHwgaXNNb3VzZURvd24pIHJldHVybjtcclxuXHRcdFx0bGV0IHJ0ID0gZS5yZWxhdGVkVGFyZ2V0O1xyXG5cdFx0XHR3aGlsZSAocnQgJiYgcnQgIT09IFRISVMuYm9keSkge1xyXG5cdFx0XHRcdGlmIChydCA9PT0gVEhJUy5jdXJyZW50RWxlbWVudCkgcmV0dXJuO1xyXG5cdFx0XHRcdGlmIChydCkgcnQgPSBydC5wYXJlbnROb2RlO1xyXG5cdFx0XHR9XHJcblx0XHRcdFRISVMuY3VycmVudEVsZW1lbnQgPSBudWxsO1xyXG5cdFx0fSk7XHJcblx0fTtcclxuXHRcclxuXHRyZXR1cm4gVEhJUztcclxufSkoKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBR0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///13\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _howler = __webpack_require__(0);\n\n/**\r\n * Управление звуком, например громкостью\r\n */\nexports.default = function SoundControl() {\n\tvar THIS = {};\n\n\tTHIS.init = function () {\n\t\tTHIS.volumeRangeElem = document.querySelector('.js-volume-range');\n\t\tsetRangeValues();\n\t\tvolumeRange();\n\t};\n\n\t/**\r\n  * Получить значение ползунка громкости\r\n  */\n\tTHIS.getRangeValue = function () {\n\t\treturn THIS.volumeRangeElem.value;\n\t};\n\n\tfunction setRangeValues() {\n\t\tTHIS.volumeRangeElem.max = 100;\n\t\tTHIS.volumeRangeElem.min = 0;\n\t\tTHIS.volumeRangeElem.step = 1;\n\t}\n\n\tfunction volumeRange() {\n\t\tif (!THIS.volumeRangeElem) {\n\t\t\tconsole.warn('SoundControl(): can\\'t find range element by class=\"js-volume-range\"');\n\t\t\treturn;\n\t\t}\n\t\tTHIS.volumeRangeElem.addEventListener('input', function (e) {\n\t\t\t_howler.Howler.volume(e.target.value / 100);\n\t\t});\n\t};\n\n\treturn THIS;\n}(); // import AudioManager from './AudioManager';\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL2NvcmUvc291bmQvU291bmRDb250cm9sLmpzP2ZiYjAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IEF1ZGlvTWFuYWdlciBmcm9tICcuL0F1ZGlvTWFuYWdlcic7XHJcbmltcG9ydCB7IEhvd2wsIEhvd2xlciB9IGZyb20gJy4uLy4uL2xpYi9ob3dsZXInO1xyXG5cclxuLyoqXHJcbiAqINCj0L/RgNCw0LLQu9C10L3QuNC1INC30LLRg9C60L7QvCwg0L3QsNC/0YDQuNC80LXRgCDQs9GA0L7QvNC60L7RgdGC0YzRjlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIFNvdW5kQ29udHJvbCgpIHtcclxuXHRjb25zdCBUSElTID0ge307XHJcblxyXG5cdFRISVMuaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0VEhJUy52b2x1bWVSYW5nZUVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtdm9sdW1lLXJhbmdlJyk7XHJcblx0XHRzZXRSYW5nZVZhbHVlcygpO1xyXG5cdFx0dm9sdW1lUmFuZ2UoKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiDQn9C+0LvRg9GH0LjRgtGMINC30L3QsNGH0LXQvdC40LUg0L/QvtC70LfRg9C90LrQsCDQs9GA0L7QvNC60L7RgdGC0LhcclxuXHQgKi9cclxuXHRUSElTLmdldFJhbmdlVmFsdWUgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiBUSElTLnZvbHVtZVJhbmdlRWxlbS52YWx1ZTtcclxuXHR9O1xyXG5cclxuXHRmdW5jdGlvbiBzZXRSYW5nZVZhbHVlcygpIHtcclxuXHRcdFRISVMudm9sdW1lUmFuZ2VFbGVtLm1heCA9IDEwMDtcclxuXHRcdFRISVMudm9sdW1lUmFuZ2VFbGVtLm1pbiA9IDA7XHJcblx0XHRUSElTLnZvbHVtZVJhbmdlRWxlbS5zdGVwID0gMTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHZvbHVtZVJhbmdlKCkge1xyXG5cdFx0aWYgKCFUSElTLnZvbHVtZVJhbmdlRWxlbSkge1xyXG5cdFx0XHRjb25zb2xlLndhcm4oJ1NvdW5kQ29udHJvbCgpOiBjYW5cXCd0IGZpbmQgcmFuZ2UgZWxlbWVudCBieSBjbGFzcz1cImpzLXZvbHVtZS1yYW5nZVwiJyk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdFRISVMudm9sdW1lUmFuZ2VFbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcclxuXHRcdFx0SG93bGVyLnZvbHVtZShlLnRhcmdldC52YWx1ZSAvIDEwMCk7XHJcblx0XHR9KTtcclxuXHR9O1xyXG5cclxuXHRyZXR1cm4gVEhJUztcclxufSkoKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///14\n")}]);